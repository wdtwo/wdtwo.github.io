<!DOCTYPE html>
<html lang="zh-cn">
<head>
    	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
    <title>WDTWO Blog</title>
	<link href="/assets/css/style.css" rel="stylesheet" type="text/css">
	<link href="/assets/css/animate.css" rel="stylesheet" type="text/css">
	<link href="/assets/fontawesome-free-5.15.4-web/css/all.min.css" rel="stylesheet" type="text/css">
    
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="light">

    <div class="loading flex">
        <div></div>
    </div>

    <!-- 调试信息 -->
    <!-- 
        <div style="background: #f0f0f0; padding: 10px; margin: 10px;">
            页面类型: post<br>
            页面路径: 2023/06/21/学习-thinkphp3-2-3快速入门.html<br>
            是否为文章页: true<br>
            是否为首页: false
        </div>
     -->
    <header class="flex flex-jus-between">
    <h1 class="header-title">
        <a href="/" class="header-title">
            WDTWO Blog
        </a>
    </h1>
    <div class="flex">
        <div class="menu-list animated">
            
                <a class="menu-item" href="/archives">目录</a>
            
                <a class="menu-item" href="/category">分类</a>
            
                <a class="menu-item" href="/tag">标签</a>
            
                <a class="menu-item" href="/static/mark/index.html">书签</a>
            
            <i class="fa fa-times mobile-close-menu"></i>
        </div>
        <i class="fa fa-search"></i>
        <i class="fa fa-bars mobile-menu"></i>
        <i class="fa fa-sun"></i>
        <i class="fa fa-moon"></i>
    </div>
</header>

<script>
    window.addEventListener('DOMContentLoaded',function(){
        // 搜索按钮点击事件
        document.querySelector('.fa-search').addEventListener('click',function(){
            showSearchPage()
        })
        document.querySelector('.search-page-bg').addEventListener('click',function(){
            hideSearchPage()
        })  
        // 显示菜单
        document.querySelector('.mobile-menu').addEventListener('click',function(){
            showMobileMenu()
        })
        document.querySelector('.mobile-close-menu').addEventListener('click',function(){
            hideMobileMenu()
        })
    })
</script>
    <div class="main">
        <!-- 添加 highlight.js 的样式 -->
<link rel="stylesheet" href="/assets/css/atom-one-dark-reasonable.css">
<link rel="stylesheet" href="/assets/css/markdown.css">
<div class="post-box flex flex-item-start">
    <article class="post">
    
        <h1 class="post-title t-c">thinkphp3.2.3快速入门</h1>
        <div class="post-meta t-c flex">
            <!-- 作者 -->
            <div>
                <i class="fa fa-user c-purple"></i>
                Gary Wang
             </div>
            <div>
                <i class="fa fa-calendar c-orange"></i>
                2023-06-21
            </div>
            
                <div>
                    <i class="fa fa-folder c-yellow"></i>
                    <a class="archive-item-category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a>
                </div>
            
            
                <div>
                    <i class="fa fa-tags c-green"></i>
                    <a class="archive-item-tag-none-link" href="/tag/php/" rel="tag">php</a>
                </div>
            
        </div>
        <hr class="line">
        <div class="post-content">
            <p>thinkphp3.2.3快速入门</p>
<span id="more"></span>
<h3 id="快速生成模块"><a href="#快速生成模块" class="headerlink" title="快速生成模块"></a>快速生成模块</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;BIND_MODULE&#x27;</span>,<span class="hljs-string">&#x27;Admin&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h3 id="临时文件目录"><a href="#临时文件目录" class="headerlink" title="临时文件目录"></a>临时文件目录</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;RUNTIME_PATH&#x27;</span>,<span class="hljs-string">&#x27;./Runtime/&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h3 id="开启调试模式"><a href="#开启调试模式" class="headerlink" title="开启调试模式"></a>开启调试模式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;APP_DEBUG&#x27;</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// 开启调试模式</span><br></code></pre></td></tr></table></figure>
<h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Home</span>\<span class="hljs-title class_">Controller</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">Think</span>\<span class="hljs-title">Controller</span>;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;hello,thinkphp!&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>=<span class="hljs-string">&#x27;thinkphp&#x27;</span></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;hello,&#x27;</span>.<span class="hljs-variable">$name</span>.<span class="hljs-string">&#x27;!&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello2</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;只是protected方法!&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello3</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;这是private方法!&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//http://serverName/index.php/模块/控制器/操作</span><br><span class="hljs-comment">//http://localhost/index.php/home/index/hello/name/baby =&gt; hello,body!</span><br></code></pre></td></tr></table></figure>
<h2 id="REWRITE模式-htaccess"><a href="#REWRITE模式-htaccess" class="headerlink" title="REWRITE模式 .htaccess"></a>REWRITE模式 .htaccess</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;IfModule mod_rewrite.c&gt;<br>    RewriteEngine on<br>    RewriteCond %&#123;REQUEST_FILENAME&#125; !-d<br>    RewriteCond %&#123;REQUEST_FILENAME&#125; !-f<br>    RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]<br>&lt;/IfModule&gt;<br>//http://localhost/home/index/hello/name/thinkphp/<br></code></pre></td></tr></table></figure>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>hello &#123;$name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        hello, &#123;$name&#125;!<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Home</span>\<span class="hljs-title class_">Controller</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">Think</span>\<span class="hljs-title">Controller</span>;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>=<span class="hljs-string">&#x27;thinkphp&#x27;</span></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">assign</span>(<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-variable">$name</span>);<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">display</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `think_data`(<br>    `id`<span class="hljs-type">int</span>(<span class="hljs-number">8</span>)unsigned <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT,<br>    `data` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    <span class="hljs-keyword">PRIMARY KEY</span> (`id`)<br>) ENGINE<span class="hljs-operator">=</span>MyISAM <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 ;<br><span class="hljs-keyword">INSERT INTO</span> `think_data`(`id`,`data`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;thinkphp&#x27;</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;php&#x27;</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;framework&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h3 id="添加数据库配置信息"><a href="#添加数据库配置信息" class="headerlink" title="添加数据库配置信息"></a>添加数据库配置信息</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-string">&#x27;DB_TYPE&#x27;</span>=&gt;<span class="hljs-string">&#x27;mysql&#x27;</span>,<span class="hljs-comment">// 数据库类型</span><br><span class="hljs-string">&#x27;DB_HOST&#x27;</span>=&gt;<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<span class="hljs-comment">// 服务器地址</span><br><span class="hljs-string">&#x27;DB_NAME&#x27;</span>=&gt;<span class="hljs-string">&#x27;thinkphp&#x27;</span>,<span class="hljs-comment">// 数据库名</span><br><span class="hljs-string">&#x27;DB_USER&#x27;</span>=&gt;<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-comment">// 用户名</span><br><span class="hljs-string">&#x27;DB_PWD&#x27;</span>=&gt;<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-comment">// 密码</span><br><span class="hljs-string">&#x27;DB_PORT&#x27;</span>=&gt;<span class="hljs-number">3306</span>,<span class="hljs-comment">// 端口</span><br><span class="hljs-string">&#x27;DB_PREFIX&#x27;</span>=&gt;<span class="hljs-string">&#x27;think_&#x27;</span>,<span class="hljs-comment">// 数据库表前缀</span><br><span class="hljs-string">&#x27;DB_CHARSET&#x27;</span>=&gt;<span class="hljs-string">&#x27;utf8&#x27;</span>,<span class="hljs-comment">// 数据库字符集</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//操作数据库</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Home</span>\<span class="hljs-title class_">Controller</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">Think</span>\<span class="hljs-title">Controller</span>;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$Data</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&#x27;Data&#x27;</span>);<span class="hljs-comment">// 实例化Data数据模型</span><br>        <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Data</span>-&gt;<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">assign</span>(<span class="hljs-string">&#x27;result&#x27;</span>,<span class="hljs-variable">$result</span>);<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">display</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        &#123;$result.id&#125;--&#123;$result.data&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h2 id="CURD"><a href="#CURD" class="headerlink" title="CURD"></a>CURD</h2><p><code>数据库技术中的缩写词.代表创建create,更新update,读取read,删除delete操作.</code><br><code>ThinkPHP中使用add(),save(),select(),delete()来模拟curd操作.</code></p>
<h3 id="创建数据"><a href="#创建数据" class="headerlink" title="创建数据"></a>创建数据</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">//create<br><span class="hljs-tag">&lt;<span class="hljs-name">FORM</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;__URL__/insert&quot;</span>&gt;</span><br>标题：<span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>内容：<span class="hljs-tag">&lt;<span class="hljs-name">TEXTAREA</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;content&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;5&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;45&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">TEXTAREA</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">FORM</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//  controller  =&gt;  FormController.class.php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Home</span>\<span class="hljs-title class_">Controller</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">Think</span>\<span class="hljs-title">Controller</span>;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></span>&#123;<br>    <br>&#125;<br><span class="hljs-comment">//http://localhost/app/index.php/home/Form/add</span><br></code></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// Controller =&gt; FormController.class.php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Home</span>\<span class="hljs-title class_">Controller</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">Think</span>\<span class="hljs-title">Controller</span>;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insert</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">D</span>(<span class="hljs-string">&#x27;Form&#x27;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">create</span>()) &#123;<br>            <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">add</span>();<br>            <span class="hljs-keyword">if</span>(<span class="hljs-variable">$result</span>) &#123;<br>                <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">success</span>(<span class="hljs-string">&#x27;数据添加成功！&#x27;</span>);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">&#x27;数据添加错误！&#x27;</span>);<br>            &#125;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">getError</span>());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `think_form` (<br>    `id` <span class="hljs-type">smallint</span>(<span class="hljs-number">4</span>) unsigned <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT,<br>    `title` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    `content` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    `create_time` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) unsigned <span class="hljs-keyword">NOT NULL</span>,<br>    <span class="hljs-keyword">PRIMARY KEY</span> (`id`)<br>) ENGINE<span class="hljs-operator">=</span>MyISAM <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 ;<br></code></pre></td></tr></table></figure>
<p><code>定义规则:模型名+Model.class.php（模型名的定义采用驼峰法并且首字母大写）</code><br><code>我们在insert操作方法中用了D函数，和M函数不同，D函数需要有对应的模型类，下面我们就来创建模型类</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//FormModel.class.php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Home</span>\<span class="hljs-title class_">Model</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">Think</span>\<span class="hljs-title">Model</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>&#123;<br>    <span class="hljs-comment">// 定义自动验证</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$_validate</span> = <span class="hljs-keyword">array</span>(<br>        <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;title&#x27;</span>,<span class="hljs-string">&#x27;require&#x27;</span>,<span class="hljs-string">&#x27;标题必须&#x27;</span>),<br>    );<br>    <span class="hljs-comment">// 定义自动完成</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$_auto</span> = <span class="hljs-keyword">array</span>(<br>        <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;create_time&#x27;</span>,<span class="hljs-string">&#x27;time&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;function&#x27;</span>),<br>    );<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>M()方法不需要控制器也可以使用,D()方法需要控制器才可以使用&quot;FormModel.class.php&quot;</code>  </p>
<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"><span class="hljs-variable">$id</span> = <span class="hljs-number">0</span></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$data</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-variable">$id</span>);<br>    <span class="hljs-variable">$data</span> ? <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">success</span>(<span class="hljs-variable">$data</span>) : <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">&quot;数据错误&quot;</span>);<br>&#125;<br><span class="hljs-comment">//$title = $Form-&gt;where(&#x27;id=3&#x27;)-&gt;getField(&#x27;title&#x27;); 只获取某个字段的数据</span><br></code></pre></td></tr></table></figure>
<h3 id="获取多条数据"><a href="#获取多条数据" class="headerlink" title="获取多条数据"></a>获取多条数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> box = $(<span class="hljs-string">&quot;.box&quot;</span>);<br><span class="hljs-keyword">let</span> table = box.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;table&#x27;</span>);<br>$.<span class="hljs-title function_">ajax</span>(&#123;<br>    url     : <span class="hljs-string">&#x27;__URL__/readList&#x27;</span>,<br>    data    : &#123;<span class="hljs-string">&#x27;id&#x27;</span>:<span class="hljs-number">1</span>&#125;,<br>    type    : <span class="hljs-string">&#x27;post&#x27;</span>,<br>    success : <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        <span class="hljs-comment">//console.log(data);</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i &lt; data.<span class="hljs-property">info</span>.<span class="hljs-property">length</span>;i++)&#123;<br>            table.<span class="hljs-title function_">append</span>(<span class="hljs-string">`</span><br><span class="hljs-string">                &lt;tr&gt;</span><br><span class="hljs-string">                    &lt;td&gt;<span class="hljs-subst">$&#123;data.info[i].id&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">                    &lt;td&gt;<span class="hljs-subst">$&#123;data.info[i].title&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">                    &lt;td&gt;<span class="hljs-subst">$&#123;data.info[i].content&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">                &lt;/tr&gt;</span><br><span class="hljs-string">            `</span>);<br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$data</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">select</span>();<br>    <span class="hljs-variable">$data</span> ? <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">success</span>(<span class="hljs-variable">$data</span>) : <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">&quot;数据错误&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> obj = &#123;<br>    id      : $(<span class="hljs-string">&#x27;.uid&#x27;</span>).<span class="hljs-title function_">val</span>(),<br>    title   : $(<span class="hljs-string">&#x27;.title&#x27;</span>).<span class="hljs-title function_">val</span>(),<br>    content : $(<span class="hljs-string">&#x27;.content&#x27;</span>).<span class="hljs-title function_">val</span>()<br>&#125;<br>$.<span class="hljs-title function_">ajax</span>(&#123;<br>    url     : <span class="hljs-string">&quot;__URL__/update&quot;</span>,<br>    data    : obj,<br>    type    : <span class="hljs-string">&#x27;post&#x27;</span>,<br>    success : <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj);<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//方法1</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">D</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">create</span>())&#123;<br>        <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">save</span>() ? <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">success</span>(<span class="hljs-string">&quot;操作成功&quot;</span>) : <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">&quot;操作失败&quot;</span>);<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">getError</span>());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//方法2</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">D</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$data</span>[<span class="hljs-string">&quot;id&quot;</span>]      = <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&quot;post.uid&quot;</span>);<br>    <span class="hljs-variable">$data</span>[<span class="hljs-string">&quot;title&quot;</span>]   = <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&quot;post.title&quot;</span>);<br>    <span class="hljs-variable">$data</span>[<span class="hljs-string">&quot;content&quot;</span>] = <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&quot;post.content&quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">create</span>())&#123;<br>        <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">save</span>(<span class="hljs-variable">$data</span>)<br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable">$result</span>)&#123;<br>            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">success</span>(<span class="hljs-string">&quot;修改成功&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">&quot;修改失败&quot;</span>);<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">getError</span>());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="单独修改某个字段的值"><a href="#单独修改某个字段的值" class="headerlink" title="单独修改某个字段的值"></a>单独修改某个字段的值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br><span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;id=4&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">setField</span>(<span class="hljs-string">&#x27;title&#x27;</span>,<span class="hljs-string">&quot;thinkphp&quot;</span>);<br></code></pre></td></tr></table></figure>
<h3 id="统计字段"><a href="#统计字段" class="headerlink" title="统计字段"></a>统计字段</h3><ul>
<li>setInc增加 </li>
<li>setDec减少</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$User</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;User&quot;</span>);<br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;id=3&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">setInc</span>(<span class="hljs-string">&#x27;score&#x27;</span>,<span class="hljs-number">3</span>); <span class="hljs-comment">//积分加3</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id=5&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">setInc</span>(<span class="hljs-string">&#x27;score&#x27;</span>);   <span class="hljs-comment">//积分加1</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id=5&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">setDec</span>(<span class="hljs-string">&#x27;score&#x27;</span>,<span class="hljs-number">3</span>); <span class="hljs-comment">//积分减3</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id=3&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">setDec</span>(<span class="hljs-string">&#x27;score&#x27;</span>);   <span class="hljs-comment">//积分减1</span><br></code></pre></td></tr></table></figure>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">$.<span class="hljs-title function_">ajax</span>(&#123;<br>    url     : <span class="hljs-string">&quot;__URL__/del&quot;</span>,<br>    data    : &#123;<span class="hljs-attr">id</span>:<span class="hljs-number">1</span>&#125;,<br>    type    : <span class="hljs-string">&#x27;post&#x27;</span>,<br>    success : <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br><span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">delete</span>(<span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$User</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;User&quot;</span>);<br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;id=5&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">delete</span>();<span class="hljs-comment">//删除id=5的数据</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">delete</span>(<span class="hljs-string">&quot;1,2,5&quot;</span>);<span class="hljs-comment">//删除主键为1,2,5的数据</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;status=0&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">delete</span>();<span class="hljs-comment">//删除所有状态为0的数据</span><br></code></pre></td></tr></table></figure>
<h3 id="查询方式"><a href="#查询方式" class="headerlink" title="查询方式"></a>查询方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//传统方式</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;content=&quot;abc&quot; and id=&quot;1&quot;&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br>    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">ajaxReturn</span>(<span class="hljs-variable">$result</span>,<span class="hljs-string">&#x27;json&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//常用方式(对象方式)</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$condition</span>[<span class="hljs-string">&#x27;title&#x27;</span>]   = <span class="hljs-string">&#x27;liuyang&#x27;</span>;<br>    <span class="hljs-variable">$condition</span>[<span class="hljs-string">&#x27;content&#x27;</span>] = <span class="hljs-string">&#x27;abc&#x27;</span>;<br>    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-variable">$condition</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br>    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">ajaxReturn</span>(<span class="hljs-variable">$result</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$User</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;User&quot;</span>); <span class="hljs-comment">// 实例化User对象</span><br>    <span class="hljs-comment">// 定义查询条件</span><br>    <span class="hljs-variable">$condition</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">stdClass</span>();<br>    <span class="hljs-variable">$condition</span>-&gt;name = <span class="hljs-string">&#x27;thinkphp&#x27;</span>;<br>    <span class="hljs-variable">$condition</span>-&gt;status= <span class="hljs-number">1</span>;<br>    <span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-variable">$condition</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br>    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">ajaxReturn</span>(<span class="hljs-variable">$result</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="通过-logic-来定义查询逻辑"><a href="#通过-logic-来定义查询逻辑" class="headerlink" title="通过_logic 来定义查询逻辑"></a>通过_logic 来定义查询逻辑</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br><span class="hljs-variable">$condition</span>[<span class="hljs-string">&#x27;name&#x27;</span>]    = <span class="hljs-string">&#x27;gary&#x27;</span>;<br><span class="hljs-variable">$condition</span>[<span class="hljs-string">&#x27;content&#x27;</span>] = <span class="hljs-string">&#x27;good&#x27;</span>;<br><span class="hljs-variable">$condition</span>[<span class="hljs-string">&#x27;_logic&#x27;</span>]  = <span class="hljs-string">&#x27;or&#x27;</span>;<br><span class="hljs-variable">$result</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-variable">$condition</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">ajaxReturn</span>(<span class="hljs-variable">$result</span>,<span class="hljs-string">&#x27;json&#x27;</span>);<br><span class="hljs-comment">//select * from think_form where `name`=&#x27;gary&#x27; or `content`=&#x27;good&#x27;;</span><br></code></pre></td></tr></table></figure>
<h3 id="表达式查询"><a href="#表达式查询" class="headerlink" title="表达式查询"></a>表达式查询</h3><p>$map[‘字段名’] &#x3D; array(‘表达式’,’查询条件’);</p>
<table>
<thead>
<tr>
<th align="left">表达式</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">EQ</td>
<td align="left">等于( &#x3D; )</td>
</tr>
<tr>
<td align="left">NEQ</td>
<td align="left">不等于( &lt;&gt; )</td>
</tr>
<tr>
<td align="left">GT</td>
<td align="left">大于( &gt; )</td>
</tr>
<tr>
<td align="left">EGT</td>
<td align="left">大于等于( &gt;&#x3D; )</td>
</tr>
<tr>
<td align="left">LT</td>
<td align="left">小于(&lt;)</td>
</tr>
<tr>
<td align="left">ELT</td>
<td align="left">小于等于(&lt;&#x3D;)</td>
</tr>
<tr>
<td align="left">LIKE</td>
<td align="left">模糊查询</td>
</tr>
<tr>
<td align="left">[NOT] BETWEEN</td>
<td align="left">(不在)区间查询</td>
</tr>
<tr>
<td align="left">[NOT] IN</td>
<td align="left">(不在)in查询</td>
</tr>
<tr>
<td align="left">EXP</td>
<td align="left">表达式查询,支持SQL语法</td>
</tr>
<tr>
<td align="left">示例:</td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;eq&#x27;</span>,<span class="hljs-number">100</span>);    <span class="hljs-comment">//$map[&#x27;id&#x27;] = 100; // 等于</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;neq&#x27;</span>,<span class="hljs-number">100</span>);    <span class="hljs-comment">// 不等于</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;gt&#x27;</span>,<span class="hljs-number">100</span>);    <span class="hljs-comment">// 大于</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;egt&#x27;</span>,<span class="hljs-number">100</span>);    <span class="hljs-comment">// 大于等于</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;lt&#x27;</span>,<span class="hljs-number">100</span>);    <span class="hljs-comment">//小于</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;elt&#x27;</span>,<span class="hljs-number">100</span>);    <span class="hljs-comment">//小于等于</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;name&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;like&#x27;</span>,<span class="hljs-string">&#x27;thinkphp%&#x27;</span>);<span class="hljs-comment">//模糊查询</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;between&#x27;</span>,<span class="hljs-string">&#x27;1,8&#x27;</span>);    <span class="hljs-comment">//区间内</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;between&#x27;</span>,<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;8&#x27;</span>));<span class="hljs-comment">//区间内</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;not in&#x27;</span>,<span class="hljs-string">&#x27;1,5,8&#x27;</span>);<span class="hljs-comment">//非in查询</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;not in&#x27;</span>,<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;5&#x27;</span>,<span class="hljs-string">&#x27;8&#x27;</span>));<span class="hljs-comment">//非in查询</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;in&#x27;</span>,<span class="hljs-string">&#x27;1,3,8&#x27;</span>);    <span class="hljs-comment">//in查询</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;exp&#x27;</span>,<span class="hljs-string">&#x27; IN (1,3,8) &#x27;</span>);<span class="hljs-comment">//表达式查询</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$data</span>[<span class="hljs-string">&#x27;name&#x27;</span>] = <span class="hljs-string">&#x27;thinkphp&#x27;</span>;<br><span class="hljs-variable">$data</span>[<span class="hljs-string">&#x27;score&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;exp&#x27;</span>,<span class="hljs-string">&#x27;score + 1&#x27;</span>);<span class="hljs-comment">//用户的积分+1</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id=5&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">save</span>(<span class="hljs-variable">$data</span>);<span class="hljs-comment">//根据条件保存修改的数据</span><br></code></pre></td></tr></table></figure>
<p><code>如果配置了DB_LIKE_FIELDS参数的话，某些字段也会自动进行模糊查询</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//config.php</span><br><span class="hljs-string">&#x27;DB_LIKE_FIELDS&#x27;</span>=&gt;<span class="hljs-string">&#x27;title|content&#x27;</span><br><span class="hljs-comment">//FormController.class.php</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;title&#x27;</span>] = <span class="hljs-string">&#x27;thinkphp&#x27;</span>;<br><span class="hljs-comment">//demo</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;a&#x27;</span>] =<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;like&#x27;</span>,<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;%thinkphp%&#x27;</span>,<span class="hljs-string">&#x27;%tp&#x27;</span>),<span class="hljs-string">&#x27;OR&#x27;</span>);<br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;b&#x27;</span>] =<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;notlike&#x27;</span>,<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;%thinkphp%&#x27;</span>,<span class="hljs-string">&#x27;%tp&#x27;</span>),<span class="hljs-string">&#x27;AND&#x27;</span>);<br><span class="hljs-comment">//(a like &#x27;%thinkphp%&#x27; OR a like &#x27;%tp&#x27;) AND (b not like &#x27;%thinkphp%&#x27; AND b not like &#x27;%tp&#x27;)</span><br></code></pre></td></tr></table></figure>
<h3 id="快速查询"><a href="#快速查询" class="headerlink" title="快速查询"></a>快速查询</h3><p><code>采用款素查询方式,可以进一步简化查询条件的写法</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//实现不同字段相同的查询条件</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id|title&#x27;</span>] = <span class="hljs-string">&#x27;liuyang&#x27;</span>;<br>    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-variable">$map</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br>    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">ajaxReturn</span>(<span class="hljs-variable">$result</span>);<br>&#125;<br><span class="hljs-comment">//select * from think_from where id = &quot;liuyang&quot; and title = &quot;liuyang&quot;;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//实现不同字段不同的查询条件</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readList</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$Form</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&quot;Form&quot;</span>);<br>    <span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;status&amp;title&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;thinkphp&#x27;</span>,<span class="hljs-string">&#x27;_multi&#x27;</span>=&gt;<span class="hljs-literal">true</span>);<br>    <span class="hljs-variable">$Form</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-variable">$map</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br>&#125;<br><span class="hljs-comment">//status = 1 and title = &quot;thinkphp&quot;</span><br><span class="hljs-comment">//&quot;_multi&quot;=&gt;true</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;status&amp;score&amp;title&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;gt&#x27;</span>,<span class="hljs-string">&#x27;0&#x27;</span>),<span class="hljs-string">&#x27;thinkphp&#x27;</span>,<span class="hljs-string">&#x27;_multi&#x27;</span>=&gt;<span class="hljs-literal">true</span>);<br><span class="hljs-comment">//status = 1 and score &gt; 0 and title = &#x27;thinkphp&#x27;</span><br></code></pre></td></tr></table></figure>
<h3 id="区间查询"><a href="#区间查询" class="headerlink" title="区间查询"></a>区间查询</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;gt&#x27;</span>,<span class="hljs-number">1</span>),<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;lt&#x27;</span>,<span class="hljs-number">10</span>));<span class="hljs-comment">//(id &gt; 1) and (id &lt; 10)</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;gt&#x27;</span>,<span class="hljs-number">3</span>),<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;lt&#x27;</span>,<span class="hljs-number">10</span>), <span class="hljs-string">&#x27;or&#x27;</span>) ;<span class="hljs-comment">//(`id` &gt; 3) OR (`id` &lt; 10)</span><br><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;neq&#x27;</span>,<span class="hljs-number">6</span>),<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;gt&#x27;</span>,<span class="hljs-number">3</span>),<span class="hljs-string">&#x27;and&#x27;</span>);<span class="hljs-comment">//(`id` != 6) AND (`id` &gt; 3)</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$map</span>[<span class="hljs-string">&#x27;name&#x27;</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;like&#x27;</span>,<span class="hljs-string">&#x27;%a%&#x27;</span>),<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;like&#x27;</span>,<span class="hljs-string">&#x27;%b%&#x27;</span>), <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;like&#x27;</span>,<span class="hljs-string">&#x27;%c%&#x27;</span>),<span class="hljs-string">&#x27;ThinkPHP&#x27;</span>,<span class="hljs-string">&#x27;or&#x27;</span>);<span class="hljs-comment">//(`name` LIKE &#x27;%a%&#x27;) OR (`name` LIKE &#x27;%b%&#x27;) OR (`name` LIKE &#x27;%c%&#x27;) OR (`name` = &#x27;ThinkPHP&#x27;)</span><br></code></pre></td></tr></table></figure>
<h3 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h3><h3 id="复合查询"><a href="#复合查询" class="headerlink" title="复合查询"></a>复合查询</h3><h3 id="统计查询"><a href="#统计查询" class="headerlink" title="统计查询"></a>统计查询</h3><h3 id="sql查询"><a href="#sql查询" class="headerlink" title="sql查询"></a>sql查询</h3><h3 id="动态查询"><a href="#动态查询" class="headerlink" title="动态查询"></a>动态查询</h3><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><h2 id="连贯操作"><a href="#连贯操作" class="headerlink" title="连贯操作"></a>连贯操作</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//除了select其他没有顺序要求</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;status=1&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">order</span>(<span class="hljs-string">&#x27;create_time&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">limit</span>(<span class="hljs-number">10</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br><span class="hljs-comment">//所有的CURD都可以使用连贯查询</span><br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id=1&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">field</span>(<span class="hljs-string">&#x27;id,name,email&#x27;</span>)-<span class="hljs-title function_ invoke__">find</span>();<br><span class="hljs-variable">$User</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;status=1 and id=1&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">delete</span>();<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
<th>支持的参数类型</th>
<th>demo</th>
</tr>
</thead>
<tbody><tr>
<td>where</td>
<td>用于查询或者更新条件的定义</td>
<td>字符串、数组和对象</td>
<td><code>where id = 1</code></td>
</tr>
<tr>
<td>table</td>
<td>用于定义要操作的数据表名称</td>
<td>字符串和数组</td>
<td></td>
</tr>
<tr>
<td>alias</td>
<td>用于给当前数据表定义别名</td>
<td>字符串</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>用于新增或者更新数据之前的数据对象赋值</td>
<td>数组和对象</td>
<td></td>
</tr>
<tr>
<td>field</td>
<td>用于定义要查询的字段（支持字段排除）</td>
<td>字符串和数组</td>
<td><code>$Model-&gt;field(&#39;id,nickname as name&#39;)-&gt;select();</code>  <code>$Model-&gt;field(array(&#39;id&#39;,&#39;nickname&#39;=&gt;&#39;name&#39;))-&gt;select();</code>  <code>$Model-&gt;field(true)-&gt;select();</code></td>
</tr>
<tr>
<td>order</td>
<td>用于对结果排序</td>
<td>字符串和数组</td>
<td><code>order(&#39;id desc&#39;)</code> <code>order(&#39;status desc,id asc&#39;)</code>  <code>order(array(&#39;status&#39;=&gt;&#39;desc&#39;,&#39;id&#39;))</code></td>
</tr>
<tr>
<td>limit</td>
<td>用于限制查询结果数量</td>
<td>字符串和数字</td>
<td><code>limit(1,10)</code>  <code>limit(&#39;10&#39;)</code>  <code>limit(&#39;0,10&#39;)</code></td>
</tr>
<tr>
<td>page</td>
<td>用于查询分页（内部会转换成limit）</td>
<td>字符串和数字</td>
<td><code>Page(&#39;page[,listRows]&#39;)</code>  <code>Page(&#39;2,10&#39;)</code>  <code>limit(25)-&gt;page(3);</code>  <code>$this-&gt;page(5,25)-&gt;select();</code> <code>$this-&gt;page(&#39;5,25&#39;)-&gt;select();</code></td>
</tr>
<tr>
<td>group</td>
<td>用于对查询的group支持</td>
<td>字符串</td>
<td><code>group(&#39;user_id&#39;)</code></td>
</tr>
<tr>
<td>having</td>
<td>用于对查询的having支持</td>
<td>字符串</td>
<td><code>having(&#39;user_id&gt;0&#39;)</code></td>
</tr>
<tr>
<td>join</td>
<td>用于对查询的join支持</td>
<td>字符串和数组</td>
<td></td>
</tr>
<tr>
<td>union</td>
<td>用于对查询的union支持</td>
<td>字符串、数组和对象</td>
<td></td>
</tr>
<tr>
<td>distinct</td>
<td>用于查询的distinct支持</td>
<td>布尔值</td>
<td></td>
</tr>
<tr>
<td>lock</td>
<td>用于数据库的锁机制</td>
<td>布尔值</td>
<td><code>lock(true)</code></td>
</tr>
<tr>
<td>cache</td>
<td>用于查询缓存</td>
<td>支持多个参数（以后在缓存部分再详细描述）</td>
<td></td>
</tr>
<tr>
<td>relation</td>
<td>用于关联查询（需要关联模型扩展支持）</td>
<td>字符串</td>
<td></td>
</tr>
<tr>
<td>validate</td>
<td>用于数据自动验证</td>
<td>数组</td>
<td></td>
</tr>
<tr>
<td>auto</td>
<td>用于数据自动完成</td>
<td>数组</td>
<td></td>
</tr>
<tr>
<td>filter</td>
<td>用于数据过滤</td>
<td>字符串</td>
<td><code>$Model-&gt;data($data)-&gt;filter(&#39;strip_tags&#39;)-&gt;add();</code></td>
</tr>
<tr>
<td>scope</td>
<td>用于命名范围</td>
<td>字符串、数组</td>
<td></td>
</tr>
<tr>
<td>bind*</td>
<td>用于数据绑定操作</td>
<td>数组或多个参数</td>
<td></td>
</tr>
<tr>
<td>token</td>
<td>用于令牌验证</td>
<td>布尔值</td>
<td></td>
</tr>
<tr>
<td>comment</td>
<td>用于SQL注释</td>
<td>字符串</td>
<td></td>
</tr>
<tr>
<td>index</td>
<td>用于数据集的强制索引</td>
<td>字符串</td>
<td></td>
</tr>
<tr>
<td>strict</td>
<td>用于数据入库的严格检测</td>
<td>布尔值</td>
<td></td>
</tr>
<tr>
<td><code>所有的连贯操作都返回当前的模型实例对象，其中带*标识的表示支持多次调用。</code></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//Table</span><br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">Table</span>(<span class="hljs-string">&quot;think_user user&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;status&gt;1&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">Table</span>(<span class="hljs-string">&quot;db_name.think_user user&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&quot;status&gt;1&quot;</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<span class="hljs-comment">//跨库操作</span><br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">Table</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;think_user&#x27;</span>=&gt;<span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-string">&#x27;think_group&#x27;</span>=&gt;<span class="hljs-string">&#x27;group&#x27;</span>))-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;status&gt;1&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<span class="hljs-comment">//使用数组方式定义的优势是可以避免因为表名和关键字冲突而出错的情况。</span><br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//data</span><br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">data</span>(<span class="hljs-variable">$data</span>)-&gt;<span class="hljs-title function_ invoke__">add</span>();<br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">data</span>(<span class="hljs-variable">$data</span>)-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id=3&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">save</span>();<br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-number">3</span>);<br><span class="hljs-variable">$data</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">data</span>();<br></code></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//join</span><br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&#x27; work ON artist.id = work.artist_id&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&#x27;card ON artist.card_id = card.id&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br><span class="hljs-variable">$Model</span>-&gt;<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&#x27;RIGHT JOIN work ON artist.id = work.artist_id&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>();<br><span class="hljs-title function_ invoke__">join</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27; work ON artist.id = work.artist_id&#x27;</span>,<span class="hljs-string">&#x27;card ON artist.card_id = card.id&#x27;</span>))<br><br></code></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="传统方式获取变量"><a href="#传统方式获取变量" class="headerlink" title="传统方式获取变量"></a>传统方式获取变量</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$id</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&quot;id&quot;</span>]; <span class="hljs-comment">//获取get</span><br><span class="hljs-variable">$name</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;name&quot;</span>]; <span class="hljs-comment">//获取post</span><br><span class="hljs-variable">$value</span> = <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&#x27;var&#x27;</span>];<span class="hljs-comment">//获取sesson</span><br><span class="hljs-variable">$name</span> = <span class="hljs-variable">$_COOKIE</span>[<span class="hljs-string">&#x27;name&#x27;</span>];<span class="hljs-comment">//获取cookie</span><br><span class="hljs-variable">$file</span> = <span class="hljs-variable">$SERVER</span>[<span class="hljs-string">&#x27;PHP_SELF&#x27;</span>];<span class="hljs-comment">//获取server</span><br></code></pre></td></tr></table></figure>
<h3 id="tp框架获取数据"><a href="#tp框架获取数据" class="headerlink" title="tp框架获取数据"></a>tp框架获取数据</h3><p><code>I方法获取</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//语法</span><br><span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&#x27;变量类型.变量名/修饰符&#x27;</span>,[<span class="hljs-string">&#x27;默认值&#x27;</span>],[<span class="hljs-string">&#x27;过滤方法&#x27;</span>],[<span class="hljs-string">&#x27;额外数据源&#x27;</span>]);<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>变量类型</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>get</td>
<td>获取get参数</td>
</tr>
<tr>
<td>post</td>
<td>获取POST参数</td>
</tr>
<tr>
<td>param</td>
<td>自动判断请求类型获取GET、POST或者PUT参数</td>
</tr>
<tr>
<td>request</td>
<td>获取REQUEST 参数</td>
</tr>
<tr>
<td>put</td>
<td>获取PUT 参数</td>
</tr>
<tr>
<td>session</td>
<td>获取 $_SESSION 参数</td>
</tr>
<tr>
<td>cookie</td>
<td>获取 $_COOKIE 参数</td>
</tr>
<tr>
<td>server</td>
<td>获取 $_SERVER 参数</td>
</tr>
<tr>
<td>globals</td>
<td>获取 $GLOBALS参数</td>
</tr>
<tr>
<td>path</td>
<td>获取 PATHINFO模式的URL参数</td>
</tr>
<tr>
<td>data</td>
<td>获取 其他类型的参数，需要配合额外数据源参数</td>
</tr>
</tbody></table>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//demo</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&#x27;get.id&#x27;</span>);<span class="hljs-comment">//=&gt; $_GET[&#x27;id&#x27;]</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&#x27;get.name&#x27;</span>);<span class="hljs-comment">//=&gt;$_GET[&#x27;name&#x27;]</span><br><span class="hljs-comment">//默认值</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&#x27;get.id&#x27;</span>,<span class="hljs-number">0</span>);<span class="hljs-comment">//=&gt; $_GET[&#x27;id&#x27;]</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&#x27;get.name&#x27;</span>,<span class="hljs-string">&quot;&quot;</span>);<span class="hljs-comment">//=&gt;$_GET[&#x27;name&#x27;]</span><br><span class="hljs-comment">//获取一组数据</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">I</span>(<span class="hljs-string">&#x27;get.&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h1 id="空操作-404"><a href="#空操作-404" class="headerlink" title="空操作 404"></a>空操作 404</h1><h2 id="Application-Common-Conf-config-php添加如下代码-并把404页面放在项目根目录"><a href="#Application-Common-Conf-config-php添加如下代码-并把404页面放在项目根目录" class="headerlink" title="Application&#x2F;Common&#x2F;Conf&#x2F;config.php添加如下代码 并把404页面放在项目根目录"></a>Application&#x2F;Common&#x2F;Conf&#x2F;config.php添加如下代码 并把404页面放在项目根目录</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-string">&#x27;TMPL_EXCEPTION_FILE&#x27;</span>   =&gt;  <span class="hljs-string">&#x27;./404.html&#x27;</span>,<span class="hljs-comment">// 异常页面的模板文件</span><br><span class="hljs-string">&#x27;ERROR_PAGE&#x27;</span>            =&gt;  <span class="hljs-string">&#x27;./404.html&#x27;</span>, <span class="hljs-comment">// 错误定向页面</span><br></code></pre></td></tr></table></figure>
<h2 id="显示全局变量"><a href="#显示全局变量" class="headerlink" title="显示全局变量"></a>显示全局变量</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$this-&gt;<span class="hljs-title function_">show</span>(<span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">get_defined_constants</span>()));<br></code></pre></td></tr></table></figure>
<h2 id="跨模块调用"><a href="#跨模块调用" class="headerlink" title="跨模块调用"></a>跨模块调用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我很穷!&quot;</span>;<br><br>$a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GoodsController</span>();<br>echo $a-&gt; <span class="hljs-title function_">getNumber</span>();<br>$b = <span class="hljs-title function_">A</span>(<span class="hljs-string">&quot;Admin/Goods&quot;</span>);<br>echo $b-&gt; <span class="hljs-title function_">getNumber</span>();<br><br>echo <span class="hljs-title function_">R</span>(<span class="hljs-string">&quot;Admin/Goods/getNumber&quot;</span>);<br></code></pre></td></tr></table></figure>
<h2 id="跨项目调用"><a href="#跨项目调用" class="headerlink" title="跨项目调用"></a>跨项目调用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$c = <span class="hljs-title function_">A</span>(<span class="hljs-string">&quot;book://Home/Index&quot;</span>);<br></code></pre></td></tr></table></figure>
<h2 id="Model控制器"><a href="#Model控制器" class="headerlink" title="Model控制器"></a>Model控制器</h2><p><code>一个一个数据表对应一个model文件</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">namespace <span class="hljs-title class_">Model</span>;<br>use <span class="hljs-title class_">Think</span>\<span class="hljs-title class_">Model</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodsModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Model</span>&#123;<br>    <span class="hljs-comment">//可以给当前model定义一些个性化的东西</span><br>&#125;<br><br>$goods = <span class="hljs-keyword">new</span> 命名空间<span class="hljs-title class_">GoodsModel</span>();<br>$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&#x27;模型标志&#x27;</span>);<br>$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&#x27;Goods&#x27;</span>);<br>$goods = <span class="hljs-title function_">M</span>(<span class="hljs-string">&#x27;模型标志&#x27;</span>);<br>$goods = <span class="hljs-title function_">M</span>(<span class="hljs-string">&#x27;Goods&#x27;</span>);<br></code></pre></td></tr></table></figure>
<p><code>M函数实例化Model D函数实例化M的继承 用法基本一样</code></p>
<h2 id="smarty"><a href="#smarty" class="headerlink" title="smarty"></a>smarty</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//启用smarty模板</span><br><span class="hljs-string">&#x27;TMPL_ENGINE_TYPE&#x27;</span>=&gt;<span class="hljs-string">&#x27;Smarty&#x27;</span>,<br>&#123;literal&#125;<br>&#123;/literal&#125;<br></code></pre></td></tr></table></figure>
<h2 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h2><ol>
<li>select()</li>
<li>add()</li>
<li>save()</li>
<li>delete()</li>
</ol>
<h3 id="查询操作-select"><a href="#查询操作-select" class="headerlink" title="查询操作 select()"></a>查询操作 select()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$this-&gt;<span class="hljs-title function_">field</span>(字段,字段);        查询指定字段<br>$this-&gt;<span class="hljs-title function_">where</span>(数据表);           通过具体数据表查询<br>$this-&gt;<span class="hljs-title function_">table</span>(参数);             参数就是正常sql语句where后边的条件<br>$this-&gt;<span class="hljs-title function_">group</span>(字段);             分组查询<br>$this-&gt;<span class="hljs-title function_">having</span>(参数条件);         条件查询<br>$this-&gt;<span class="hljs-title function_">order</span>(<span class="hljs-string">&#x27;price desc/asc&#x27;</span>); 排序查询<br>$this-&gt;<span class="hljs-title function_">limit</span>([偏移量],长度);     限制查询条数<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;Goods&quot;</span>);<br>$info = $goods-&gt;<span class="hljs-title function_">where</span>(<span class="hljs-string">&quot;goods_price &gt; 1000 and goods_name like &#x27;索%&#x27;&quot;</span>)-&gt;<span class="hljs-title function_">select</span>();<br>$info = $goods-&gt;<span class="hljs-title function_">field</span>(<span class="hljs-string">&quot;goods_id,goods_name&quot;</span>)-&gt;<span class="hljs-title function_">select</span>();<br>$info = $goods-&gt;<span class="hljs-title function_">limit</span>(<span class="hljs-number">5</span>)-&gt;<span class="hljs-title function_">select</span>();<br>$info = $goods-&gt;<span class="hljs-title function_">limit</span>(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>)-&gt;<span class="hljs-title function_">select</span>();<br>$info = $goods-&gt;<span class="hljs-title function_">group</span>(<span class="hljs-string">&#x27;goods_category_id&#x27;</span>)-&gt;<span class="hljs-title function_">select</span>();<br>$info = $goods-&gt;<span class="hljs-title function_">order</span>(<span class="hljs-string">&#x27;goods_price desc&#x27;</span>)-&gt;<span class="hljs-title function_">select</span>();<br><br>$select_db = <span class="hljs-title function_">D</span>();<br>$info = $select_db-&gt;<span class="hljs-title function_">table</span>(<span class="hljs-string">&quot;sw_user&quot;</span>)-&gt;<span class="hljs-title function_">select</span>();<br>$info = $select_db-&gt;<span class="hljs-title function_">table</span>(<span class="hljs-string">&quot;sw_goods&quot;</span>)-&gt;<span class="hljs-title function_">select</span>();<br><br>$info = $goods-&gt;<span class="hljs-title function_">select</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">//id</span><br>$info = $goods-&gt;<span class="hljs-title function_">select</span>(<span class="hljs-string">&quot;1,2,4,6&quot;</span>); <span class="hljs-comment">//[id]</span><br><span class="hljs-comment">//如果查询的结果只有一个信息,使用select()会返回一个二维数组为了使用方便我们会希望返回一个一维数组,这时候可以使用find()方法</span><br>$info = $goods-&gt;<span class="hljs-title function_">find</span>(<span class="hljs-number">20</span>); <span class="hljs-comment">//id</span><br><br><span class="hljs-comment">// field() where() limit() 在父类Model中</span><br><span class="hljs-comment">//table() group() order() having()在__call()中自动调用</span><br></code></pre></td></tr></table></figure>
<h3 id="having与where的区别"><a href="#having与where的区别" class="headerlink" title="having与where的区别"></a>having与where的区别</h3><ol>
<li><code>where  设置条件,字段必须是数据表中存在的字段</code></li>
<li><code>having 设置条件,字段必须select语句查询出来的字段可以使用</code></li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> price,name,number <span class="hljs-keyword">from</span> goods <span class="hljs-keyword">where</span> price <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;<br><span class="hljs-keyword">select</span> price,name,number <span class="hljs-keyword">from</span> goods <span class="hljs-keyword">having</span> price <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;<br><span class="hljs-comment">--having 错误的写法</span><br><span class="hljs-keyword">select</span> name,number <span class="hljs-keyword">from</span> goods <span class="hljs-keyword">having</span> price <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;<br><span class="hljs-comment">--只能使用having不能使用where</span><br><span class="hljs-keyword">select</span> goods_category_id,<span class="hljs-built_in">avg</span>(goods_price) <span class="hljs-keyword">as</span> <span class="hljs-keyword">from</span> sw_goods <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> goods_category_id <span class="hljs-keyword">having</span> ag <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span>;<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$info = $goods-&gt;<span class="hljs-title function_">having</span>(<span class="hljs-string">&quot;goods_price &gt; 1000&quot;</span>)-&gt;<span class="hljs-title function_">select</span>();<br></code></pre></td></tr></table></figure>
<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p><code>count()总数 sum() avg()平均值 max()最大值 min()最小值</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">echo $goods-&gt;<span class="hljs-title function_">count</span>();<br>echo $goods-&gt;<span class="hljs-title function_">max</span>(<span class="hljs-string">&quot;goods_price&quot;</span>);<br>$goods-&gt;<span class="hljs-title function_">where</span>(<span class="hljs-string">&quot;goods_pirce &gt; 1000&quot;</span>)-&gt;<span class="hljs-title function_">count</span>();<br>$goods-&gt;<span class="hljs-title function_">limit</span>(<span class="hljs-number">5</span>)-&gt;<span class="hljs-title function_">where</span>(<span class="hljs-string">&quot;goods_pirce &gt; 1000&quot;</span>)-&gt;<span class="hljs-title function_">count</span>();<br></code></pre></td></tr></table></figure>
<h2 id="数据添加-add"><a href="#数据添加-add" class="headerlink" title="数据添加 add()"></a>数据添加 add()</h2><h3 id="两种方式"><a href="#两种方式" class="headerlink" title="两种方式"></a>两种方式</h3><p><code>1. 数组方式添加 返回值为主键id</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br>$arr = <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;goods_name&quot;</span>=&gt;<span class="hljs-string">&quot;iphone5&quot;</span>,<span class="hljs-string">&quot;goods_price&quot;</span>=&gt;<span class="hljs-string">&quot;5555&quot;</span>);<br>$res = $goods-&gt;<span class="hljs-title function_">add</span>($arr);<br><span class="hljs-keyword">if</span>($res &gt; <span class="hljs-number">0</span>)&#123;<br>    echo <span class="hljs-string">&quot;添加成功!&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    echo <span class="hljs-string">&quot;添加失败!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>2. AR方式实现添加 ActiveRecord活跃记录</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br>$goods-&gt;goods_name = <span class="hljs-string">&quot;htc_one&quot;</span>;<br>$goods-&gt;goods_price = <span class="hljs-number">3000</span>;<br>$goods-&gt;<span class="hljs-title function_">add</span>();<span class="hljs-comment">//也返回主键id</span><br></code></pre></td></tr></table></figure>
<h2 id="数据修改-save"><a href="#数据修改-save" class="headerlink" title="数据修改 save()"></a>数据修改 save()</h2><p><code>两种方式 与add相同哦</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br>$ar = <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;goods_id&quot;</span>=&gt;<span class="hljs-number">100</span>,<span class="hljs-string">&quot;goods_name&quot;</span>=&gt;<span class="hljs-string">&quot;lenovo&quot;</span>,<span class="hljs-string">&quot;goods_price&quot;</span>=&gt;<span class="hljs-number">1200</span>);<br>$goods-&gt;<span class="hljs-title function_">where</span>(<span class="hljs-string">&quot;goods_id &gt; 50&quot;</span>)-&gt;<span class="hljs-title function_">save</span>($ar);<br><br>$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br>$goods-&gt;goods_id = <span class="hljs-number">50</span>;<br>$goods-&gt;goods_name = <span class="hljs-string">&quot;三星手机&quot;</span>;<br>$goods-&gt;goods_price = <span class="hljs-number">3000</span>;<br>$goods-&gt;<span class="hljs-title function_">where</span>(<span class="hljs-string">&quot;goods_price &gt; 10000&quot;</span>)-&gt;<span class="hljs-title function_">save</span>();<br></code></pre></td></tr></table></figure>
<h2 id="数据删除-delete"><a href="#数据删除-delete" class="headerlink" title="数据删除 delete()"></a>数据删除 delete()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods-&gt;<span class="hljs-title function_">delete</span>(<span class="hljs-number">30</span>);<br>$goods-&gt;<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;1,2,5,6&quot;</span>);<br>$goods-&gt;<span class="hljs-title function_">where</span>(<span class="hljs-string">&quot;goods_id &gt; 50&quot;</span>)-&gt;<span class="hljs-title function_">delete</span>();<br></code></pre></td></tr></table></figure>
<h2 id="执行原生sql语句"><a href="#执行原生sql语句" class="headerlink" title="执行原生sql语句"></a>执行原生sql语句</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-number">1.</span> 查询语句query(),返回一个二维数组信息<br><span class="hljs-number">2.</span> 添加/修改/删除execute()<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods = <span class="hljs-title function_">D</span>(<span class="hljs-string">&#x27;goods&#x27;</span>);<br>$sql = <span class="hljs-string">&quot;select * from sw_goods&quot;</span>;<br>$goods-&gt;<span class="hljs-title function_">query</span>($sql);<br><br>$sql = <span class="hljs-string">&quot;select goods_category_id,avg(goods_price) from sw_goods group by goods_category_id having avg(goods_pirce) &gt; 1000&quot;</span>;<br>$goods-&gt;<span class="hljs-title function_">execute</span>($sql);<br>$sql = <span class="hljs-string">&quot;update sw_goods set goods_name = &#x27;htc_two where goods_id = 100&#x27;&quot;</span>;<br>$goods-&gt;<span class="hljs-title function_">execute</span>($sql);<br></code></pre></td></tr></table></figure>
<h2 id="注册表单-及验证"><a href="#注册表单-及验证" class="headerlink" title="注册表单 及验证"></a>注册表单 及验证</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">$goods-&gt;<span class="hljs-title function_">create</span>(); <span class="hljs-comment">//手机表单提交上来的数据</span><br>$goods-&gt;<span class="hljs-title function_">save</span>();<br></code></pre></td></tr></table></figure>
<h3 id="接收提交的表单"><a href="#接收提交的表单" class="headerlink" title="接收提交的表单"></a>接收提交的表单</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"></span>)&#123;<br>    $user = <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;User&quot;</span>);<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">empty</span>($_POST))&#123;<br>        $user-&gt;<span class="hljs-title function_">create</span>();<br>        $res = $user-&gt;<span class="hljs-title function_">add</span>();<br>        <span class="hljs-keyword">if</span>($res)&#123;<br>            echo <span class="hljs-string">&quot;成功&quot;</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            echo <span class="hljs-string">&quot;失败!&quot;</span>;<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        $this-&gt;<span class="hljs-title function_">display</span>();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="父类自动验证表单"><a href="#父类自动验证表单" class="headerlink" title="父类自动验证表单"></a>父类自动验证表单</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//UserModelController.php</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModelController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Model</span>&#123;<br>    protected $_validate = <span class="hljs-title function_">array</span>(<br>        <span class="hljs-comment">//验证用户名</span><br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&#x27;require&#x27;</span>,<span class="hljs-string">&quot;用户名不能为空&quot;</span>)<br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;require&quot;</span>,<span class="hljs-string">&quot;密码不能为空&quot;</span>);<br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;password2&quot;</span>,<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;两次密码填写的不相同&quot;</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;confirm&quot;</span>);<br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;user_email&quot;</span>,<span class="hljs-string">&quot;email&quot;</span>,<span class="hljs-string">&quot;邮箱个是不正确&quot;</span>,<span class="hljs-number">2</span>);<span class="hljs-comment">//非必填</span><br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;user_qq&quot;</span>,<span class="hljs-string">&quot;/^[1-9]&#123;4,9&#125;$/&quot;</span>,<span class="hljs-string">&quot;qq格式不正确&quot;</span>);<br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;user_xueli&quot;</span>,<span class="hljs-string">&quot;2,3,4,5&quot;</span>,<span class="hljs-string">&quot;必须选择一个学历&quot;</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;in&quot;</span>);<br>        <span class="hljs-title function_">array</span>(<span class="hljs-string">&quot;user_hobby&quot;</span>,<span class="hljs-string">&quot;check_hobby&quot;</span>,<span class="hljs-string">&quot;爱好必须两项以上&quot;</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;callback&quot;</span>);<br>    )<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">check_hobby</span>(<span class="hljs-params">$name</span>)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_">count</span>($name)&gt;<span class="hljs-number">2</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//验证</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"></span>)&#123;<br>    $user = <span class="hljs-keyword">new</span> <span class="hljs-title function_">D</span>(<span class="hljs-string">&quot;User&quot;</span>);<br>    <span class="hljs-keyword">if</span>($_POST)&#123;<br>        $user-&gt;<span class="hljs-title function_">create</span>();<br>        $res = $user-&gt;<span class="hljs-title function_">add</span>();<br>        <span class="hljs-keyword">if</span>($res)&#123;<br>            echo <span class="hljs-string">&quot;成功&quot;</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            echo <span class="hljs-string">&quot;失败!&quot;</span>;<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        $this-&gt;<span class="hljs-title function_">display</span>();<br>    &#125;<br>&#125;<br><span class="hljs-comment">//ps 注意表单提交,直接访问会报非法数据错误!</span><br><br></code></pre></td></tr></table></figure>
<h2 id="namespace-命名空间"><a href="#namespace-命名空间" class="headerlink" title="namespace 命名空间"></a>namespace 命名空间</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">1. 命名空间是虚拟的定义空间,不是真实存在的目录<br>2. 命名空间的分隔符都是反斜杠\<br><br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">namespace beijing;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hello&#x27;</span>;<br>&#125;<br>echo <span class="hljs-title function_">getName</span>();<br>namespace dalian;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;world&#x27;</span>;<br>&#125;<br>echo <span class="hljs-title function_">getName</span>();<span class="hljs-comment">//获取最近命名空间的getName();</span><br><br><span class="hljs-comment">//根据命名空间决定使用哪个getName</span><br><span class="hljs-comment">//绝对定位</span><br>echo \beijing\<span class="hljs-title function_">getName</span>();<br></code></pre></td></tr></table></figure>
<h3 id="子空间和引用"><a href="#子空间和引用" class="headerlink" title="子空间和引用"></a>子空间和引用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">namespace \beijing\chaoyang;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;chaoyang&quot;</span>;<br>&#125;<br>namespace \bebei\handan;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br><br>&#125;<br>echo \beijing\chaoyang\<span class="hljs-title function_">getName</span>();<br></code></pre></td></tr></table></figure>
<h3 id="别名和导入"><a href="#别名和导入" class="headerlink" title="别名和导入"></a>别名和导入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-number">1.</span> 导入 use<br><span class="hljs-number">2.</span> 使用一个元素<br></code></pre></td></tr></table></figure>
<h3 id="命名空间使用注意"><a href="#命名空间使用注意" class="headerlink" title="命名空间使用注意:"></a>命名空间使用注意:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-number">1.</span> 针对类名、函数名、常量<span class="hljs-keyword">const</span>起作用 define定义的常量不受命名空间限制<br><span class="hljs-number">2.</span> 声明namespace的当前脚本的第一个命名空间前面不能有任何代码<br><span class="hljs-number">3.</span> 命名空间是虚拟抽象的空间，不是真实存在的目录<br><span class="hljs-number">4.</span> 当前文件可以include具有命名空间的文件，默认空间是当前文件的公共空间<br><span class="hljs-number">5.</span> 元素调用分：非限定名称、限定名称、完全限定名称<br>---------------------------------------------<br>- 简单使用：同一个页面定义了许多单级命令空间<br>- 子空间：通过\斜杠定义多级命名空间<br>- 公共空间:为了程序比较严谨,公共空间的元素都是用\斜杠访问<br>- 空间引入和别名:use <span class="hljs-keyword">as</span><br></code></pre></td></tr></table></figure>

        </div>
    </article>
    <div class="w300 m-l-15 fixed-item-right">
        <div class="hot-list">
    <div class="f14 hot-list-title">推荐阅读</div>
    <ul>
        
            <li>
                <a href="/2023/06/16/echarts-%E4%B8%AD%E5%9B%BD%E5%9C%B0%E5%9B%BE%E6%95%B0%E6%8D%AE.html">echarts中国地图数据</a>
                <p>2023-06-16</p>
            </li>
        
            <li>
                <a href="/2023/02/13/js-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%B5%8B.html">浏览器类型检测</a>
                <p>2023-02-13</p>
            </li>
        
            <li>
                <a href="/2023/05/24/js%E5%88%A4%E6%96%ADios%E7%85%A7%E7%89%87%E6%96%B9%E5%90%91.html">js判断ios照片方向</a>
                <p>2023-05-24</p>
            </li>
        
            <li>
                <a href="/2024/06/21/%E4%BD%BF%E7%94%A8Nuxt.js%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99.html">使用Nuxt.js生成静态网站</a>
                <p>2024-06-21</p>
            </li>
        
            <li>
                <a href="/2024/08/09/smarty%E6%A8%A1%E6%9D%BF%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9Fphp%E6%96%B9%E6%B3%95.html">smarty模板中使用原生php方法</a>
                <p>2024-08-09</p>
            </li>
        
    </ul>
    <!-- <ul>
        
            <li>
                <a href="/2023/06/16/echarts-%E4%B8%AD%E5%9B%BD%E5%9C%B0%E5%9B%BE%E6%95%B0%E6%8D%AE.html">echarts中国地图数据</a>
                <p>2023-06-16</p>
            </li>
        
            <li>
                <a href="/2023/02/13/js-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%B5%8B.html">浏览器类型检测</a>
                <p>2023-02-13</p>
            </li>
        
            <li>
                <a href="/2023/05/24/js%E5%88%A4%E6%96%ADios%E7%85%A7%E7%89%87%E6%96%B9%E5%90%91.html">js判断ios照片方向</a>
                <p>2023-05-24</p>
            </li>
        
            <li>
                <a href="/2024/06/21/%E4%BD%BF%E7%94%A8Nuxt.js%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99.html">使用Nuxt.js生成静态网站</a>
                <p>2024-06-21</p>
            </li>
        
            <li>
                <a href="/2024/08/09/smarty%E6%A8%A1%E6%9D%BF%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9Fphp%E6%96%B9%E6%B3%95.html">smarty模板中使用原生php方法</a>
                <p>2024-08-09</p>
            </li>
        
    </ul> -->
</div>
        <div class="m-t-15"></div>
        <div class="tag-list">
    <div class="f14 tag-list-title">标签列表</div>
    <div class="flex flex-wrap flex-jus-start flex-item-start tag-list-content">
        
            <a href="/tag/ai/">AI(7)</a>
        
            <a href="/tag/%E7%8E%84%E5%AD%A6/">玄学(2)</a>
        
            <a href="/tag/chatgpt/">chatgpt(2)</a>
        
            <a href="/tag/js/">js(184)</a>
        
            <a href="/tag/ffmpeg/">ffmpeg(11)</a>
        
            <a href="/tag/hexo/">Hexo(5)</a>
        
            <a href="/tag/canvas/">canvas(5)</a>
        
            <a href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库(12)</a>
        
            <a href="/tag/paddledetection/">PaddleDetection(4)</a>
        
            <a href="/tag/stablediffusion/">StableDiffusion(6)</a>
        
            <a href="/tag/linux/">linux(24)</a>
        
            <a href="/tag/ajax/">ajax(1)</a>
        
            <a href="/tag/astro/">astro(3)</a>
        
            <a href="/tag/axios/">axios(2)</a>
        
            <a href="/tag/bat/">bat(9)</a>
        
            <a href="/tag/%E6%BF%80%E6%B4%BB%E7%A0%81/">激活码(2)</a>
        
            <a href="/tag/node/">node(59)</a>
        
            <a href="/tag/css/">css(19)</a>
        
            <a href="/tag/dns/">dns(7)</a>
        
            <a href="/tag/go/">go(59)</a>
        
            <a href="/tag/docker/">docker(1)</a>
        
            <a href="/tag/echarts/">echarts(2)</a>
        
            <a href="/tag/charts/">charts(1)</a>
        
            <a href="/tag/electron/">electron(1)</a>
        
            <a href="/tag/git/">git(2)</a>
        
            <a href="/tag/vps/">vps(9)</a>
        
            <a href="/tag/html/">html(6)</a>
        
            <a href="/tag/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端(11)</a>
        
            <a href="/tag/vue/">vue(40)</a>
        
            <a href="/tag/jquery/">jquery(7)</a>
        
            <a href="/tag/video/">video(2)</a>
        
            <a href="/tag/typescript/">typescript(4)</a>
        
            <a href="/tag/websocket/">websocket(5)</a>
        
            <a href="/tag/%E5%BE%AE%E4%BF%A1/">微信(5)</a>
        
            <a href="/tag/php/">php(14)</a>
        
            <a href="/tag/ios/">ios(2)</a>
        
            <a href="/tag/koa2/">koa2(14)</a>
        
            <a href="/tag/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/">测试环境(1)</a>
        
            <a href="/tag/%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/">视频处理(4)</a>
        
            <a href="/tag/%E7%BC%96%E8%BE%91%E5%99%A8/">编辑器(1)</a>
        
            <a href="/tag/markdown/">markdown(1)</a>
        
            <a href="/tag/sql/">sql(1)</a>
        
            <a href="/tag/nginx/">nginx(2)</a>
        
            <a href="/tag/vue3/">vue3(1)</a>
        
            <a href="/tag/express/">express(2)</a>
        
            <a href="/tag/mysql/">mysql(2)</a>
        
            <a href="/tag/npm/">npm(2)</a>
        
            <a href="/tag/ocr/">ocr(1)</a>
        
            <a href="/tag/%E5%9B%BD%E5%AD%A6/">国学(9)</a>
        
            <a href="/tag/%E7%88%AC%E8%99%AB/">爬虫(20)</a>
        
            <a href="/tag/cmd/">cmd(1)</a>
        
            <a href="/tag/nuxt/">nuxt(3)</a>
        
            <a href="/tag/ai/">ai(1)</a>
        
            <a href="/tag/ps/">PS(2)</a>
        
            <a href="/tag/pm2/">pm2(1)</a>
        
            <a href="/tag/python/">python(17)</a>
        
            <a href="/tag/react/">react(4)</a>
        
            <a href="/tag/svg/">svg(2)</a>
        
            <a href="/tag/threejs/">threejs(2)</a>
        
            <a href="/tag/tvbox/">tvbox(1)</a>
        
            <a href="/tag/unity/">unity(1)</a>
        
            <a href="/tag/demo/">Demo(1)</a>
        
            <a href="/tag/%E5%AE%B9%E5%99%A8/">容器(2)</a>
        
            <a href="/tag/vscode/">vscode(1)</a>
        
            <a href="/tag/pinia/">pinia(1)</a>
        
            <a href="/tag/vue-router/">vue-router(1)</a>
        
            <a href="/tag/vuex/">vuex(1)</a>
        
            <a href="/tag/webpack/">webpack(2)</a>
        
            <a href="/tag/%E4%B8%AD%E5%8C%BB/">中医(15)</a>
        
            <a href="/tag/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/">企业微信(1)</a>
        
            <a href="/tag/%E5%85%B6%E4%BB%96/">其他(7)</a>
        
            <a href="/tag/emoji/">emoji(4)</a>
        
            <a href="/tag/%E7%BE%8E%E9%A3%9F/">美食(6)</a>
        
            <a href="/tag/%E5%89%8D%E7%AB%AF/">前端(2)</a>
        
            <a href="/tag/%E7%BD%91%E8%B5%9A/">网赚(6)</a>
        
            <a href="/tag/%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/">加密解密(2)</a>
        
            <a href="/tag/%E5%85%B5%E6%B3%95/">兵法(3)</a>
        
            <a href="/tag/%E6%B1%89%E5%AD%97/">汉字(3)</a>
        
            <a href="/tag/%E6%91%A9%E6%89%98%E8%BD%A6/">摩托车(1)</a>
        
            <a href="/tag/%E5%B0%8F%E7%9A%AE/">小皮(1)</a>
        
            <a href="/tag/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序(1)</a>
        
            <a href="/tag/date/">Date(1)</a>
        
            <a href="/tag/cookie/">cookie(1)</a>
        
            <a href="/tag/localstorage/">localStorage(1)</a>
        
            <a href="/tag/indexdb/">indexDB(1)</a>
        
            <a href="/tag/json/">json(1)</a>
        
            <a href="/tag/%E6%A8%A1%E6%9D%BF/">模板(1)</a>
        
            <a href="/tag/%E8%AF%BB%E4%B9%A6%E4%BC%9A/">读书会(1)</a>
        
            <a href="/tag/%E5%87%8F%E8%82%A5/">减肥(1)</a>
        
            <a href="/tag/%E5%B0%8F%E5%90%83/">小吃(1)</a>
        
    </div>
</div>


    </div>
</div>
<script>
    function addCopyButtons() {
        // 获取所有代码块
        const codeBlocks = document.querySelectorAll('pre code');
        
        codeBlocks.forEach((codeBlock) => {
            // 创建复制按钮
            const copyButton = document.createElement('i');
            copyButton.className = 'copy-button fa fa-copy';
            
            // 查找最近的 .highlight 父元素
            const highlightBlock = codeBlock.closest('.highlight');
            if (highlightBlock) {
                highlightBlock.insertBefore(copyButton, highlightBlock.firstChild);
            }
            
            // 添加点击事件
            copyButton.addEventListener('click', () => {
                // 获取格式化的代码内容
                const code = codeBlock.innerText || codeBlock.textContent;
                
                // 使用 textarea 来保持文本格式
                const textarea = document.createElement('textarea');
                textarea.value = code;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    // 尝试使用新的 API
                    navigator.clipboard.writeText(code).then(() => {
                        copyButton.className = 'copy-button fa fa-check';
                        setTimeout(() => {
                            copyButton.className = 'copy-button fa fa-copy';
                        }, 2000);
                    });
                } catch (err) {
                    // 降级方案：使用 document.execCommand
                    document.execCommand('copy');
                    copyButton.className = 'copy-button fa fa-check';
                    setTimeout(() => {
                        copyButton.className = 'copy-button fa fa-copy';
                    }, 2000);
                }
                
                // 清理临时元素
                document.body.removeChild(textarea);
            });
        });
    }
    // 页面加载完成后添加复制按钮
document.addEventListener('DOMContentLoaded', addCopyButtons);

</script>
    </div>
    <footer>
    <div>
        copyright © 2024 Gary Wang 
    </div>
</footer>
    <div class="search-page animated">
    <div class="search-page-content">
        <i class="fa fa-times search-close"></i>
        <h1>内容搜索</h1>
        <form onsubmit="formSubmit(event)" class="search-page-form re">
            <input type="text" placeholder="查找" name="keyword" id="search-input" autocomplete="off">
            <button>
                <i class="fa fa-search"></i>
            </button>
        </form>
        <div class="search-page-result" id="search-result">
        </div>
    </div>
    <div class="search-page-bg"></div>
</div>
<script>
    //所有搜索数据
    let searchData = [];
    
    // 加载搜索数据
    fetch('/search.xml')
        .then(response => response.text())
        .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
        .then(data => {
            searchData = Array.from(data.getElementsByTagName('entry')).map(entry => ({
                title: entry.getElementsByTagName('title')[0].textContent,
                content: entry.getElementsByTagName('content')[0].textContent,
                url: entry.getElementsByTagName('url')[0].textContent
            }));
        });

    // 搜索功能实现
    function formSubmit(event) {
        event.preventDefault();
        // 搜索关键词
        const keyword = document.getElementById('search-input').value.toLowerCase();
        // 搜索结果
        const results = searchData.filter(item => 
            item.title.toLowerCase().includes(keyword) || item.content.toLowerCase().includes(keyword)
        );
        const resultDiv = document.getElementById('search-result');
        if(results.length === 0 || keyword === ''){
            resultDiv.innerHTML = '<div class="search-page-result-item t-c f13">没有找到相关内容</div>';
        }else{
            resultDiv.innerHTML = results.map(item => `
                <div class="search-page-result-item">
                    <a href="${item.url}">
                        <h5>${item.title}</h5>
                    </a>
                </div>
            `).join('');
        }
    }
    document.querySelector('.search-close').addEventListener('click',function(){
        hideSearchPage()
    })
</script>
    <!-- <div class="gotopage" id="gotopage">
        <i class="far fa-arrow-alt-circle-up"></i>
    </div> -->
    <script src="/assets/js/common.js"></script>
    <script src="/assets/js/func.js"></script>
    <script src="/assets/live2dw/lib/L2Dwidget.js"></script>
    <script>
        // 加载动画
        window.addEventListener('DOMContentLoaded',function(){
            setTimeout(function() {
                document.querySelector('.loading').style.display = 'none';
            },800)
        },false)
        // // 返回顶部
        // document.getElementById('gotopage').addEventListener('click',function() {
        //     document.querySelector('.main').scrollTo({
        //         top: 0,
        //         behavior: 'smooth'
        //     });
        // },false)
        // document.querySelector('.main').addEventListener('scroll',function() {
        //     if(document.querySelector('.main').scrollTop > 300) {
        //         document.getElementById('gotopage').classList.add('show')
        //     }else{
        //         document.getElementById('gotopage').classList.remove('show')
        //     }
        // })
        
        /* 看板娘 */
        L2Dwidget.init({
            "pluginRootPath"  : "/assets/live2dw/",
            "pluginJsPath"	  : "/assets/live2dw/lib/",
            "pluginModelPath" : "/assets/live2dw/assets/",
            "tagMode"		  : false,
            "debug"			  : false,
            "model"			  : {
                "jsonPath" : "/assets/live2dw/assets/kesshouban.model.json"
            },
            "display" : {
                "position" : "right",
                "width"	   : 250,
                "height"   : 250,
                "hOffset"  : -70,
                "vOffset"  : 50
            },
            "dialog"	: {
                "enable" : true
            },
            "mobile"	: {
                "show" : true
            },
            "react"		: {
                "opacity" : 1
            },
            "log" : false
        });
        const addEvent = function(){
            const live2dWidget = document.getElementById('live2d-widget')
            setTimeout(function(){
                if(live2dWidget){
                    live2dWidget.addEventListener('click',function(e){
                        document.querySelector('.main').scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    })
                }else{
                    addEvent()
                }
            },1000)
        }
        addEvent()
    </script>
    <!-- Cloudflare Web Analytics -->
    <!-- <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "5bd3afcce7474fcdbf639fab1999e804"}'></script> -->
    <!-- End Cloudflare Web Analytics -->
    <!-- <script src='//unpkg.com/@waline/client/dist/waline.js'></script>
    <link href='//unpkg.com/@waline/client/dist/waline.css' rel='stylesheet'/> -->
</body>
</html>