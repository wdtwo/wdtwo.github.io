<!DOCTYPE html>
<html lang="zh-cn">
<head>
    	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
    <title>WDTWO Blog</title>
	<link href="/assets/css/style.css" rel="stylesheet" type="text/css">
	<link href="/assets/css/animate.css" rel="stylesheet" type="text/css">
	<link href="/assets/fontawesome-free-5.15.4-web/css/all.min.css" rel="stylesheet" type="text/css">
    
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="light">

    <div class="loading flex">
        <div></div>
    </div>

    <!-- 调试信息 -->
    <!-- 
        <div style="background: #f0f0f0; padding: 10px; margin: 10px;">
            页面类型: post<br>
            页面路径: 2023/06/21/黑马程序员php.html<br>
            是否为文章页: true<br>
            是否为首页: false
        </div>
     -->
    <header class="flex flex-jus-between">
    <h1 class="header-title">
        <a href="/" class="header-title">
            WDTWO Blog
        </a>
    </h1>
    <div class="flex">
        <div class="menu-list animated">
            
                <a class="menu-item" href="/archives">目录</a>
            
                <a class="menu-item" href="/category">分类</a>
            
                <a class="menu-item" href="/tag">标签</a>
            
                <a class="menu-item" href="/static/mark/index.html">书签</a>
            
            <i class="fa fa-times mobile-close-menu"></i>
        </div>
        <i class="fa fa-search"></i>
        <i class="fa fa-bars mobile-menu"></i>
        <i class="fa fa-sun"></i>
        <i class="fa fa-moon"></i>
    </div>
</header>

<script>
    window.addEventListener('DOMContentLoaded',function(){
        // 搜索按钮点击事件
        document.querySelector('.fa-search').addEventListener('click',function(){
            showSearchPage()
        })
        document.querySelector('.search-page-bg').addEventListener('click',function(){
            hideSearchPage()
        })  
        // 显示菜单
        document.querySelector('.mobile-menu').addEventListener('click',function(){
            showMobileMenu()
        })
        document.querySelector('.mobile-close-menu').addEventListener('click',function(){
            hideMobileMenu()
        })
    })
</script>
    <div class="main">
        <!-- 添加 highlight.js 的样式 -->
<link rel="stylesheet" href="/assets/css/atom-one-dark-reasonable.css">
<link rel="stylesheet" href="/assets/css/markdown.css">
<div class="post-box flex flex-item-start">
    <article class="post">
        <i class="fa fa-bars extend" id="extend"></i>
        <h1 class="post-title t-c">黑马程序员php</h1>
        <div class="post-meta t-c flex">
            <!-- 作者 -->
            <div>
                <i class="fa fa-user c-purple"></i>
                Gary Wang
             </div>
            <div>
                <i class="fa fa-calendar c-orange"></i>
                2023-06-21
            </div>
            
                <div>
                    <i class="fa fa-folder c-yellow"></i>
                    <a class="archive-item-category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a>
                </div>
            
            
                <div>
                    <i class="fa fa-tags c-green"></i>
                    <a class="archive-item-tag-none-link" href="/tag/php/" rel="tag">php</a>
                </div>
            
        </div>
        <hr class="line">
        <div class="post-content">
            <h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><h4 id="输出方法"><a href="#输出方法" class="headerlink" title="输出方法"></a>输出方法</h4><ul>
<li>echo</li>
<li>print</li>
<li>print_r</li>
<li>var_dump();</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">echo <span class="hljs-title function_">print</span>(<span class="hljs-string">&quot;hello world!&quot;</span>);  <span class="hljs-comment">//hello world 1(返回值)</span><br>print <span class="hljs-string">&quot;hello world!&quot;</span>;        <span class="hljs-comment">//hello world</span><br>$a = <span class="hljs-number">1</span>;<br><span class="hljs-title function_">print_r</span>($a);                 <span class="hljs-comment">//1</span><br></code></pre></td></tr></table></figure>

<h4 id="时间输出"><a href="#时间输出" class="headerlink" title="时间输出"></a>时间输出</h4><ul>
<li>date();&#x2F;&#x2F;格林威治时间</li>
<li>time();&#x2F;&#x2F;当前时间   </li>
<li>microtime();&#x2F;&#x2F;微秒</li>
<li>strtotime();&#x2F;&#x2F;字符串转换成时间戳</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">echo <span class="hljs-title function_">date</span>(<span class="hljs-string">&#x27;Y 年 m 月 d 日 H:i:s&#x27;</span>,<span class="hljs-number">12345678</span>);    <span class="hljs-comment">//1970 年 05月 24 日 05:21:18</span><br>echo <span class="hljs-title function_">time</span>();                                  <span class="hljs-comment">//时间戳</span><br>echo <span class="hljs-title function_">microtime</span>();                             <span class="hljs-comment">//微秒,时间戳</span><br>echo <span class="hljs-title function_">strtotime</span>(<span class="hljs-string">&#x27;tomorrow 10 hours&#x27;</span>);          <span class="hljs-comment">//时间戳</span><br></code></pre></td></tr></table></figure>

<h4 id="数学方法"><a href="#数学方法" class="headerlink" title="数学方法"></a>数学方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">max</span>();<span class="hljs-comment">//最大值</span><br><span class="hljs-title function_">min</span>();<span class="hljs-comment">//最小值</span><br><span class="hljs-title function_">rand</span>();<span class="hljs-comment">//区间取随机数</span><br><span class="hljs-title function_">mt_rand</span>();<span class="hljs-comment">//效率高的取随机数</span><br><span class="hljs-title function_">round</span>();<span class="hljs-comment">//四舍五入</span><br><span class="hljs-title function_">ceil</span>();<span class="hljs-comment">//向上取整</span><br><span class="hljs-title function_">floor</span>();<span class="hljs-comment">//向下取整</span><br><span class="hljs-title function_">abs</span>();<span class="hljs-comment">//绝对值</span><br><span class="hljs-title function_">pow</span>();<span class="hljs-comment">//指数</span><br><span class="hljs-title function_">sqrt</span>();<span class="hljs-comment">//平方根</span><br></code></pre></td></tr></table></figure>

<h4 id="有关函数的方法"><a href="#有关函数的方法" class="headerlink" title="有关函数的方法"></a>有关函数的方法</h4><ol>
<li>函数是否存在 function_exists();</li>
<li>获取指定的参数 func_get_arg();</li>
<li>获取全部的参数 func_get_args();</li>
<li>获取参数的长度 func_num_args();</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params">$a,$b</span>)&#123;<br>    <span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">func_get_arg</span>());<br>    <span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">func_get_args</span>());<br>    <span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">func_num_args</span>());<br>&#125;<br><span class="hljs-title function_">function_exists</span>() &amp;&amp; <span class="hljs-title function_">demo</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure>

<h2 id="include-require"><a href="#include-require" class="headerlink" title="include&amp;require"></a>include&amp;require</h2><ul>
<li>include      &#x2F;&#x2F;引用多次执行多次  warning</li>
<li>include_once &#x2F;&#x2F;引用多次执行一次</li>
<li>require      &#x2F;&#x2F;报错形式不同      fatal error<br><code>include嵌套关系会基于调用页面为基准页 进行相对位置获取</code></li>
</ul>
<h2 id="静态变量"><a href="#静态变量" class="headerlink" title="静态变量"></a>静态变量</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">static</span> $a = <span class="hljs-number">1</span>;<br>  echo $a++;<br>&#125;<br><span class="hljs-title function_">demo</span>();   <span class="hljs-comment">//1</span><br><span class="hljs-title function_">demo</span>();   <span class="hljs-comment">//2</span><br></code></pre></td></tr></table></figure>
<p><code>静态变量会随着调用次数的增加而增加</code></p>
<ul>
<li>用于计数</li>
<li>用于递归调用</li>
</ul>
<h2 id="可变函数"><a href="#可变函数" class="headerlink" title="可变函数"></a>可变函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">$arg1,$arg2</span>)&#123;<br>  $arg2 += <span class="hljs-number">10</span>;<br>  <span class="hljs-keyword">return</span> $arg1($arg2);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">user_num</span>(<span class="hljs-params">$arg1</span>)&#123;<br>  echo $arg1 * $arg1 * $arg1 * $arg1;<br>&#125;<br><span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;user_name&quot;</span>,<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure>
<h2 id="匿名函数和闭包"><a href="#匿名函数和闭包" class="headerlink" title="匿名函数和闭包"></a>匿名函数和闭包</h2><h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">$func = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>  echo <span class="hljs-number">123</span>;<br>&#125;;<br>$func();<br><span class="hljs-title function_">var_dump</span>($func);   <span class="hljs-comment">//=&gt; 闭包closure</span><br></code></pre></td></tr></table></figure>
<p><code>函数执行后没有被释放 因为引用还存在</code></p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">display</span>(<span class="hljs-params"></span>)&#123;<br>  $a = __FUNCTION__;<br>  $inFunc = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) <span class="hljs-title function_">use</span>(<span class="hljs-params">$a</span>)&#123;<br>    <span class="hljs-keyword">return</span> $a;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> $inFunc;<br><br>&#125;<br>$closure = <span class="hljs-title function_">display</span>();<br>echo $closure();<br></code></pre></td></tr></table></figure>
<p><code>函数执行完成后匿名函数没有被释放（视频中的解释并不能说明未释放！）</code><br><code>理解了 是可以说明的 手写一次就明白了！</code></p>
<h2 id="伪类型"><a href="#伪类型" class="headerlink" title="伪类型"></a>伪类型</h2><p><code>基本数据类型：</code></p>
<ol>
<li>整型 int&#x2F;integer 整数 4字节</li>
<li>浮点型 float 小数 8字节</li>
<li>字符串 string 字符串 自动大小</li>
<li>boolean 布尔型</li>
</ol>
<p><code>复合数据类型：</code></p>
<ol>
<li>对象 object 存储对象</li>
<li>数组型 array 存放多个数组元素</li>
</ol>
<p><code>特殊数据类型：</code></p>
<ol>
<li>资源型 resource 存放资源数据（php外部数据，如数据库，文件等）</li>
<li>NULL 不能参与运算等操作 可以重新赋值</li>
</ol>
<p><code>伪类型主要有两种：</code></p>
<ol>
<li>Mixed 混合的 多种数据类型</li>
<li>Number 整形和浮点型 的替代</li>
</ol>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><ol>
<li>E_PARSE 编译错误</li>
<li>E_ERROR fatal error 致命错误</li>
<li>E_WARNING warning 警告错误 不会影响代码 但会出现未知问题</li>
<li>E_NOTICE notice 通知错误 不会影响代码</li>
</ol>
<p><code>用户错误：</code></p>
<ol>
<li>E_USER_ERROR</li>
<li>E_USER_WARNING</li>
<li>E_USER_NOTICE</li>
</ol>
<ul>
<li>E_ALL</li>
</ul>
<p><code>错误调用：</code></p>
<ul>
<li>trigger_error();&#x2F;&#x2F;手动报错</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Content-type:text/html;charset=utf8&quot;</span>);<br>$a = <span class="hljs-number">0</span>;<br>$b = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">if</span>($a == <span class="hljs-number">0</span>)&#123;<br>  <span class="hljs-title function_">trigger_error</span>(<span class="hljs-string">&quot;被除数不能为0！&quot;</span>); <span class="hljs-comment">//可以继续执行</span><br>  <span class="hljs-title function_">trigger_error</span>(<span class="hljs-string">&quot;被除数不能为0！&quot;</span>,<span class="hljs-variable constant_">E_USER_ERROR</span>);<span class="hljs-comment">//不能继续执行</span><br>&#125;<br>echo <span class="hljs-string">&quot;hello world!&quot;</span>;<br></code></pre></td></tr></table></figure>

<h2 id="开启日志log"><a href="#开启日志log" class="headerlink" title="开启日志log"></a>开启日志log</h2><p><code>配置文件php.ini</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1. 开启功能</span><br>log_error = <span class="hljs-title class_">On</span><br><span class="hljs-comment">//2. 指定路径</span><br>error_log = <span class="hljs-string">&quot;E:/log/php_errors.log&quot;</span><br></code></pre></td></tr></table></figure>

<h2 id="用户自定义错误处理函数"><a href="#用户自定义错误处理函数" class="headerlink" title="用户自定义错误处理函数"></a>用户自定义错误处理函数</h2><p><code>set_error_handler();</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">my_error</span>(<span class="hljs-params">$errno,$errstr,$errfile,$errline,$errcontext</span>)&#123;<br>  <span class="hljs-comment">//errno errstr 必选</span><br>  <span class="hljs-keyword">if</span>(!(<span class="hljs-title function_">error_reporting</span>() &amp; $errno))&#123;<br>    <span class="hljs-comment">//不能处理的错误 在系统错误中 但是不在传入的错误中</span><br>    echo <span class="hljs-string">&quot;无法处理的错误！&quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br>  <span class="hljs-keyword">switch</span>($errno)&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">E_ERROR</span>:<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">E_USER_ERROR</span>:<br>      echo <span class="hljs-string">&quot;fatal error in file:&quot;</span> . $errfile . <span class="hljs-string">&quot; on line &quot;</span> . $errline . <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>      echo <span class="hljs-string">&quot;error infor:&quot;</span> . $errstr;<br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">E_WARNING</span>:<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">E_USER_WARNING</span>:<br>      echo <span class="hljs-string">&quot;warning error in file:&quot;</span> . $errfile . <span class="hljs-string">&quot; on line &quot;</span> . $errline . <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>      echo <span class="hljs-string">&quot;error infor:&quot;</span> . $errstr;<br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">E_NOTICE</span>:<br>    <span class="hljs-keyword">case</span> <span class="hljs-attr">E_USER_NOTICE</span>:<br>      echo <span class="hljs-string">&quot;notice error in file:&quot;</span> . $errfile . <span class="hljs-string">&quot; on line &quot;</span> . $errline . <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>      echo <span class="hljs-string">&quot;error infor:&quot;</span> . $errstr;<br>      <span class="hljs-keyword">break</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="字符串定义"><a href="#字符串定义" class="headerlink" title="字符串定义"></a>字符串定义</h2><h3 id="定义方式"><a href="#定义方式" class="headerlink" title="定义方式"></a>定义方式</h3><ol>
<li>单引号</li>
<li>双引号</li>
<li>nowdoc 没有单引号的单引号字符串</li>
<li>heredoc 没有双引号的双引号字符串</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$str1 = &lt;&lt;&lt;<span class="hljs-string">&#x27;EOD&#x27;</span><br>    hello<br>      world<br><span class="hljs-variable constant_">EOD</span>;<br>$str2 = &lt;&lt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">EOD</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">hello</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">world</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">EOD</span>;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li><code>上边界后不能接任何字符，包括空格</code></li>
<li><code>下边界前不能有任何字符，后面只能接;</code></li>
<li><code>中间全部都是字符串内容，包括注释</code></li>
</ul>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><p><code>转义符：</code></p>
<ol>
<li>&#39;</li>
<li>&quot;</li>
<li>\r 回车</li>
<li>\n 新行</li>
<li>\t tab</li>
<li>$ 变量符号</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">$a = <span class="hljs-string">&#x27;hello&#x27;</span>;<br>$str1 = <span class="hljs-string">&#x27;abcd $a efg&#x27;</span>;<span class="hljs-comment">//不能解析</span><br>$str2 = <span class="hljs-string">&quot;abcd $a efg&quot;</span>;<span class="hljs-comment">//可以解析</span><br>$str3 = <span class="hljs-string">&quot;abcd$aefg&quot;</span>;<span class="hljs-comment">//不能解析</span><br>$str4 = <span class="hljs-string">&quot;abcd&#123;$a&#125;efg&quot;</span>;<span class="hljs-comment">//可以解析</span><br></code></pre></td></tr></table></figure>
<h3 id="字符串长度"><a href="#字符串长度" class="headerlink" title="字符串长度"></a>字符串长度</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">$str1 = <span class="hljs-string">&quot;sagdfergeh&quot;</span>;<br>$str2 = <span class="hljs-string">&quot;中国你好dfg&quot;</span>;<br>echo <span class="hljs-title function_">strlen</span>($str1),<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span>,<span class="hljs-title function_">strlen</span>($str2);<br>echo <span class="hljs-title function_">mb_strlen</span>($str2,<span class="hljs-string">&quot;utf-8&quot;</span>);<span class="hljs-comment">//开启mb拓展并指定字符集（php.ini）</span><br></code></pre></td></tr></table></figure>
<h3 id="字符串相关函数"><a href="#字符串相关函数" class="headerlink" title="字符串相关函数"></a>字符串相关函数</h3><p><code>转换函数</code></p>
<ol>
<li>implode(连接方式,数组); 将字符串按照某种格式拼接</li>
<li>explode(分割字符,目标字符串);将字符串按照某种格式分割</li>
<li>str_split(字符串,字符串长度);按照指定长度进行分割字符串</li>
</ol>
<p><code>截取函数</code></p>
<ol>
<li>trim(字符串,指定字符); 去除两边的空格，也可以去去除指定字符</li>
<li>ltrim();&#x2F;&#x2F;左边</li>
<li>rtrim();&#x2F;&#x2F;右边</li>
</ol>
<p><code>截取函数</code></p>
<ol>
<li>substr(字符串,指定开始位置,截取长度);&#x2F;&#x2F;从0开始</li>
<li>strstr(字符串,匹配字符,截取到最后);</li>
</ol>
<p><code>大小写转换</code></p>
<ol>
<li>strtolower($str);</li>
<li>strtoupper($str);</li>
<li>ucfirst($str);&#x2F;&#x2F;首字母大写</li>
</ol>
<p><code>查找函数</code></p>
<ol>
<li>strpos($str,”a”);&#x2F;&#x2F;字符第一次出现的位置</li>
<li>strrpos($str,”a”);&#x2F;&#x2F;字符最后一次出现的位置</li>
</ol>
<p><code>替换函数</code></p>
<ol>
<li>str_replace(被替换的内容,替换的内容,操作的字符串);</li>
</ol>
<p><code>格式化输出数据</code></p>
<ol>
<li>printf();&#x2F;&#x2F;估计用不上 很简单</li>
<li>sprintf();</li>
</ol>
<p><code>其他方法</code></p>
<ol>
<li>str_repeat();&#x2F;&#x2F;重复某个字符串n次</li>
<li>str_shuffle();&#x2F;&#x2F;随机打乱字符串</li>
</ol>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h3><p><code>定义的方法</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr1 = <span class="hljs-title function_">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);<br>$arr2 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>$arr3[] = <span class="hljs-number">1</span>;<br>$arr3[<span class="hljs-number">10</span>] = <span class="hljs-number">100</span>;<br>$arr3[] = <span class="hljs-string">&quot;1&quot;</span>;<br>$arr3[<span class="hljs-string">&quot;key&quot;</span>] = <span class="hljs-string">&#x27;val&#x27;</span>;<br><span class="hljs-comment">//放入顺序等于自动排序不会因为下标自动排序</span><br><br></code></pre></td></tr></table></figure>
<h3 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<br>  [<br>    <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-string">&quot;Gary&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>  =&gt; <span class="hljs-number">11</span><br>  ],<br>  [<br>    <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-string">&quot;Tom&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>  =&gt; <span class="hljs-number">12</span><br>  ]<br>]<br></code></pre></td></tr></table></figure>
<h3 id="异形数组"><a href="#异形数组" class="headerlink" title="异形数组"></a>异形数组</h3><p><code>混合数组,与js一样</code></p>
<h3 id="数组遍历"><a href="#数组遍历" class="headerlink" title="数组遍历"></a>数组遍历</h3><p><code>一维数组访问下标</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure>
<p><code>二维数组访问下标</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure>
<p><code>foreach遍历</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>];<br><span class="hljs-title function_">foreach</span>(<span class="hljs-params">$arr <span class="hljs-keyword">as</span> $val</span>)&#123;<br>  echo $v,<span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>&#125;<br><span class="hljs-title function_">foreach</span>(<span class="hljs-params">$arr <span class="hljs-keyword">as</span> $key =&gt; $val</span>)&#123;<br>  echo $key , <span class="hljs-string">&quot;=&gt;&quot;</span> , $v , <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>&#125;<br><span class="hljs-comment">//多维数组</span><br><span class="hljs-title function_">foreach</span>(<span class="hljs-params">$arr <span class="hljs-keyword">as</span> $key =&gt; $val</span>)&#123;<br>  echo $val[<span class="hljs-string">&quot;name&quot;</span>],$val[<span class="hljs-string">&quot;age&quot;</span>],<span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>for循环</code></p>
<ol>
<li>获取数组长度 count($arr)</li>
<li>数组元素下标是规律的数组</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>];<br><span class="hljs-keyword">for</span>($i = <span class="hljs-number">0</span>,$len = <span class="hljs-title function_">count</span>($arr);$i &lt; $len;$i++)&#123;<br>  echo $i,$arr[$i],<span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>while 配合each和list遍历数组</code></p>
<ol>
<li>each 能够从一个数组中获取当前数组元素的下标和值,并以四个元素的数组返回元素下标和值.</li>
</ol>
<ul>
<li>0下标 &#x3D;&gt; 取得元素的下标值</li>
<li>1下标 &#x3D;&gt; 取得元素的值</li>
<li>key   &#x3D;&gt; 取得元素的下标值</li>
<li>value &#x3D;&gt; 取得元素的值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">1</span>,<span class="hljs-string">&quot;name&quot;</span>=&gt;<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&quot;age&quot;</span>=&gt;<span class="hljs-number">30</span>];<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">each</span>($arr));<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">each</span>($arr));<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">each</span>($arr));<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">each</span>($arr));<br><span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">each</span>($arr));<br><span class="hljs-comment">//如果获取不到结果 返回false</span><br></code></pre></td></tr></table></figure>
<ol>
<li>list 是一种结构,不是函数 没有返回值,list提供一堆变量去获取数组的元素值,然后一次存放到对应的变量中,list必须从索引数组中获取数据,而且必须从0开始</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>=&gt;<span class="hljs-number">1</span>];<br><span class="hljs-title function_">list</span>($first) = $arr;<br><span class="hljs-title function_">var_dump</span>($first);<br><span class="hljs-comment">//错误示范</span><br><span class="hljs-title function_">list</span>($first,$second) = $arr;<br><span class="hljs-title function_">var_dump</span>($first,$second);<br></code></pre></td></tr></table></figure>
<p><code>搭配实现while</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">1</span>,<span class="hljs-string">&quot;name&quot;</span>=&gt;<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&quot;age&quot;</span>=&gt;<span class="hljs-number">30</span>];<br><span class="hljs-keyword">while</span> (<span class="hljs-title function_">list</span>($key,$value) == <span class="hljs-title function_">each</span>($arr)) &#123;<br>  echo $key , $value,<span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="数组相关函数"><a href="#数组相关函数" class="headerlink" title="数组相关函数"></a>数组相关函数</h3><p><code>排序函数 都是按照ascii进行比较 会改变原数组</code></p>
<ol>
<li>sort();顺向</li>
<li>rsort();逆向</li>
<li>asort();顺向 保留下标</li>
<li>ksort();按照下标顺向排序</li>
<li>krsort();逆向排序</li>
<li>shuffe();随机排序</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>];<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">sort</span>($arr);<br><span class="hljs-title function_">print_r</span>($arr);<br></code></pre></td></tr></table></figure>
<p><code>指针函数</code></p>
<ol>
<li>reset()重置</li>
<li>end();重置到最后</li>
<li>next();下一个 到边界后不能返回</li>
<li>prev();上一个 到边界后不能返回</li>
<li>current();获取当前指针对应的元素 指针不移动</li>
<li>key();获取当前指针对应的下标 指针不移动</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">echo <span class="hljs-title function_">reset</span>($arr);<br></code></pre></td></tr></table></figure>
<p><code>其他函数</code></p>
<ol>
<li>count(); 总数</li>
<li>array_push(); 后面加一个</li>
<li>array_pop();  后面取出一个</li>
<li>array_shift();前面取出一个</li>
<li>array_unshift();前面加一个</li>
<li>array_reverse();翻转</li>
<li>in_array(5,$arr); 查询元素</li>
<li>array_keys(); 获取key</li>
<li>array_values();获取value</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>];<br><span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">array_reverse</span>($arr));<br></code></pre></td></tr></table></figure>

<h2 id="编程思想"><a href="#编程思想" class="headerlink" title="编程思想"></a>编程思想</h2><h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p><code>递推算法</code></p>
<ol>
<li>顺推 通过条件推结果</li>
<li>逆推 通过结果推过程</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//斐波那契数列11235...</span><br>$f = [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>];<br>$des = <span class="hljs-number">15</span>;<br><span class="hljs-keyword">for</span>($i = <span class="hljs-number">2</span>;$i &lt; $des;$i++)&#123;<br>    $f[$i] = $f[$i - <span class="hljs-number">1</span>] + $f[$i - <span class="hljs-number">2</span>];<br>&#125;<br><span class="hljs-title function_">var_dump</span>($f);<br></code></pre></td></tr></table></figure>
<p><code>递归算法</code></p>
<ol>
<li>简化问题 找到最优子问题(不能再小)</li>
<li>函数自调用</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">recursion</span>(<span class="hljs-params">$n</span>)&#123;<br>    <span class="hljs-keyword">if</span>($n == <span class="hljs-number">1</span> || $n ==<span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">recursion</span>($n - <span class="hljs-number">1</span>) + <span class="hljs-title function_">recursion</span>($n - <span class="hljs-number">2</span>);<br>&#125;<br>echo <span class="hljs-title function_">recursion</span>(<span class="hljs-number">15</span>);<br></code></pre></td></tr></table></figure>

<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p><code>相邻比较从开始比较到最后次数和第二次循环次数相同,从最大取到最小</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>];<br><span class="hljs-keyword">for</span>($i = <span class="hljs-number">0</span>,$len = <span class="hljs-title function_">count</span>($arr);$i &lt; $len;$i++)&#123;<br>    <span class="hljs-keyword">for</span>($j = <span class="hljs-number">0</span>;$j &lt; $len - <span class="hljs-number">1</span> - $i;$j++)&#123;<br>        <span class="hljs-keyword">if</span>($arr[$j] &gt; $arr[$j + <span class="hljs-number">1</span>])&#123;<br>            $temp = $arr[$j];<br>            $arr[$j] = $arr[$j + <span class="hljs-number">1</span>];<br>            $arr[$j + <span class="hljs-number">1</span>] = $temp;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-title function_">var_dump</span>($arr);<br></code></pre></td></tr></table></figure>
<h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-comment">//循环比较次数</span><br><span class="hljs-keyword">for</span>($i = <span class="hljs-number">0</span>,$len = <span class="hljs-title function_">count</span>($arr);$i &lt; $len;$i++)&#123;<br>    $min = $i;<span class="hljs-comment">//存储当前位置</span><br>    <span class="hljs-comment">//循环当前位置与自己后面的每一位相比的次数</span><br>    <span class="hljs-keyword">for</span>($j = $i + <span class="hljs-number">1</span>;$j &lt; $len;$j++)&#123;<br>        <span class="hljs-comment">//如果后面的某个比自己小 那么自己被替换掉</span><br>        <span class="hljs-keyword">if</span>($arr[$j] &lt; $arr[$min])&#123;<br>            $min = $j;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//如果当前存储的位置改变了 说明有比自己小的 就要交换位置</span><br>    <span class="hljs-keyword">if</span>($min != $i)&#123;<br>        <span class="hljs-comment">//存储要自己的元素内容</span><br>        $temp = $arr[$i];<br>        <span class="hljs-comment">//把自己的内容替换成最小的内容</span><br>        $arr[$i] = $arr[$min];<br>        <span class="hljs-comment">//把被替换的那个元素的内容换成当前位置的内容 完成交换</span><br>        $arr[$min] = $temp;<br>    &#125;<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>($arr);<br></code></pre></td></tr></table></figure>
<h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-comment">//循环取出每一个元素的次数 第一个不用和自己比</span><br><span class="hljs-keyword">for</span>($i = <span class="hljs-number">1</span>,$len = <span class="hljs-title function_">count</span>($arr);$i &lt; $len;$i++)&#123;<br>    <span class="hljs-comment">//存储当前取出的元素</span><br>    $temp = $arr[$i];<br>    <span class="hljs-comment">//当前取出的元素和自己之前的每个元素比较</span><br>    <span class="hljs-keyword">for</span>($j = $i - <span class="hljs-number">1</span>;$j &gt;=<span class="hljs-number">0</span>;$j--)&#123;<br>        <span class="hljs-comment">//如果有比自己大的</span><br>        <span class="hljs-keyword">if</span>($arr[$j] &gt; $temp)&#123;<br>            <span class="hljs-comment">//就把比自己大的那个存在比自己大的元素的后面</span><br>            $arr[$j + <span class="hljs-number">1</span>] = $arr[$j];<br>            <span class="hljs-comment">//把被比较的元素设置成自己</span><br>            $arr[$j] = $temp;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">//如果被比较的没有自己大 那么直接跳过</span><br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-comment">//然后下一轮重新取出一个$arrp[$j]与$temp比较</span><br>    &#125;<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>($arr);<br><br>$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-keyword">for</span>($i = <span class="hljs-number">1</span>,$len = <span class="hljs-title function_">count</span>($arr);$i &lt; $len;$i++)&#123;<br>    $temp = $arr[$i];<br>    $flag = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">for</span>($j = $i - <span class="hljs-number">1</span>;$j &gt;=<span class="hljs-number">0</span>;$j--)&#123;<br>        <span class="hljs-keyword">if</span>($arr[$j] &gt; $temp)&#123;<br>            $arr[$j + <span class="hljs-number">1</span>] = $arr[$j];<br>            $flag = <span class="hljs-literal">true</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>($flag)&#123;<br>        $arr[$j + <span class="hljs-number">1</span>] = $temp;<br>    &#125;<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>($arr);<br></code></pre></td></tr></table></figure>
<h3 id="快速排序-递归"><a href="#快速排序-递归" class="headerlink" title="快速排序 (递归)"></a>快速排序 (递归)</h3><p><code>会消耗大量资源</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">quick_sort</span>(<span class="hljs-params">$arr</span>)&#123;<br>    <span class="hljs-comment">//递归出口</span><br>    $len = <span class="hljs-title function_">count</span>($arr);<br>    <span class="hljs-keyword">if</span>($len &lt;=<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> $arr;<br>    <span class="hljs-comment">//分成两个数组</span><br>    $min = [];<br>    $max = [];<br>    <span class="hljs-comment">//数组元素与第一个元素相比较 大的放max里 小的放min里</span><br>    <span class="hljs-keyword">for</span>($i = <span class="hljs-number">1</span>;$i &lt; $len;$i++)&#123;<br>        <span class="hljs-keyword">if</span>($arr[$i] &lt;$arr[<span class="hljs-number">0</span>])&#123;<br>            $min[] = $arr[$i];<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            $max[] = $arr[$i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//递归调用 无限分解数组 直到没有数组可以分为止</span><br>    $min = <span class="hljs-title function_">quick_sort</span>($min);<br>    $max = <span class="hljs-title function_">quick_sort</span>($max);<br>    <span class="hljs-comment">//返回当前拼接的数组</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">array_merge</span>($min,(array)$arr[<span class="hljs-number">0</span>],$max);<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">quick_sort</span>($arr));<br></code></pre></td></tr></table></figure>
<h3 id="并归排序"><a href="#并归排序" class="headerlink" title="并归排序"></a>并归排序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//二路归并</span><br>$arr1 = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>];<br>$arr2 = [<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>];<br>$arr3 = [];<br><span class="hljs-keyword">while</span>(<span class="hljs-title function_">count</span>($arr1) &amp;&amp; <span class="hljs-title function_">count</span>($arr2))&#123;<br>    $arr3[] = $arr1[<span class="hljs-number">0</span>] &lt; $arr2[<span class="hljs-number">0</span>] ? <span class="hljs-title function_">array_shift</span>($arr1) : <span class="hljs-title function_">array_shift</span>($arr2);<br>&#125;<br><span class="hljs-comment">//合并数组</span><br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">array_merge</span>($arr3,$arr1,$arr2));<br><br>$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">merge_sort</span>(<span class="hljs-params">$arr</span>)&#123;<br>    <span class="hljs-comment">//递归出口</span><br>    $len = <span class="hljs-title function_">count</span>($arr);<br>    <span class="hljs-keyword">if</span>($len &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> $arr;<br>    $mid = <span class="hljs-title function_">floor</span>($len / <span class="hljs-number">2</span>);<br>    <span class="hljs-comment">//截取数组</span><br>    $min = <span class="hljs-title function_">array_slice</span>($arr,<span class="hljs-number">0</span>,$mid);<br>    $max = <span class="hljs-title function_">array_slice</span>($arr,$mid);<br>    <span class="hljs-comment">//递归</span><br>    $min = <span class="hljs-title function_">merge_sort</span>($min);<br>    $max = <span class="hljs-title function_">merge_sort</span>($max);<br>    $m = [];<br>    <span class="hljs-keyword">while</span>(<span class="hljs-title function_">count</span>($min) &amp;&amp; <span class="hljs-title function_">count</span>($max))&#123;<br>        $m[] = $min[<span class="hljs-number">0</span>] &lt; $max[<span class="hljs-number">0</span>] ? <span class="hljs-title function_">array_shift</span>($min) : <span class="hljs-title function_">array_shift</span>($max);<br>     &#125;<br>    <span class="hljs-comment">//拼接</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">array_merge</span>($m,$min,$max);<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">merge_sort</span>($arr));<br></code></pre></td></tr></table></figure>
<h3 id="查找算法"><a href="#查找算法" class="headerlink" title="查找算法"></a>查找算法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js">$arr = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">check_order</span>(<span class="hljs-params">$arr,$num</span>)&#123;<br>    <span class="hljs-keyword">for</span>($i = <span class="hljs-number">0</span>,$len = <span class="hljs-title function_">count</span>($arr);$i &lt; $len;$i++)&#123;<br>        <span class="hljs-keyword">if</span>($arr[$i] == $num)&#123;<br>            <span class="hljs-keyword">return</span> $i;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;未找到&quot;</span>;<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>(<span class="hljs-title function_">check_order</span>($arr,<span class="hljs-number">3</span>));<br><span class="hljs-comment">//二分算法</span><br>$arr = [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>];<br>$res = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">check_break</span>(<span class="hljs-params">$arr,$res</span>)&#123;<br>    $right = <span class="hljs-title function_">count</span>($arr);<br>    $left = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//此处视频中是&lt;= 这是错误的 因为指针会超出范围</span><br>    <span class="hljs-keyword">while</span>($left &lt; $right)&#123;<br>        $mid = <span class="hljs-title function_">floor</span>(($right + $left) / <span class="hljs-number">2</span>);<br>        <span class="hljs-keyword">if</span>($arr[$mid] == $res)&#123;<br>            <span class="hljs-keyword">return</span> $mid + <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>($arr[$mid] &lt; $res)&#123;<br>            $left = $mid + <span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            $right = $mid - <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_">var_dump</span>(<span class="hljs-title function_">check_break</span>($arr,$res));<br></code></pre></td></tr></table></figure>

<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><h3 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//输出所有结果</span><br><span class="hljs-title function_">var_dump</span>($_GET);<br><span class="hljs-title function_">var_dump</span>($_POST);<br><span class="hljs-title function_">var_dump</span>($_REQUEST);<br><span class="hljs-comment">//处理表单</span><br>$name = $_GET[<span class="hljs-string">&quot;name&quot;</span>];<br>$name = $_POST[<span class="hljs-string">&quot;name&quot;</span>];<br>$name = $_REQUEST[<span class="hljs-string">&quot;name&quot;</span>];<br><span class="hljs-comment">//数组转字符串</span><br>$str = <span class="hljs-title function_">implode</span>(<span class="hljs-string">&quot;分隔符&quot;</span>,<span class="hljs-string">&quot;字符串&quot;</span>);<br><span class="hljs-comment">//字符串转数组</span><br>$arr = <span class="hljs-title function_">explode</span>(<span class="hljs-string">&quot;分隔符&quot;</span>,<span class="hljs-string">&quot;字符串&quot;</span>);<br><span class="hljs-comment">//复选框可以这么处理 复选框html页面中name需要加[]</span><br><span class="hljs-title function_">isset</span>($_GET[<span class="hljs-string">&quot;name&quot;</span>]);<span class="hljs-comment">//判断是否为空</span><br></code></pre></td></tr></table></figure>
<h3 id="文件上传php处理方式"><a href="#文件上传php处理方式" class="headerlink" title="文件上传php处理方式"></a>文件上传php处理方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);<br><span class="hljs-title function_">var_dump</span>($_FILES);<br><span class="hljs-comment">//获取临时存储文件</span><br>$files = $_FILES[<span class="hljs-string">&#x27;img&#x27;</span>];<br><span class="hljs-comment">//判断文件是不是上传的文件</span><br><span class="hljs-keyword">if</span>(<span class="hljs-title function_">is_uploaded_file</span>($files[<span class="hljs-string">&#x27;tmp_name&#x27;</span>]))&#123;<br>    <span class="hljs-comment">//移动临时文件到存储的位置</span><br>    <span class="hljs-title function_">move_uploaded_file</span>($files[<span class="hljs-string">&#x27;tmp_name&#x27;</span>],<span class="hljs-string">&quot;uploads/&quot;</span>.<span class="hljs-property">$files</span>[<span class="hljs-string">&#x27;name&#x27;</span>]);<br>    echo <span class="hljs-string">&quot;上传成功!&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    echo <span class="hljs-string">&quot;不是上传的文件&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;file.php&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);<br><span class="hljs-title function_">print_r</span>($_FILES);<br><span class="hljs-comment">//多个name传多张</span><br><span class="hljs-title function_">foreach</span>(<span class="hljs-params">$_FILES <span class="hljs-keyword">as</span> $values</span>)&#123;<br>    echo <span class="hljs-string">&quot;&lt;hr /&gt;&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_">is_uploaded_file</span>($values[<span class="hljs-string">&#x27;tmp_name&#x27;</span>]))&#123;<br>        <span class="hljs-title function_">move_uploaded_file</span>($values[<span class="hljs-string">&#x27;tmp_name&#x27;</span>],<span class="hljs-string">&quot;uploads/&quot;</span>.<span class="hljs-property">$values</span>[<span class="hljs-string">&#x27;name&#x27;</span>]);<br>        echo <span class="hljs-string">&#x27;上传成功!&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//一个name传多张</span><br><span class="hljs-keyword">if</span>(<span class="hljs-title function_">isset</span>($_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>]) &amp;&amp; <span class="hljs-title function_">is_array</span>($_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>]))&#123;<br>    $images = [];<br>    <span class="hljs-title function_">foreach</span>(<span class="hljs-params">$_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>] <span class="hljs-keyword">as</span> $k =&gt; $val</span>)&#123;<br>        echo <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>        $images[] = [<br>            <span class="hljs-string">&#x27;name&#x27;</span>     =&gt; $val,<br>            <span class="hljs-string">&#x27;tmp_name&#x27;</span> =&gt; $_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>][$k],<br>            <span class="hljs-string">&#x27;type&#x27;</span>     =&gt; $_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;type&#x27;</span>][$k],<br>            <span class="hljs-string">&#x27;error&#x27;</span>    =&gt; $_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;error&#x27;</span>][$k],<br>            <span class="hljs-string">&#x27;size&#x27;</span>     =&gt; $_FILES[<span class="hljs-string">&#x27;img&#x27;</span>][<span class="hljs-string">&#x27;size&#x27;</span>][$k]<br>        ];<br>    &#125;<br>    <span class="hljs-title function_">var_dump</span>($images);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="Curl"><a href="#Curl" class="headerlink" title="Curl"></a>Curl</h2><p><code>代码版的浏览器,允许我们在代码中像使用浏览器一样访问别人的网页</code></p>
<h3 id="配置文件中开启curl"><a href="#配置文件中开启curl" class="headerlink" title="配置文件中开启curl"></a>配置文件中开启curl</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//php.ini</span><br>搜索php_curl.<span class="hljs-property">dll</span><br>如果开启后无法使用,需要将php目录中的三个文件 libeay32.<span class="hljs-property">dll</span>,libssh2.<span class="hljs-property">dll</span>,ssleay32.<span class="hljs-property">dll</span>,php5ts.<span class="hljs-property">dll</span>,文件复制到apache的bin目录内<br><br></code></pre></td></tr></table></figure>
<h3 id="11"><a href="#11" class="headerlink" title="11"></a>11</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1.初始化</span><br>$cl = <span class="hljs-title function_">curl_init</span>();<br><span class="hljs-comment">//2.设置链接</span><br><span class="hljs-title function_">curl_setopt</span>($cl,<span class="hljs-variable constant_">CURLOPT_URL</span>,<span class="hljs-string">&#x27;http://www.baidu.com&#x27;</span>);<br><span class="hljs-comment">//不显示到页面</span><br><span class="hljs-title function_">curl_setopt</span>($cl,<span class="hljs-variable constant_">CURLOPT_RETURNTRANDSFER</span>,<span class="hljs-number">1</span>);<br><span class="hljs-comment">//设置post请求</span><br><span class="hljs-title function_">curl_setopt</span>($cl,<span class="hljs-variable constant_">CURLOPT_POST</span>,<span class="hljs-number">1</span>);<br><span class="hljs-comment">//设置post请求数据</span><br>$datas = [];<br><span class="hljs-title function_">curl_setopt</span>($cl,<span class="hljs-variable constant_">CURLOPT_POSTFIELDS</span>,$datas);<br><span class="hljs-comment">//执行curl</span><br><span class="hljs-title function_">curl_exec</span>($cl);<br><span class="hljs-title function_">curl_close</span>($cl);<span class="hljs-comment">//关闭执行 释放内存</span><br></code></pre></td></tr></table></figure>

<h2 id="函数封装"><a href="#函数封装" class="headerlink" title="函数封装"></a>函数封装</h2><h3 id="文件上传功能说明"><a href="#文件上传功能说明" class="headerlink" title="文件上传功能说明"></a>文件上传功能说明</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">功能:上传文件<br>条件:条件判断<br>    需要上传的文件信息:对应的<span class="hljs-number">5</span>个元素的数组<br>    <span class="hljs-number">1.</span> 文件类型是否合适?指定<span class="hljs-variable constant_">MIME</span><br>    <span class="hljs-number">2.</span> 文件存储到什么位置?指定<br>    <span class="hljs-number">3.</span> 文件格式限制(文件后缀)?指定<br>    <span class="hljs-number">4.</span> 文件大小?指定<br>结果:上传完成<br>    <span class="hljs-number">1.</span> 成功:需要将文件的路径和文件名字返回(存储到数据库)<br>    <span class="hljs-number">2.</span> 失败:返回<span class="hljs-literal">false</span>,指定错误原因(引用参数)<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//header(&quot;Content-type:text/html;charset=utf-8&quot;);</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">@param1 array  $file         需要上传的文件信息:一维5元数组(name,tmp_name,error,size,type)</span><br><span class="hljs-comment">@param2 array  $allow_type   允许上传的MIME类型</span><br><span class="hljs-comment">@param3 string $path         存储路径</span><br><span class="hljs-comment">@param4 string &amp;$error       出现错误的原因</span><br><span class="hljs-comment">@param5 array  $allow_format 允许上传的文件格式</span><br><span class="hljs-comment">@param6 int    $max_size     上传的最大值</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-title function_">date_default_timezone_set</span>(<span class="hljs-string">&quot;PRC&quot;</span>);<span class="hljs-comment">//设置时区 不然会显示警告时间不准确</span><br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">upload_single</span>(<span class="hljs-params">$file,$allow_type,$path,&amp;$error,$allow_format = [],$max_size = <span class="hljs-number">2000000</span></span>)&#123;<br>    <span class="hljs-comment">//判断文件是否有效</span><br>    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">is_array</span>($file) || !<span class="hljs-title function_">isset</span>($file[<span class="hljs-string">&#x27;error&#x27;</span>]))&#123;<br>        $error = <span class="hljs-string">&quot;不是一个有效的上传文件&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-comment">//判断文件存储路径是否有效</span><br>    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">is_dir</span>($path))&#123;<br>        $error = <span class="hljs-string">&quot;文件存储路径不存在&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-comment">//判断文件上传过程是否出错</span><br>    <span class="hljs-keyword">switch</span>($file[<span class="hljs-string">&#x27;error&#x27;</span>])&#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>            $error = <span class="hljs-string">&quot;文件超出服务器允许大小!&quot;</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>            $error = <span class="hljs-string">&quot;文件上传过程中出现问题,只上传了一部分&quot;</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>            $error = <span class="hljs-string">&quot;用户没有选中上传的文件&quot;</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>            $error = <span class="hljs-string">&quot;文件保存失败!&quot;</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//判断MIME类型</span><br>    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">in_array</span>($file[<span class="hljs-string">&#x27;type&#x27;</span>][<span class="hljs-number">0</span>],$allow_type))&#123;<br>        <span class="hljs-comment">//该文件类型不允许上传</span><br>        $error = <span class="hljs-string">&quot;当前文件类型不允许上传&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//判断后缀是否允许</span><br>    <span class="hljs-comment">//取出后缀</span><br>    $ext = <span class="hljs-title function_">ltrim</span>(<span class="hljs-title function_">strrchr</span>($file[<span class="hljs-string">&#x27;name&#x27;</span>][<span class="hljs-number">0</span>],<span class="hljs-string">&quot;.&quot;</span>),<span class="hljs-string">&quot;.&quot;</span>);<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">empty</span>($allow_format) &amp;&amp; !<span class="hljs-title function_">in_array</span>($ext,$allow_format))&#123;<br>        <span class="hljs-comment">//不允许上传</span><br>        $error = <span class="hljs-string">&#x27;当前文件格式不允许上传!&#x27;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//判断当前文件大小是否满足当前需求</span><br>    echo $file[<span class="hljs-string">&quot;size&quot;</span>][<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">if</span>($file[<span class="hljs-string">&quot;size&quot;</span>][<span class="hljs-number">0</span>] &gt; $max_size)&#123;<br>        <span class="hljs-comment">//文件过大</span><br>        $error = <span class="hljs-string">&quot;当前上传的文件超出最大允许值,&quot;</span>.<span class="hljs-property">$max_size</span>.<span class="hljs-string">&quot;字节!&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//构造文件名字:类型_年月日 + 随机字符串.$ext</span><br>    $fullname = <span class="hljs-title function_">strstr</span>($file[<span class="hljs-string">&#x27;type&#x27;</span>][<span class="hljs-number">0</span>],<span class="hljs-string">&#x27;/&#x27;</span>,<span class="hljs-variable constant_">TRUE</span>) . <span class="hljs-title function_">date</span>(<span class="hljs-string">&quot;Ymd&quot;</span>);<br>    <span class="hljs-comment">//产生随机字符串</span><br>    <span class="hljs-keyword">for</span>($i = <span class="hljs-number">0</span>;$i &lt; <span class="hljs-number">4</span>;$i++)&#123;<br>        $fullname .= <span class="hljs-title function_">chr</span>(<span class="hljs-title function_">mt_rand</span>(<span class="hljs-number">65</span>,<span class="hljs-number">90</span>));<br>    &#125;<br>    <span class="hljs-comment">//拼凑后缀</span><br>    $fullname .= <span class="hljs-string">&#x27;.&#x27;</span> . $ext;<br>    <span class="hljs-comment">//移动到指定目录</span><br>    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">is_uploaded_file</span>($file[<span class="hljs-string">&#x27;tmp_name&#x27;</span>][<span class="hljs-number">0</span>]))&#123;<br>        <span class="hljs-comment">//文件不是上传的</span><br>        $error = <span class="hljs-string">&#x27;错误:不是上传的文件!&#x27;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_">move_uploaded_file</span>($file[<span class="hljs-string">&#x27;tmp_name&#x27;</span>][<span class="hljs-number">0</span>],$path.<span class="hljs-string">&#x27;/&#x27;</span>.<span class="hljs-property">$fullname</span>))&#123;<br>        <span class="hljs-comment">//成功</span><br>        <span class="hljs-keyword">return</span> $fullname;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-comment">//移动失败</span><br>        $error = <span class="hljs-string">&quot;文件移动失败&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br><br>$file = $_FILES[<span class="hljs-string">&#x27;img&#x27;</span>];<br>$path = <span class="hljs-string">&#x27;uploads&#x27;</span>;<br>$allow_type = [<span class="hljs-string">&#x27;image/png&#x27;</span>,<span class="hljs-string">&#x27;image/jpg&#x27;</span>,<span class="hljs-string">&#x27;image/jpeg&#x27;</span>,<span class="hljs-string">&#x27;image/gif&#x27;</span>,<span class="hljs-string">&#x27;image/pjpeg&#x27;</span>];<br>$allow_format = [<span class="hljs-string">&quot;jpg&quot;</span>,<span class="hljs-string">&quot;gif&quot;</span>,<span class="hljs-string">&quot;jpeg&quot;</span>];<br>$max_size = <span class="hljs-number">8000000</span>;<br><br><span class="hljs-keyword">if</span>($filename = <span class="hljs-title function_">upload_single</span>($file,$allow_type,$path,$error,$allow_format,$max_size))&#123;<br>    echo $filename;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    echo $error;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="php连接数据库"><a href="#php连接数据库" class="headerlink" title="php连接数据库"></a>php连接数据库</h2><p><code>资源 = mysql_connect(服务器地址,用户名,密码);</code></p>
<h3 id="设置连接编码"><a href="#设置连接编码" class="headerlink" title="设置连接编码"></a>设置连接编码</h3><p><code>mysql_query(&quot;set names utf8&quot;,$link);</code><br><code>mysql_set_charset(&quot;utf8&quot;);</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">$link = <span class="hljs-title function_">mysql_connect</span>(<span class="hljs-string">&quot;localhost:3306&quot;</span>,<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;123456&#x27;</span>);<br><span class="hljs-title function_">var_dump</span>($link);<br>$res = <span class="hljs-title function_">mysql_query</span>(<span class="hljs-string">&quot;set names utf8&quot;</span>,$link);<br>$res = <span class="hljs-title function_">mysql_set_charset</span>(<span class="hljs-string">&quot;utf8&quot;</span>,$link);<br></code></pre></td></tr></table></figure>
<p><strong>$link是超全局的</strong></p>
<h3 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">$res = <span class="hljs-title function_">mysql_query</span>(<span class="hljs-string">&#x27;use databases&#x27;</span>);<br>$res = <span class="hljs-title function_">mysql_select_db</span>(<span class="hljs-string">&#x27;databases&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h3 id="关闭连接"><a href="#关闭连接" class="headerlink" title="关闭连接"></a>关闭连接</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$res = <span class="hljs-title function_">mysql_close</span>($link);<br></code></pre></td></tr></table></figure>

<h3 id="增删改操作"><a href="#增删改操作" class="headerlink" title="增删改操作"></a>增删改操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 新建数据库和数据表</span><br><span class="hljs-keyword">create</span> database News charset utf8;<br>use News;<br><span class="hljs-keyword">create table</span> n_news(<br>id <span class="hljs-type">int</span> <span class="hljs-keyword">primary key</span> auto_increment comment &quot;自增id&quot;,<br>title <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not null</span> comment &quot;新闻标题&quot;,<br>isTop tinyint <span class="hljs-keyword">not null</span> comment &quot;知否置顶,1置顶,2不置顶&quot;,<br>comtent text comment &quot;内容&quot;,<br>publiser <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not null</span> comment &quot;发布人&quot;,<br>pub_time <span class="hljs-type">int</span> <span class="hljs-keyword">not null</span> comment &quot;发布时间&quot;<br>)charset utf8;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> n_news;<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//include_once</span><br><span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);<br>$con = <span class="hljs-title function_">mysql_connect</span>(<span class="hljs-string">&quot;localhost:3306&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>) or <span class="hljs-title function_">die</span>(<span class="hljs-string">&quot;数据库连接失败&quot;</span>);<br><span class="hljs-title function_">mysql_query</span>(<span class="hljs-string">&quot;set names utf8&quot;</span>,$con);<br><span class="hljs-title function_">mysql_query</span>(<span class="hljs-string">&#x27;use news&#x27;</span>,$con);<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//增</span><br>include_once <span class="hljs-string">&#x27;database.php&#x27;</span>;<br>$pub_time = <span class="hljs-title function_">time</span>();<br>$sql = <span class="hljs-string">&quot;insert into n_news values(null,&#x27;今天天气真好11&#x27;,1,&#x27;今天风和日丽呀22&#x27;,&#x27;GaryWang&#x27;,&#123;$pub_time&#125;)&quot;</span>;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_">mysql_query</span>($sql))&#123;<br>    echo <span class="hljs-string">&quot;数据插入成功!&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    echo <span class="hljs-string">&quot;数据插入失败!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//改</span><br>include_once <span class="hljs-string">&#x27;database.php&#x27;</span>;<br>$pub_time = <span class="hljs-title function_">time</span>();<br>$sql = <span class="hljs-string">&quot;update n_news set content = &#x27;abc&#x27; where id = 1&quot;</span>;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_">mysql_query</span>($sql))&#123;<br>    echo <span class="hljs-string">&quot;数据更新成功!&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    echo <span class="hljs-string">&quot;数据更新失败!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//删</span><br>include_once <span class="hljs-string">&#x27;database.php&#x27;</span>;<br>$pub_time = <span class="hljs-title function_">time</span>();<br>$sql = <span class="hljs-string">&quot;delete from n_news where id = 1&quot;</span>;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_">mysql_query</span>($sql))&#123;<br>    echo <span class="hljs-string">&quot;数据删除成功!&quot;</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    echo <span class="hljs-string">&quot;数据删除失败!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h3><ol>
<li>mysql_num_rows();</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">include_once <span class="hljs-string">&#x27;database.php&#x27;</span>;<br>$sql = <span class="hljs-string">&#x27;select * from n_news&#x27;</span>;<br>$rec = <span class="hljs-title function_">mysql_query</span>($sql,$con);<br><span class="hljs-comment">//有多少行记录</span><br>echo <span class="hljs-title function_">mysql_num_rows</span>($rec);<br></code></pre></td></tr></table></figure>
<h3 id="解析结果集"><a href="#解析结果集" class="headerlink" title="解析结果集"></a>解析结果集</h3><ol>
<li>mysql_fetch_assoc();获取关联数组,表的表单名字作为数组下标,元素值为数组元素值</li>
<li>mysql_fetch_row();  获取索引数组,数组下标从0开始</li>
<li>mysql_fetch_array();获取关联或者索引数组,但是默认是同事存在:一个记录取两次,形成一组是关联数组,一组是索引数组;可以通过第二个参数来决定获取的方式<ul>
<li>MYSQL_ASSOC 只获取关联</li>
<li>MYSQL_NUM   只获取索引</li>
<li>MYSQL_BOTH  两种都获取</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">include_once <span class="hljs-string">&#x27;database.php&#x27;</span>;<br>$sql = <span class="hljs-string">&#x27;select * from n_news&#x27;</span>;<br>$rec = <span class="hljs-title function_">mysql_query</span>($sql,$con);<br>echo <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><br>$row = <span class="hljs-title function_">mysql_fetch_assoc</span>($rec);<br><span class="hljs-title function_">print_r</span>($row);<br><br>$row = <span class="hljs-title function_">mysql_fetch_row</span>($rec);<br><span class="hljs-title function_">print_r</span>($row);<br><span class="hljs-comment">//获取两种</span><br>$row = <span class="hljs-title function_">mysql_fetch_array</span>($rec,<span class="hljs-variable constant_">MYSQL_BOTH</span>);<br><span class="hljs-title function_">print_r</span>($row);<br><span class="hljs-comment">//获取关联</span><br>$row = <span class="hljs-title function_">mysql_fetch_array</span>($rec,<span class="hljs-variable constant_">MYSQL_ASSOC</span>);<br><span class="hljs-title function_">print_r</span>($row);<br><span class="hljs-comment">//获取索引</span><br>$row = <span class="hljs-title function_">mysql_fetch_array</span>($rec,<span class="hljs-variable constant_">MYSQL_NUM</span>);<br><span class="hljs-title function_">print_r</span>($row);<br></code></pre></td></tr></table></figure>
<h3 id="相关函数"><a href="#相关函数" class="headerlink" title="相关函数"></a>相关函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//获取一个指定结果集中所有的字段数</span><br><span class="hljs-title function_">mysql_num_fields</span>($rec);<br><span class="hljs-comment">//查询指定列的字段名字 索引从0开始</span><br><span class="hljs-title function_">mysql_field_name</span>($rec,<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure>
<h3 id="错误判定"><a href="#错误判定" class="headerlink" title="错误判定"></a>错误判定</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span>(!$rec)&#123;<br>    echo <span class="hljs-string">&quot;sql指令执行出错,错误编号为: &quot;</span> . <span class="hljs-title function_">mysql_errno</span>() . <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>    echo <span class="hljs-string">&quot;sql指令执行出错,错误信息为: &quot;</span> . <span class="hljs-title function_">mysql_error</span>() . <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>    <span class="hljs-title function_">exit</span>();<span class="hljs-comment">//程序停止</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$pub_time = <span class="hljs-title function_">time</span>();<br>$sql = <span class="hljs-string">&quot;insert into n_news values(null,&#x27;今天天气真好11&#x27;,1,&#x27;今天风和日丽呀22&#x27;,&#x27;GaryWang&#x27;,&#123;$pub_time&#125;)&quot;</span>;<br>$rec = <span class="hljs-title function_">mysql_query</span>($sql);<br><span class="hljs-keyword">if</span>(!$rec)&#123;<br>    echo <span class="hljs-string">&quot;程序出错!&quot;</span> . <span class="hljs-title function_">mysql_errno</span>() . <span class="hljs-title function_">mysql_error</span>() . <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br>&#125;<br>echo <span class="hljs-title function_">mysql_insert_id</span>();<span class="hljs-comment">//获取上一条插入语句的自增长id,如果没有自增长则为0</span><br></code></pre></td></tr></table></figure>

<h2 id="绘画"><a href="#绘画" class="headerlink" title="绘画"></a>绘画</h2><h3 id="创建画布"><a href="#创建画布" class="headerlink" title="创建画布"></a>创建画布</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$w</span> = <span class="hljs-number">400</span>;<br><span class="hljs-variable">$h</span> = <span class="hljs-number">200</span>;<br><span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatetruecolor</span>(<span class="hljs-variable">$w</span>,<span class="hljs-variable">$h</span>);<br><span class="hljs-comment">//分配颜色</span><br><span class="hljs-variable">$bg</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br><span class="hljs-comment">//填充颜色</span><br><span class="hljs-title function_ invoke__">imagefill</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$bg</span>);<br><span class="hljs-comment">//绘制矩形</span><br><span class="hljs-variable">$border</span> = <span class="hljs-title function_ invoke__">imagecolorallorcate</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>);<br><span class="hljs-title function_ invoke__">imagerectangle</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">50</span>,<span class="hljs-number">20</span>,<span class="hljs-number">350</span>,<span class="hljs-number">180</span>,<span class="hljs-variable">$border</span>);<br><span class="hljs-comment">//绘制直线</span><br><span class="hljs-title function_ invoke__">imageline</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">50</span>,<span class="hljs-number">20</span>,<span class="hljs-number">350</span>,<span class="hljs-number">180</span>,<span class="hljs-variable">$border</span>);<br><span class="hljs-comment">//绘制文字</span><br><span class="hljs-title function_ invoke__">imagestring</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">5</span>,<span class="hljs-number">150</span>,<span class="hljs-number">40</span>,<span class="hljs-string">&#x27;abcd&#x27;</span>,<span class="hljs-variable">$border</span>);<br><br>   <span class="hljs-comment">//绘制中文</span><br>   <span class="hljs-title function_ invoke__">imagettftext</span>(<span class="hljs-variable">$img</span>, <span class="hljs-number">40</span>,<span class="hljs-number">0</span>,<span class="hljs-number">50</span>,<span class="hljs-number">150</span>,<span class="hljs-variable">$color</span>,<span class="hljs-string">&#x27;simhei.ttf&#x27;</span>,<span class="hljs-string">&#x27;啊啊啊啊啊啊啊啊&#x27;</span>);<br><br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-type:image/jpeg&#x27;</span>);<br><span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$img</span>);<br><span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$img</span>,[filename]);<br><span class="hljs-title function_ invoke__">imagegif</span>();<br></code></pre></td></tr></table></figure>
<h3 id="通过图片创建画布"><a href="#通过图片创建画布" class="headerlink" title="通过图片创建画布"></a>通过图片创建画布</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><br><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;game.jpg&#x27;</span>;<br><span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$file</span>);<br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-type:image/jpeg&#x27;</span>);<br><span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$img</span>);<br><br><br><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;bg.png&#x27;</span>;<br><span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefrompng</span>(<span class="hljs-variable">$file</span>);<br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-type:image/png&#x27;</span>);<br><span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$img</span>);<br><br><br><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;bg.png&#x27;</span>;<br><span class="hljs-variable">$info</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file</span>);<br><span class="hljs-keyword">switch</span> (<span class="hljs-variable">$info</span>[<span class="hljs-string">&#x27;mime&#x27;</span>])&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/jpeg&#x27;</span>:<br>        <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/png&#x27;</span>:<br>        <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefrompng</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/gif&#x27;</span>:<br>        <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromgif</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;content-type:image/png&#x27;</span>);<br><span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$img</span>);<br></code></pre></td></tr></table></figure>
<h3 id="验证码实现"><a href="#验证码实现" class="headerlink" title="验证码实现"></a>验证码实现</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;bg.png&#x27;</span>;<br><span class="hljs-variable">$info</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file</span>);<br><span class="hljs-keyword">switch</span> (<span class="hljs-variable">$info</span>[<span class="hljs-string">&#x27;mime&#x27;</span>])&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/jpeg&#x27;</span>:<br>        <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/png&#x27;</span>:<br>        <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefrompng</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/gif&#x27;</span>:<br>        <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromgif</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-variable">$color</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>);<br><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCode</span>(<span class="hljs-params"><span class="hljs-variable">$len</span> = <span class="hljs-number">0</span></span>)</span>&#123;<br>    <span class="hljs-variable">$charset</span> = <span class="hljs-string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ23456789&#x27;</span>;<br>    <span class="hljs-variable">$str</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-variable">$len</span>;<span class="hljs-variable">$i</span>++)&#123;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-variable">$charset</span>[<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">56</span>)];<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>&#125;<br><span class="hljs-comment">//echo getCode(4);</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLine</span>(<span class="hljs-params"><span class="hljs-variable">$img</span>,<span class="hljs-variable">$count</span>=<span class="hljs-number">1</span></span>)</span>&#123;<br>    <span class="hljs-comment">//随机干扰线</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>;<span class="hljs-variable">$i</span> &lt; <span class="hljs-variable">$count</span>;<span class="hljs-variable">$i</span>++)&#123;<br>        <span class="hljs-variable">$color</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>) );<br>        <span class="hljs-title function_ invoke__">imageline</span>(<span class="hljs-variable">$img</span>,<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">200</span>)-<span class="hljs-number">50</span>,<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">200</span>)-<span class="hljs-number">50</span>,<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">300</span>)-<span class="hljs-number">50</span>,<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">200</span>)-<span class="hljs-number">50</span>,<span class="hljs-variable">$color</span>);<br>        <span class="hljs-title function_ invoke__">imagesetthickness</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">3</span>, <span class="hljs-number">8</span>));<span class="hljs-comment">//设置线段宽度</span><br>    &#125;<br>&#125;<br><span class="hljs-title function_ invoke__">getLine</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">10</span>);<br><br><span class="hljs-comment">//添加验证字母</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLetter</span>(<span class="hljs-params"><span class="hljs-variable">$img</span></span>)</span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-number">4</span>;<span class="hljs-variable">$i</span>++)&#123;<br>        <span class="hljs-variable">$color</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>), <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>), <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>));<br>        <span class="hljs-title function_ invoke__">imagettftext</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">30</span>,<span class="hljs-number">50</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(-<span class="hljs-number">20</span>,<span class="hljs-number">20</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">23</span>,<span class="hljs-number">26</span>)*(<span class="hljs-variable">$i</span>+<span class="hljs-number">2</span>),<span class="hljs-number">100</span>,<span class="hljs-variable">$color</span>,<span class="hljs-string">&#x27;simhei.ttf&#x27;</span>,<span class="hljs-title function_ invoke__">getCode</span>(<span class="hljs-number">4</span>)[<span class="hljs-variable">$i</span>]);<br>    &#125;<br>&#125;<br><span class="hljs-title function_ invoke__">addLetter</span>(<span class="hljs-variable">$img</span>);<br><br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;content-type:image/png&#x27;</span>);<br><span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$img</span>);<br><br></code></pre></td></tr></table></figure>
<h3 id="验证码封装"><a href="#验证码封装" class="headerlink" title="验证码封装"></a>验证码封装</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs php"><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">captcha</span>(<span class="hljs-params"><span class="hljs-variable">$w</span>=<span class="hljs-number">100</span>,<span class="hljs-variable">$h</span>=<span class="hljs-number">30</span></span>)</span>&#123;<br>    <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatetruecolor</span>(<span class="hljs-variable">$w</span>, <span class="hljs-variable">$h</span>);<br>    <span class="hljs-variable">$color</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">150</span>,<span class="hljs-number">255</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">150</span>,<span class="hljs-number">255</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">150</span>,<span class="hljs-number">255</span>));<br>    <span class="hljs-title function_ invoke__">imagefill</span>(<span class="hljs-variable">$img</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$color</span>);<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLine</span>(<span class="hljs-params"><span class="hljs-variable">$img</span></span>)</span>&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-number">4</span>;<span class="hljs-variable">$i</span>++)&#123;<br>            <span class="hljs-title function_ invoke__">imageline</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">50</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>,<span class="hljs-number">50</span>),<span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>)));<br>            <span class="hljs-title function_ invoke__">imagesetthickness</span>(<span class="hljs-variable">$img</span>,<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>));<br>        &#125;<br>    &#125;<br>    <span class="hljs-title function_ invoke__">addLine</span>(<span class="hljs-variable">$img</span>);<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLetter</span>(<span class="hljs-params"><span class="hljs-variable">$img</span></span>)</span>&#123;<br>        <span class="hljs-variable">$charset</span> = <span class="hljs-string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ23456789&#x27;</span>;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-number">4</span>;<span class="hljs-variable">$i</span>++)&#123;<br>            <span class="hljs-variable">$str</span> .= <span class="hljs-variable">$charset</span>[<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>, <span class="hljs-number">56</span>)];<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-number">4</span>;<span class="hljs-variable">$i</span>++)&#123;<br>            <span class="hljs-variable">$color</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>),<span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">50</span>,<span class="hljs-number">200</span>));<br>            <span class="hljs-title function_ invoke__">imagettftext</span>(<span class="hljs-variable">$img</span>, <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">20</span>,<span class="hljs-number">28</span>), <span class="hljs-title function_ invoke__">mt_rand</span>(-<span class="hljs-number">20</span>,<span class="hljs-number">20</span>), <span class="hljs-number">30</span>*(<span class="hljs-variable">$i</span>+<span class="hljs-number">1.5</span>), <span class="hljs-number">30</span>, <span class="hljs-variable">$color</span>, <span class="hljs-string">&#x27;simhei.ttf&#x27;</span>, <span class="hljs-variable">$str</span>[<span class="hljs-variable">$i</span>]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br>    <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">addLetter</span>(<span class="hljs-variable">$img</span>);<br>    <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;content-type:image/jpeg&#x27;</span>);<br>    <span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$img</span>);<br>    <span class="hljs-keyword">return</span> [<br>        <span class="hljs-string">&quot;str&quot;</span> =&gt; <span class="hljs-variable">$str</span><br>    ];<br>&#125;<br><span class="hljs-title function_ invoke__">captcha</span>(<span class="hljs-number">200</span>,<span class="hljs-number">40</span>);<br></code></pre></td></tr></table></figure>

<h2 id="绘画-1"><a href="#绘画-1" class="headerlink" title="绘画"></a>绘画</h2><h3 id="创建画布-1"><a href="#创建画布-1" class="headerlink" title="创建画布"></a>创建画布</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs php">    <br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">water</span>(<span class="hljs-params"><span class="hljs-variable">$file1</span>, <span class="hljs-variable">$file2</span>, <span class="hljs-variable">$dir</span>=<span class="hljs-number">1</span></span>)</span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFrom</span>(<span class="hljs-params"><span class="hljs-variable">$file</span></span>)</span>&#123;<br>        <span class="hljs-variable">$info</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-variable">$img</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$info</span>[<span class="hljs-string">&#x27;mime&#x27;</span>])&#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/jpeg&#x27;</span>:<br>                <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$file</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/png&#x27;</span>:<br>                <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefrompng</span>(<span class="hljs-variable">$file</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/gif&#x27;</span>:<br>                <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromgit</span>(<span class="hljs-variable">$file</span>);<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$img</span>;<br>    &#125;<br>    <span class="hljs-variable">$imgBg</span>  = <span class="hljs-title function_ invoke__">createFrom</span>(<span class="hljs-variable">$file1</span>);<br>    <span class="hljs-variable">$imgIco</span> = <span class="hljs-title function_ invoke__">createFrom</span>(<span class="hljs-variable">$file2</span>);<br><br>    <span class="hljs-variable">$dst_file1</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file1</span>);<br>    <span class="hljs-variable">$dst_file2</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file2</span>);<br>    <span class="hljs-variable">$dst_x</span>  = <span class="hljs-number">0</span>;<br>    <span class="hljs-variable">$dst_y</span>  = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$dir</span>) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-comment">//左上</span><br>            <span class="hljs-variable">$dst_x</span>  = <span class="hljs-number">0</span>;<br>            <span class="hljs-variable">$dst_y</span>  = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<span class="hljs-comment">//右上</span><br>            <span class="hljs-variable">$dst_x</span>  = <span class="hljs-variable">$dst_file1</span>[<span class="hljs-number">0</span>]   - <span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">0</span>];<br>            <span class="hljs-variable">$dst_y</span>  = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-comment">//左下</span><br>            <span class="hljs-variable">$dst_x</span>  = <span class="hljs-number">0</span>;<br>            <span class="hljs-variable">$dst_y</span>  = <span class="hljs-variable">$dst_file1</span>[<span class="hljs-number">1</span>]   - <span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<span class="hljs-comment">//右下</span><br>            <span class="hljs-variable">$dst_x</span>  = <span class="hljs-variable">$dst_file1</span>[<span class="hljs-number">0</span>]   - <span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">0</span>];<br>            <span class="hljs-variable">$dst_y</span>  = <span class="hljs-variable">$dst_file1</span>[<span class="hljs-number">1</span>]   - <span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<span class="hljs-comment">//居中</span><br>            <span class="hljs-variable">$dst_x</span>  = (<span class="hljs-variable">$dst_file1</span>[<span class="hljs-number">0</span>]  - <span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">0</span>])/<span class="hljs-number">2</span>;<br>            <span class="hljs-variable">$dst_y</span>  = (<span class="hljs-variable">$dst_file1</span>[<span class="hljs-number">1</span>]  - <span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">1</span>])/<span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-title function_ invoke__">imagecopymerge</span>(<span class="hljs-variable">$imgBg</span>,<span class="hljs-variable">$imgIco</span>,<span class="hljs-variable">$dst_x</span>,<span class="hljs-variable">$dst_y</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">0</span>],<span class="hljs-variable">$dst_file2</span>[<span class="hljs-number">1</span>],<span class="hljs-number">50</span>);<br>    <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&quot;content-type:image/png&quot;</span>);<br>    <span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$imgBg</span>);<br>&#125;<br><br><span class="hljs-variable">$imgBg</span> = <span class="hljs-string">&#x27;../public/xadmin/images/bg.png&#x27;</span>;<br><span class="hljs-variable">$imgIco</span> = <span class="hljs-string">&#x27;../public/xadmin/images/ico.jpg&#x27;</span>;<br><span class="hljs-title function_ invoke__">water</span>(<span class="hljs-variable">$imgBg</span>,<span class="hljs-variable">$imgIco</span>,<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure>

<h1 id="cookie-session"><a href="#cookie-session" class="headerlink" title="cookie&amp;session"></a>cookie&amp;session</h1><h4 id="cookie的基本使用"><a href="#cookie的基本使用" class="headerlink" title="cookie的基本使用"></a>cookie的基本使用</h4><p><code>setcookie(名字,值);</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;set-cookie:name=abc123&quot;</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;age&#x27;</span>,<span class="hljs-number">1</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;garywang&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h4 id="php获取浏览器的cookie"><a href="#php获取浏览器的cookie" class="headerlink" title="php获取浏览器的cookie"></a>php获取浏览器的cookie</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">$_COOKIE;<br><span class="hljs-title function_">var_dump</span>($_COOKIE);<br></code></pre></td></tr></table></figure>
<h4 id="cookie生命周期"><a href="#cookie生命周期" class="headerlink" title="cookie生命周期"></a>cookie生命周期</h4><p><code>cookie在浏览器生存时间(下次访问服务器时候是否携带对应的cookie)</code></p>
<ol>
<li>默认(不设定) 不设定周期默认是关闭浏览器就清空</li>
<li>设定日期戳 通过setcookie第三个参数可以限定生命周期,是用时间戳来管理的,格林威治时间</li>
<li>设置为0 表示与默认设置相同</li>
<li>删除一个cookie 可以通过设定生命周期来实现</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;a1&#x27;</span>,<span class="hljs-string">&#x27;a1&#x27;</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;a2&#x27;</span>,<span class="hljs-string">&#x27;a2&#x27;</span>,<span class="hljs-title function_">time</span>() + <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;a3&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>);         <span class="hljs-comment">//清空内容可以删除</span><br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;a3&#x27;</span>,<span class="hljs-string">&#x27;a3&#x27;</span>,<span class="hljs-title function_">time</span>());<span class="hljs-comment">//过期时间戳</span><br></code></pre></td></tr></table></figure>
<h4 id="cookie作用范围"><a href="#cookie作用范围" class="headerlink" title="cookie作用范围"></a>cookie作用范围</h4><p><code>不同的文件夹层级中,设定cookie默认是在不同的文件夹下有访问限制.上层cookie下层可以访问,下层cookie上层不能访问.</code></p>
<ol>
<li>默认范围</li>
<li>设定为 ‘&#x2F;‘ 告知浏览器当前cookie得作用范围是网站根目录</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;a4&#x27;</span>,<span class="hljs-string">&#x27;a4&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&#x27;/&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h4 id="cookie跨子域"><a href="#cookie跨子域" class="headerlink" title="cookie跨子域"></a>cookie跨子域</h4><p><code>同一一级域名下的不同二级域名a.uuguo.cn b.uuguo.cn 可以通过cookie共享访问.默认不允许</code></p>
<ol>
<li>设定cookie得有效域名 不同域名(主机)之间不能共享cookie</li>
<li>不设定时的默认有效域名</li>
<li>跨子域得设定方法 在设定域名访问的时候用设定上级域名即可</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;local&#x27;</span>,<span class="hljs-string">&#x27;local&#x27;</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&#x27;/&#x27;</span>,<span class="hljs-string">&#x27;a.uuguo.cn&#x27;</span>);<br></code></pre></td></tr></table></figure>
<h4 id="cookie数组数据"><a href="#cookie数组数据" class="headerlink" title="cookie数组数据"></a>cookie数组数据</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;prams[0]&#x27;</span>,<span class="hljs-number">1</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;prams[1]&#x27;</span>,<span class="hljs-number">2</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;prams[2]&#x27;</span>,<span class="hljs-number">3</span>);<br><span class="hljs-title function_">setcookie</span>(<span class="hljs-string">&#x27;prams[3]&#x27;</span>,<span class="hljs-number">4</span>);<br><br><span class="hljs-title function_">var_dump</span>($_COOKIE);<br>echo $_COOKIE[<span class="hljs-string">&#x27;prams&#x27;</span>][<span class="hljs-number">2</span>];   <span class="hljs-comment">// =&gt; 3</span><br></code></pre></td></tr></table></figure>

<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><p><code>session只与cookie有关,与浏览器无关</code></p>
<ol>
<li>php碰到sission_start()时开启session会话,会自动检测sessionID<ul>
<li>如果有则使用</li>
<li>如果没有则创建一个sessionID,并通过响应头以cookie形式保存到浏览器中</li>
</ul>
</li>
<li>初始化超全局变量$_SESSION为一个空数组</li>
<li>php通过sessionID去指定位置(session文件存储位置)匹配对应的文件<ul>
<li>不存在该文件 创建一个sessionID命名文件</li>
<li>存在 读取文件内容(反序列化),将数据存储到$_SESSION中</li>
</ul>
</li>
<li>脚本执行结束 将$_SESSION中保存的所有数据序列化存储到sessionID对应的文件中.</li>
</ol>
<h3 id="session创建及访问"><a href="#session创建及访问" class="headerlink" title="session创建及访问"></a>session创建及访问</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//开启session</span><br><span class="hljs-title function_">session_start</span>();<br><span class="hljs-comment">//已经产生数组</span><br><span class="hljs-title function_">var_dump</span>($_SESSION);<span class="hljs-comment">//空数组</span><br><span class="hljs-comment">//设置session数据</span><br>$_SESSION[<span class="hljs-string">&#x27;name&#x27;</span>] = <span class="hljs-string">&#x27;Mark&#x27;</span>;<br>$_SESSION[<span class="hljs-string">&#x27;hobby&#x27;</span>] = [<span class="hljs-string">&#x27;football&#x27;</span>,<span class="hljs-string">&#x27;eat&#x27;</span>];<br><br><span class="hljs-title function_">var_dump</span>($_SESSION);<span class="hljs-comment">//有数据的数组</span><br>echo <span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>;<br><span class="hljs-title function_">print_r</span>($_SESSION[<span class="hljs-string">&#x27;name&#x27;</span>]);<br><br><span class="hljs-comment">//访问</span><br><span class="hljs-title function_">session_start</span>();<br>echo $_SESSION[<span class="hljs-string">&#x27;name&#x27;</span>];<br></code></pre></td></tr></table></figure>
<h3 id="session配置"><a href="#session配置" class="headerlink" title="session配置"></a>session配置</h3><p><code>基础配置</code></p>
<ol>
<li>session.name: session名字,保存到cookie中sessionID对应的名字</li>
<li>session.auto.start 是否自动开启session(无需手动session_start()),默认是关闭的</li>
<li>session.save_handler session数据的保存方式,默认是文件形式</li>
<li>session.save_path session文件默认存储的位置(不设置为使用系统临时文件,因为有的系统不开发系统临时文件权限,会导致失效,需要手动设置)</li>
</ol>
<p><code>常用配置</code></p>
<ol>
<li>session.cookie_lifetime phpsessionID在浏览器端对应cookie的生命周期,默认是会话结束</li>
<li>session.cookie_path sessionID在浏览器存储之后允许服务器访问的路径(cookie有作用范围)</li>
<li>session.cookie_domain cookie允许访问的子域(cookie可以跨子域) 默认为空,只能访问当前子域</li>
</ol>
<h3 id="session配置的两种方式"><a href="#session配置的两种方式" class="headerlink" title="session配置的两种方式"></a>session配置的两种方式</h3><ol>
<li>php.ini 全局配置,修改php.ini中的配置项</li>
<li>脚本配置 php可以通过ini_set函数来在运行中设定某些配置项(只会对当前运行的脚本有效),把这种配置称之为项目级<code>@Ini_set(&#39;session.save_path&#39;,&#39;E:/server/sessions&#39;);</code></li>
</ol>
<h3 id="session销毁-删除"><a href="#session销毁-删除" class="headerlink" title="session销毁(删除)"></a>session销毁(删除)</h3><p><code>session删除是指删除session数据,$_SESSION中看不到而已;销毁session是指删除session对应的session文件.</code><br><code>session_destory(),会自动根据session_start()得到sessionID去找到指定的session文件,并把其删除.</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">session_start</span>();<br><span class="hljs-title function_">sleep</span>(<span class="hljs-number">3</span>);<br><span class="hljs-title function_">session_destory</span>();<br></code></pre></td></tr></table></figure>
<h3 id="session垃圾回收机制-php-ini参数设置"><a href="#session垃圾回收机制-php-ini参数设置" class="headerlink" title="session垃圾回收机制(php.ini参数设置)"></a>session垃圾回收机制(php.ini参数设置)</h3><ol>
<li>session.gc_maxlifetime &#x3D; 1400 规定session文件最大的生命周期为1440秒,24分钟</li>
<li>session.gc_probability &#x3D; 1 垃圾回收概率因子(分子)</li>
<li>session.gc_divisor     &#x3D; 1000 垃圾回收概率分母</li>
</ol>
<h2 id="缩略图"><a href="#缩略图" class="headerlink" title="缩略图"></a>缩略图</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Thumbnail</span>(<span class="hljs-params"><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-variable">$d_w</span> = <span class="hljs-number">100</span>, <span class="hljs-variable">$d_h</span> = <span class="hljs-number">50</span></span>)</span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFrom</span>(<span class="hljs-params"><span class="hljs-variable">$file</span></span>)</span>&#123;<br>        <span class="hljs-variable">$info</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file</span>);<br>        <span class="hljs-comment">//var_dump($info);</span><br>        <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$info</span>[<span class="hljs-string">&#x27;mime&#x27;</span>]) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/png&#x27;</span>:<br>                <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefrompng</span>(<span class="hljs-variable">$file</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/jepg&#x27;</span>:<br>                <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromjepg</span>(<span class="hljs-variable">$file</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;image/gif&#x27;</span>:<br>                <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatefromgif</span>(<span class="hljs-variable">$file</span>);<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$img</span>;<br>    &#125;<br><br>    <span class="hljs-variable">$img_bg</span> = <span class="hljs-title function_ invoke__">imagecreatetruecolor</span>(<span class="hljs-variable">$d_w</span>,<span class="hljs-variable">$d_h</span>);<span class="hljs-comment">//底图</span><br>    <span class="hljs-comment">//填充颜色</span><br>    <span class="hljs-variable">$bg</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img_bg</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>);<br>    <span class="hljs-title function_ invoke__">imagefill</span>(<span class="hljs-variable">$img_bg</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$bg</span>);<br><br>    <span class="hljs-comment">//获取原图信息</span><br>    <span class="hljs-variable">$info_src</span> = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$file</span>);<br>    <span class="hljs-variable">$s_w</span> = <span class="hljs-variable">$info_src</span>[<span class="hljs-number">0</span>];<br>    <span class="hljs-variable">$s_h</span> = <span class="hljs-variable">$info_src</span>[<span class="hljs-number">1</span>];<br>    <span class="hljs-variable">$img_src</span> = <span class="hljs-title function_ invoke__">createFrom</span>(<span class="hljs-variable">$file</span>);<br><br>    <span class="hljs-variable">$f_h</span> = <span class="hljs-variable">$d_h</span>;<span class="hljs-comment">//缩略图高度</span><br>    <span class="hljs-variable">$f_w</span> = (<span class="hljs-variable">$s_w</span> / <span class="hljs-variable">$s_h</span>) * <span class="hljs-variable">$f_h</span>;<span class="hljs-comment">//缩略图宽度  原图高度乘以缩放比例</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$f_w</span> &gt; <span class="hljs-variable">$d_w</span>)&#123;<br>        <span class="hljs-variable">$f_w</span> = <span class="hljs-variable">$d_w</span>;<br>        <span class="hljs-variable">$f_h</span> = <span class="hljs-variable">$f_w</span> * <span class="hljs-variable">$s_h</span> / <span class="hljs-variable">$s_w</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//位置居中</span><br>    <span class="hljs-variable">$pos_x</span> = (<span class="hljs-variable">$d_w</span> - <span class="hljs-variable">$f_w</span>) / <span class="hljs-number">2</span>;<br>    <span class="hljs-variable">$pos_y</span> = (<span class="hljs-variable">$d_h</span> - <span class="hljs-variable">$f_h</span>) / <span class="hljs-number">2</span>;<br><br>    <span class="hljs-title function_ invoke__">imagecopyresampled</span>(<span class="hljs-variable">$img_bg</span>,<span class="hljs-variable">$img_src</span>,<span class="hljs-variable">$pos_x</span>,<span class="hljs-variable">$pos_y</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>, <span class="hljs-variable">$f_w</span>,<span class="hljs-variable">$f_h</span>,<span class="hljs-variable">$s_w</span>,<span class="hljs-variable">$s_h</span>);<br><br>    <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;content-type:image/png&#x27;</span>);<br>    <span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$img_bg</span>);<br><br>&#125;<br><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;../public/xadmin/images/bg.png&#x27;</span>;<br><span class="hljs-variable">$w</span> = <span class="hljs-number">200</span>;<br><span class="hljs-variable">$h</span> = <span class="hljs-number">200</span>;<br><span class="hljs-title function_ invoke__">Thumbnail</span>(<span class="hljs-variable">$file</span>,<span class="hljs-variable">$w</span>,<span class="hljs-variable">$h</span>);<br><br></code></pre></td></tr></table></figure>
<h2 id="面相对象"><a href="#面相对象" class="headerlink" title="面相对象"></a>面相对象</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//创建类</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$name</span> = <span class="hljs-string">&#x27;garywang&#x27;</span>;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$age</span> = <span class="hljs-number">30</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;<span class="hljs-subst">&#123;$this-&gt;name&#125;</span>的年龄是<span class="hljs-subst">&#123;$this-&gt;age&#125;</span>岁&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//实例化(创建对象)</span><br><span class="hljs-variable">$obj1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>;<br><span class="hljs-variable">$obj2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br><span class="hljs-variable">$obj3</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-variable">$arg1</span>,<span class="hljs-variable">$arg2</span>);<br><br></code></pre></td></tr></table></figure>
<h3 id="访问对象的属性和方法"><a href="#访问对象的属性和方法" class="headerlink" title="访问对象的属性和方法"></a>访问对象的属性和方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$obj</span>-&gt;name;<br><span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">showInfo</span>();<br></code></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br><span class="hljs-variable">$obj</span>-&gt;city = <span class="hljs-string">&#x27;北京&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;pre&gt;&#x27;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$obj</span>);<br><span class="hljs-keyword">unset</span>(<span class="hljs-variable">$obj</span>-&gt;city);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$obj</span>);<br></code></pre></td></tr></table></figure>

<h3 id="类常量"><a href="#类常量" class="headerlink" title="类常量"></a>类常量</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>&#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">Db_name</span> = <span class="hljs-string">&#x27;root&#x27;</span>;<br>    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">Db_pwd</span>  = <span class="hljs-string">&#x27;123456&#x27;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;用户名&quot;</span>.<span class="hljs-title class_">Student</span>::<span class="hljs-variable constant_">Db_name</span>;<br>        <span class="hljs-variable">$str</span> .=<span class="hljs-string">&quot;密码&quot;</span>.<span class="hljs-title class_">Student</span>::<span class="hljs-variable constant_">Db_pwd</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br><br>&#125;<br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">show</span>();<br><br></code></pre></td></tr></table></figure>
<h3 id="self-关键字"><a href="#self-关键字" class="headerlink" title="self 关键字"></a>self 关键字</h3><ol>
<li>$this代表当前对象,self代表当前类</li>
<li>$this用来调用对象中的东西(成员属性成员方法);</li>
<li>self用来调用类的东西(类常量,静态属性,静态方法);</li>
<li>$this使用箭头(-&gt;)</li>
<li>self使用(::)</li>
<li>$this只能在成员方法中使用,self可以用在成员方法,静态方法中.</li>
</ol>
<h2 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h2><ol>
<li>自动调用</li>
<li>名称固定 __construct()</li>
<li>可以有参数也可以没参数</li>
<li>new后括号直接传参数</li>
<li>作用:对象初始化.给私有属性赋值,数据库对象初始化(连通,选择数据库)</li>
<li>构造方法只有一个</li>
<li>可有可无</li>
<li>一定是成员方法</li>
<li>没有返回值,不要使用return语句</li>
<li></li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mobile</span></span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$name</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$brand</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$city</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$price</span>;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;name;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;brand;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;city;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;price;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>, <span class="hljs-variable">$brand</span>, <span class="hljs-variable">$city</span>, <span class="hljs-variable">$price</span></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-variable">$name</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;brand = <span class="hljs-variable">$brand</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;city = <span class="hljs-variable">$city</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt; price = <span class="hljs-variable">$price</span>;<br>    &#125;<br>&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mobile</span>(<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">showInfo</span>());<br></code></pre></td></tr></table></figure>

<h3 id="析构方法"><a href="#析构方法" class="headerlink" title="析构方法"></a>析构方法</h3><ol>
<li>销毁一个对象前,自动调用</li>
<li>名称是固定的 __destruct()</li>
<li>一定没有参数,一定是成员中方法</li>
<li>作用 垃圾回收  例如:断开数据库连接,在线人数</li>
</ol>
<ul>
<li>网页执行完毕,自动销毁</li>
<li>手动销毁</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span>&#123;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="三大特性"><a href="#三大特性" class="headerlink" title="三大特性"></a>三大特性</h2><ol>
<li>封装</li>
<li>继承</li>
<li>多态</li>
</ol>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span></span>&#123;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMPANY</span> = <span class="hljs-string">&#x27;一本好书&#x27;</span>;     <span class="hljs-comment">//常量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$counter</span> = <span class="hljs-number">0</span>;   <span class="hljs-comment">//静态变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$name</span>    = <span class="hljs-string">&#x27;&#x27;</span>;         <span class="hljs-comment">//类变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$prize</span>   = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$author</span>  = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$publish</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$arr</span></span>)</span>&#123;<span class="hljs-comment">//构造函数</span><br>        <span class="hljs-variable language_">$this</span>-&gt; name    = <span class="hljs-variable">$arr</span>[<span class="hljs-string">&quot;name&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; prize   = <span class="hljs-variable">$arr</span>[<span class="hljs-string">&quot;prize&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; author  = <span class="hljs-variable">$arr</span>[<span class="hljs-string">&quot;author&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; publish = <span class="hljs-variable">$arr</span>[<span class="hljs-string">&quot;publish&quot;</span>];<br>        <span class="hljs-built_in">self</span>:: <span class="hljs-variable">$counter</span>++;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-comment">//析构函数</span><br>        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement __destruct() method.</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-comment">//类函数</span><br>        <span class="hljs-variable">$str</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;当前分类:&#x27;</span>.<span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">COMPANY</span>.<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;书籍名称:&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;name.<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;书籍价格:&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;prize.<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;书籍作者:&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;author.<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;出版商:&#x27;</span>.<span class="hljs-variable language_">$this</span>-&gt;publish.<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&#x27;书籍总数:&#x27;</span>.<span class="hljs-built_in">self</span>::<span class="hljs-variable">$counter</span>.<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">showLine</span>();<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showLine</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-comment">//静态函数</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;hr /&gt;&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-variable">$obj1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>([<span class="hljs-string">&#x27;name&#x27;</span>=&gt;<span class="hljs-string">&#x27;php入门&#x27;</span>,<span class="hljs-string">&#x27;prize&#x27;</span>=&gt;<span class="hljs-string">&#x27;888&#x27;</span>,<span class="hljs-string">&#x27;author&#x27;</span>=&gt;<span class="hljs-string">&#x27;lilei&#x27;</span>,<span class="hljs-string">&#x27;publish&#x27;</span>=&gt;<span class="hljs-string">&#x27;人民出版社&#x27;</span>]);<br><span class="hljs-variable">$obj2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>([<span class="hljs-string">&#x27;name&#x27;</span>=&gt;<span class="hljs-string">&#x27;javascript入门&#x27;</span>,<span class="hljs-string">&#x27;prize&#x27;</span>=&gt;<span class="hljs-string">&#x27;666&#x27;</span>,<span class="hljs-string">&#x27;author&#x27;</span>=&gt;<span class="hljs-string">&#x27;hanmeimei&#x27;</span>,<span class="hljs-string">&#x27;publish&#x27;</span>=&gt;<span class="hljs-string">&#x27;上海邮电出版社&#x27;</span>]);<br><span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$obj1</span>-&gt;<span class="hljs-title function_ invoke__">showInfo</span>());<br><span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$obj2</span>-&gt;<span class="hljs-title function_ invoke__">showInfo</span>());<br><br></code></pre></td></tr></table></figure>
<h2 id="封装数据库连接类"><a href="#封装数据库连接类" class="headerlink" title="封装数据库连接类"></a>封装数据库连接类</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Db</span></span>&#123;<br>    <span class="hljs-comment">//数据库连接参数</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_host</span>     = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_user</span>     = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_pwd</span>      = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_database</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_charset</span>  = <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_link</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$host</span>,<span class="hljs-variable">$user</span>,<span class="hljs-variable">$pwd</span>,<span class="hljs-variable">$database</span>=<span class="hljs-string">&#x27;&#x27;</span></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_host     = <span class="hljs-variable">$host</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_user     = <span class="hljs-variable">$user</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_pwd      = <span class="hljs-variable">$pwd</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_database = <span class="hljs-variable">$database</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span>&#123;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">conn</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_link = <span class="hljs-title function_ invoke__">mysqli_connect</span>(<span class="hljs-variable">$this</span>-&gt;db_host, <span class="hljs-variable">$this</span>-&gt;db_user, <span class="hljs-variable">$this</span>-&gt;db_pwd, <span class="hljs-variable">$this</span>-&gt;db_database);<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;db_link;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unConn</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_link-&gt;<span class="hljs-title function_ invoke__">close</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$con</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">DB</span>(<span class="hljs-string">&#x27;localhost&#x27;</span>,<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;123456&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-variable">$con</span>-&gt;<span class="hljs-title function_ invoke__">conn</span>();<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$con</span>);<br><span class="hljs-variable">$con</span>-&gt;<span class="hljs-title function_ invoke__">unConn</span>(<span class="hljs-variable">$con</span>);<br></code></pre></td></tr></table></figure>
<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Db</span></span>&#123;<br>    <span class="hljs-comment">//数据库连接参数</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_host</span>     = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_user</span>     = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_pwd</span>      = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_database</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_charset</span>  = <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_link</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$host</span>,<span class="hljs-variable">$user</span>,<span class="hljs-variable">$pwd</span>,<span class="hljs-variable">$database</span>=<span class="hljs-string">&#x27;&#x27;</span></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_host     = <span class="hljs-variable">$host</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_user     = <span class="hljs-variable">$user</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_pwd      = <span class="hljs-variable">$pwd</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_database = <span class="hljs-variable">$database</span>;<br><br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">connDb</span>();<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">selectCharset</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connDb</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_link = @<span class="hljs-title function_ invoke__">mysqli_connect</span>(<span class="hljs-variable">$this</span>-&gt;db_host, <span class="hljs-variable">$this</span>-&gt;db_user, <span class="hljs-variable">$this</span>-&gt;db_pwd);<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">$this</span>-&gt;db_link)&#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数据库连接失败!&quot;</span>;<br>            <span class="hljs-keyword">die</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectCharset</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-title function_ invoke__">mysqli_query</span>(<span class="hljs-variable">$this</span>-&gt;db_link,<span class="hljs-string">&#x27;set names &#x27;</span>.<span class="hljs-variable">$this</span>-&gt;db_charset);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unConn</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;db_link-&gt;<span class="hljs-title function_ invoke__">close</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$con</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">DB</span>(<span class="hljs-string">&#x27;localhost&#x27;</span>,<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;123456&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$con</span>);<br></code></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Classic</span></span>&#123;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LIBRARY</span> = <span class="hljs-string">&#x27;尚美&#x27;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$name</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$prize</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$publish</span> = <span class="hljs-string">&#x27;人民出版社&#x27;</span>;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>,<span class="hljs-variable">$prize</span></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;name  = <span class="hljs-variable">$name</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;prize = <span class="hljs-variable">$prize</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&quot;书籍名称:&quot;</span>.<span class="hljs-variable language_">$this</span>-&gt;name;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&quot;&lt;br /&gt;书籍价格:&quot;</span>.<span class="hljs-variable language_">$this</span>-&gt;prize;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&quot;&lt;br /&gt;出版商:&quot;</span>.<span class="hljs-built_in">self</span>::<span class="hljs-variable">$publish</span>;<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&quot;&lt;br /&gt;书籍分类:&quot;</span>.<span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">LIBRARY</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Children</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Classic</span></span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$author</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>, <span class="hljs-variable">$prize</span>,<span class="hljs-variable">$author</span></span>)</span>&#123;<br>        <span class="hljs-built_in">parent</span>::<span class="hljs-title function_ invoke__">__construct</span>(<span class="hljs-variable">$name</span>, <span class="hljs-variable">$prize</span>);<br>        <span class="hljs-variable language_">$this</span>-&gt;author = <span class="hljs-variable">$author</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-built_in">parent</span>::<span class="hljs-title function_ invoke__">showInfo</span>();<br>        <span class="hljs-variable">$str</span> .= <span class="hljs-string">&quot;&lt;br /&gt;书籍作者:&quot;</span>.<span class="hljs-variable language_">$this</span>-&gt;author;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>        <span class="hljs-comment">//return parent::showInfo(); // <span class="hljs-doctag">TODO:</span> Change the autogenerated stub</span><br>    &#125;<br>&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Children</span>(<span class="hljs-string">&#x27;html&#x27;</span>,<span class="hljs-number">666</span>,<span class="hljs-string">&#x27;garywang&#x27;</span>);<br><span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">showInfo</span>());<br></code></pre></td></tr></table></figure>

<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><ol>
<li>接口也是子类中方法的命名规范</li>
<li>接口就是特殊的抽象类</li>
<li>interface 关键字,用来声明一个接口,接口是一种特殊类</li>
<li>implements关键字,创建一个子类,来实现接口</li>
<li>同类的东西,使用extends来继承;不同类,使用implements来继承</li>
<li>接口中只能存在两种东西:类常量,抽象方法</li>
<li>接口中方法默认都是抽象方法,因此不需要加abstract</li>
<li>接口中方法的权限,必须是public;</li>
<li>接口中方法,可以是成员方法,也可以是静态方法</li>
<li>接口中所有的抽象方法,在子类中必须要重写</li>
<li>接口中常量不能重写,只能继承</li>
<li>php中的重写,不一定是方法重写,还可以是常量重写,静态属性重写,静态方法重写</li>
</ol>
<h3 id="封装-1"><a href="#封装-1" class="headerlink" title="封装"></a>封装</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//接口1</span><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Inter1</span></span>&#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TITLE</span> = <span class="hljs-string">&#x27;尚美&#x27;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"><span class="hljs-variable">$a</span>,<span class="hljs-variable">$b</span></span>)</span>;<br>&#125;<br><span class="hljs-comment">//接口2</span><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Inter2</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readMe</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br><span class="hljs-comment">//抽象类继承接口1和接口2</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Inter1</span>,<span class="hljs-title">Inter2</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>,<span class="hljs-variable">$age</span></span>)</span>&#123;<br>        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement showInfo() method.</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readMe</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement readMe() method.</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//实例化抽象类</span><br><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ItcastStudent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Student</span></span>&#123;<br><br>&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ItcastStudent</span>();<br></code></pre></td></tr></table></figure>
<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">XiaoLingTong</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tel</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Mp3</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">music</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Mp4</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Mp3</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">video</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Moblie1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">XiaoLingTong</span>,<span class="hljs-title">Mp4</span></span>&#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tel</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;打电话&lt;br /&gt;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">music</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;听音乐&lt;br /&gt;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">video</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;看视频&lt;br /&gt;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">play</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;玩游戏&lt;br /&gt;&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Moblie1</span>();<br><span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">tel</span>();<br><span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">music</span>();<br><span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">video</span>();<br><span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">play</span>();<br></code></pre></td></tr></table></figure>

<h2 id="类的自动加载"><a href="#类的自动加载" class="headerlink" title="类的自动加载"></a>类的自动加载</h2><ol>
<li>__autoload() 系统函数 名称是固定的</li>
<li>需要定义函数的内容</li>
<li>唯一参数,类名参数</li>
<li>当使用一个不存在的类时,__autoload()会自动调用<ul>
<li>当使用new关键字创建一个对象时 new student()</li>
<li>当使用静态化方式调用 Student::getCode()</li>
<li>当继承一个不存在的父类 class ItcastStudent extends Student{}</li>
<li>当实现一个不存在的接口类时 class Student implements Inter{}</li>
</ul>
</li>
</ol>
<p>函数的内容包含两方面:</p>
<ol>
<li>构建类文件真实路径</li>
<li>判断并包含类文件代码</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__autoload</span>(<span class="hljs-params"><span class="hljs-variable">$className</span></span>)</span>&#123;<br>    <span class="hljs-variable">$filename</span> = <span class="hljs-string">&quot;./libs/<span class="hljs-subst">$className</span>.class.php&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">file_exists</span>(<span class="hljs-variable">$filename</span>)) <span class="hljs-keyword">require_once</span>(<span class="hljs-variable">$filename</span>);<br>&#125;<br><br><br><br></code></pre></td></tr></table></figure>

<h3 id="自定义类文件加载函数"><a href="#自定义类文件加载函数" class="headerlink" title="自定义类文件加载函数"></a>自定义类文件加载函数</h3><ol>
<li>spl_autoload_register(func)</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">spl_autoload_register</span>(<span class="hljs-string">&#x27;fun1&#x27;</span>);<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fun1</span>(<span class="hljs-params"><span class="hljs-variable">$className</span></span>)</span>&#123;<br>    <span class="hljs-variable">$filename</span> = <span class="hljs-string">&quot;./libs/<span class="hljs-subst">$className</span>.class.php&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">file_exists</span>(<span class="hljs-variable">$filename</span>)) <span class="hljs-keyword">require_once</span>(<span class="hljs-variable">$filename</span>);<br>&#125;<br><span class="hljs-title function_ invoke__">spl_autoload_register</span>(<span class="hljs-string">&#x27;fun2&#x27;</span>);<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fun2</span>(<span class="hljs-params"><span class="hljs-variable">$className</span></span>)</span>&#123;<br>    <span class="hljs-variable">$filename</span> = <span class="hljs-string">&quot;./public/<span class="hljs-subst">$className</span>.class.php&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">file_exists</span>(<span class="hljs-variable">$filename</span>)) <span class="hljs-keyword">require_once</span>(<span class="hljs-variable">$filename</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">spl_autoload_register</span>(function(<span class="hljs-variable">$className</span>)&#123;<br>    <span class="hljs-variable">$arr</span> = <span class="hljs-keyword">array</span>([<br>        <span class="hljs-string">&#x27;./libs/$className.class.php&#x27;</span>,<br>        <span class="hljs-string">&quot;./public/<span class="hljs-subst">$className</span>.class.php&quot;</span><br>    ]);<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$arr</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$filename</span>)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">file_exists</span>(<span class="hljs-variable">$filename</span>))&#123;<br>            <span class="hljs-keyword">require_once</span>(<span class="hljs-variable">$filename</span>);<br>        &#125;;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="魔术方法"><a href="#魔术方法" class="headerlink" title="魔术方法"></a>魔术方法</h2><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="__toString()"></a>__toString()</h3><p><code>将对象转成字符串时,魔术方法__toString会自动调用</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;content-type:text/html;charset=utf-8&#x27;</span>);<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;不能转换成字符串!&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>;<br></code></pre></td></tr></table></figure>
<h3 id="invoke"><a href="#invoke" class="headerlink" title="__invoke()"></a>__invoke()</h3><p><code>当把对象当成函数调用时,魔术方法__invoke()会执行</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;对象不能当成函数调用!&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>();<br></code></pre></td></tr></table></figure>
<h3 id="clone"><a href="#clone" class="headerlink" title="__clone()"></a>__clone()</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>&#123;&#125;<br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>;<br><span class="hljs-variable">$obj1</span> = <span class="hljs-keyword">clone</span> <span class="hljs-variable">$obj</span>;<br></code></pre></td></tr></table></figure>

<h2 id="对象设计模式"><a href="#对象设计模式" class="headerlink" title="对象设计模式"></a>对象设计模式</h2><h3 id="111"><a href="#111" class="headerlink" title="111"></a>111</h3><ul>
<li>面相对象代码设计经验的总结</li>
<li>可以实现代码重用,节省时间,利于后期维护</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><br></code></pre></td></tr></table></figure>
<h3 id="常用的设计模式"><a href="#常用的设计模式" class="headerlink" title="常用的设计模式"></a>常用的设计模式</h3><ul>
<li>单例模式： 一个类只能创建一个对象,不论什么办法,都不能创建第二个对象</li>
<li>工厂模式：根据传递的不同类名，来创建不同类的对象的工厂</li>
</ul>
<h3 id="单例设计的要求（三私一公）"><a href="#单例设计的要求（三私一公）" class="headerlink" title="单例设计的要求（三私一公）"></a>单例设计的要求（三私一公）</h3><ul>
<li>一私：私有的静态的保存对象的属性；</li>
<li>二私：私有的构造方法，阻止类外new对象；</li>
<li>三私：私有的克隆方法，阻止类外clone方法</li>
<li>一公：公共的静态的创建对象的方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Db</span></span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$obj</span> = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__clone</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInstanceof</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">self</span>)&#123;<br>            <span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">self</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$obj1</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">getInstanceof</span>();<br><span class="hljs-variable">$obj2</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">getInstanceof</span>();<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$obj1</span>,<span class="hljs-variable">$obj2</span>);<br><br></code></pre></td></tr></table></figure>

<h3 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h3><p><code>判断一个对象是否是某个类的对象</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$obj</span> <span class="hljs-keyword">instanceof</span> ClassName<br></code></pre></td></tr></table></figure>

<h2 id="对象设计模式-1"><a href="#对象设计模式-1" class="headerlink" title="对象设计模式"></a>对象设计模式</h2><h3 id="111-1"><a href="#111-1" class="headerlink" title="111"></a>111</h3><ul>
<li>面相对象代码设计经验的总结</li>
<li>可以实现代码重用,节省时间,利于后期维护</li>
</ul>
<h3 id="常用的设计模式-1"><a href="#常用的设计模式-1" class="headerlink" title="常用的设计模式"></a>常用的设计模式</h3><ul>
<li>单例模式： 一个类只能创建一个对象,不论什么办法,都不能创建第二个对象</li>
<li>工厂模式：根据传递的不同类名，来创建不同类的对象的工厂</li>
</ul>
<h3 id="单例设计的要求（三私一公）-1"><a href="#单例设计的要求（三私一公）-1" class="headerlink" title="单例设计的要求（三私一公）"></a>单例设计的要求（三私一公）</h3><ul>
<li>一私：私有的静态的保存对象的属性；</li>
<li>二私：私有的构造方法，阻止类外new对象；</li>
<li>三私：私有的克隆方法，阻止类外clone方法</li>
<li>一公：公共的静态的创建对象的方法</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Db</span></span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$obj</span> = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__clone</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInstanceof</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">self</span>)&#123;<br>            <span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">self</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$obj1</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">getInstanceof</span>();<br><span class="hljs-variable">$obj2</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">getInstanceof</span>();<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$obj1</span>,<span class="hljs-variable">$obj2</span>);<br><br></code></pre></td></tr></table></figure>


<h3 id="instanceof-1"><a href="#instanceof-1" class="headerlink" title="instanceof"></a>instanceof</h3><p><code>判断一个对象是否是某个类的对象</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$obj</span> <span class="hljs-keyword">instanceof</span> ClassName<br></code></pre></td></tr></table></figure>
<h3 id="单例模式操作数据库完整代码"><a href="#单例模式操作数据库完整代码" class="headerlink" title="单例模式操作数据库完整代码"></a>单例模式操作数据库完整代码</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Db</span></span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_host</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_user</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_pass</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db_name</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$charset</span> = <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$obj</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$conn</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$config</span></span>) </span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt; db_host = <span class="hljs-variable">$config</span>[<span class="hljs-string">&quot;db_host&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; db_user = <span class="hljs-variable">$config</span>[<span class="hljs-string">&quot;db_user&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; db_pass = <span class="hljs-variable">$config</span>[<span class="hljs-string">&quot;db_pass&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; db_name = <span class="hljs-variable">$config</span>[<span class="hljs-string">&quot;db_name&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt; charset = <span class="hljs-variable">$config</span>[<span class="hljs-string">&quot;charset&quot;</span>];<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">connDb</span>();<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">setCharset</span>();<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">selectDb</span>();<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__clone</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<br>    <span class="hljs-comment">//创建对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInstance</span>(<span class="hljs-params"><span class="hljs-variable">$arr</span></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">self</span>)&#123;<br>            <span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">self</span>(<span class="hljs-variable">$arr</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">self</span>::<span class="hljs-variable">$obj</span>;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connDb</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">self</span>::<span class="hljs-variable">$conn</span> = @<span class="hljs-title function_ invoke__">mysqli_connect</span>(<span class="hljs-variable">$this</span>-&gt;db_host, <span class="hljs-variable">$this</span>-&gt;db_user, <span class="hljs-variable">$this</span>-&gt;db_pass);<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">self</span>::<span class="hljs-variable">$conn</span>)&#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;数据库连接失败&#x27;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setCharset</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">mysqli_query</span>(<span class="hljs-built_in">self</span>::<span class="hljs-variable">$conn</span>,<span class="hljs-string">&quot;set names &quot;</span>.<span class="hljs-variable">$this</span>-&gt;charset))&#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;设置字符集失败&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectDb</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">mysqli_select_db</span>(<span class="hljs-built_in">self</span>::<span class="hljs-variable">$conn</span>,<span class="hljs-variable">$this</span>-&gt;db_name))&#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;选择数据库失败&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//增删改</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exec</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$query</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>) == <span class="hljs-string">&quot;select&quot;</span>)&#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;此语句不能执行查询操作！&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">mysqli_query</span>(<span class="hljs-built_in">self</span>::<span class="hljs-variable">$conn</span>,<span class="hljs-variable">$query</span>);<br>    &#125;<br>    <span class="hljs-comment">//查询一条</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchOne</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$query</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>) == <span class="hljs-string">&quot;select&quot;</span>)&#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;此语句不能执行非查询操作！&quot;</span>);<br>        &#125;<br>        <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">mysqli_query</span>(<span class="hljs-built_in">self</span>:: <span class="hljs-variable">$conn</span>, <span class="hljs-variable">$query</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">mysqli_fetch_row</span>(<span class="hljs-variable">$result</span>);<br>    &#125;<br>    <span class="hljs-comment">//查询多条</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchAll</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$query</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>) == <span class="hljs-string">&quot;select&quot;</span>)&#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;此语句不能执行非查询操作！&quot;</span>);<br>        &#125;<br>        <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">mysqli_query</span>(<span class="hljs-built_in">self</span>:: <span class="hljs-variable">$conn</span>, <span class="hljs-variable">$query</span>);<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-title function_ invoke__">mysqli_fetch_all</span>(<span class="hljs-variable">$result</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span>=&gt;<span class="hljs-variable">$v</span>)&#123;<br>            <span class="hljs-variable">$arr</span>[<span class="hljs-variable">$k</span>] = <span class="hljs-variable">$v</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$arr</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connColse</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-title function_ invoke__">mysqli_close</span>(<span class="hljs-built_in">self</span>::<span class="hljs-variable">$conn</span>);<br>    &#125;<br>&#125;<br><span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">getInstance</span>([<span class="hljs-string">&#x27;db_host&#x27;</span>=&gt;<span class="hljs-string">&#x27;localhost&#x27;</span>,<span class="hljs-string">&#x27;db_user&#x27;</span>=&gt;<span class="hljs-string">&#x27;root&#x27;</span>,<span class="hljs-string">&#x27;db_pass&#x27;</span>=&gt;<span class="hljs-string">&#x27;123456&#x27;</span>,<span class="hljs-string">&#x27;db_name&#x27;</span>=&gt;<span class="hljs-string">&#x27;test&#x27;</span>,<span class="hljs-string">&#x27;charset&#x27;</span>=&gt;<span class="hljs-string">&#x27;utf8&#x27;</span>]);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;hr&gt;&#x27;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">exec</span>(<span class="hljs-string">&quot;insert into news values(default,&#x27;aaaaaaa&#x27;,&#x27;2&#x27;,&#x27;3&#x27;,&#x27;1111&#x27;,&#x27;sdfsdgdfgdsfg&#x27;)&quot;</span>));<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;hr&gt;&#x27;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">fetchOne</span>(<span class="hljs-string">&#x27;select * from news where id = 2&#x27;</span>));<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;hr&gt;&#x27;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">fetchAll</span>(<span class="hljs-string">&#x27;select * from news group by id desc&#x27;</span>));<br><span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">connColse</span>();<br></code></pre></td></tr></table></figure>

















































































































































        </div>
    </article>
    <div class="w300 m-l-15 fixed-item-right">
        <div class="hot-list">
    <div class="f14 hot-list-title">推荐阅读</div>
    <ul>
        
            <li>
                <a href="/2024/02/01/iphone%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4%E5%BC%80%E5%8F%91.html">iphone快捷指令开发</a>
                <p>2024-02-01</p>
            </li>
        
            <li>
                <a href="/2023/05/15/nvm-node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86.html">nvm node版本管理</a>
                <p>2023-05-15</p>
            </li>
        
            <li>
                <a href="/2023/11/22/koa2%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81html%E7%AD%89%E8%B5%84%E6%BA%90.html">koa加载静态html等资源</a>
                <p>2023-11-22</p>
            </li>
        
            <li>
                <a href="/2024/07/11/axios%E6%B7%BB%E5%8A%A0%E6%8B%A6%E6%88%AA%E5%99%A8.html">axios添加拦截器</a>
                <p>2024-07-11</p>
            </li>
        
            <li>
                <a href="/2023/07/07/AI-bingai%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2.html">bingai聊天机器人开源项目部署</a>
                <p>2023-07-07</p>
            </li>
        
    </ul>
    <!-- <ul>
        
            <li>
                <a href="/2024/02/01/iphone%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4%E5%BC%80%E5%8F%91.html">iphone快捷指令开发</a>
                <p>2024-02-01</p>
            </li>
        
            <li>
                <a href="/2023/05/15/nvm-node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86.html">nvm node版本管理</a>
                <p>2023-05-15</p>
            </li>
        
            <li>
                <a href="/2023/11/22/koa2%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81html%E7%AD%89%E8%B5%84%E6%BA%90.html">koa加载静态html等资源</a>
                <p>2023-11-22</p>
            </li>
        
            <li>
                <a href="/2024/07/11/axios%E6%B7%BB%E5%8A%A0%E6%8B%A6%E6%88%AA%E5%99%A8.html">axios添加拦截器</a>
                <p>2024-07-11</p>
            </li>
        
            <li>
                <a href="/2023/07/07/AI-bingai%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2.html">bingai聊天机器人开源项目部署</a>
                <p>2023-07-07</p>
            </li>
        
    </ul> -->
</div>
        <div class="m-t-15"></div>
        <div class="tag-list">
    <div class="f14 tag-list-title">标签列表</div>
    <div class="flex flex-wrap flex-jus-start flex-item-start tag-list-content">
        
            <a href="/tag/%E7%BD%91%E8%B5%9A/">网赚(46)</a>
        
            <a href="/tag/%E7%8E%84%E5%AD%A6/">玄学(2)</a>
        
            <a href="/tag/ai/">AI(7)</a>
        
            <a href="/tag/chatgpt/">chatgpt(2)</a>
        
            <a href="/tag/js/">js(125)</a>
        
            <a href="/tag/ffmpeg/">ffmpeg(6)</a>
        
            <a href="/tag/hexo/">Hexo(4)</a>
        
            <a href="/tag/canvas/">canvas(5)</a>
        
            <a href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库(7)</a>
        
            <a href="/tag/paddledetection/">PaddleDetection(4)</a>
        
            <a href="/tag/stablediffusion/">StableDiffusion(5)</a>
        
            <a href="/tag/stablediffusion/">stablediffusion(3)</a>
        
            <a href="/tag/linux/">linux(17)</a>
        
            <a href="/tag/ajax/">ajax(1)</a>
        
            <a href="/tag/astro/">astro(3)</a>
        
            <a href="/tag/axios/">axios(2)</a>
        
            <a href="/tag/bat/">bat(6)</a>
        
            <a href="/tag/node/">node(37)</a>
        
            <a href="/tag/dns/">dns(8)</a>
        
            <a href="/tag/css/">css(14)</a>
        
            <a href="/tag/cursor/">cursor(1)</a>
        
            <a href="/tag/go/">go(57)</a>
        
            <a href="/tag/docker/">docker(2)</a>
        
            <a href="/tag/echarts/">echarts(2)</a>
        
            <a href="/tag/charts/">charts(1)</a>
        
            <a href="/tag/electron/">electron(1)</a>
        
            <a href="/tag/git/">git(1)</a>
        
            <a href="/tag/vps/">vps(8)</a>
        
            <a href="/tag/html/">html(6)</a>
        
            <a href="/tag/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端(6)</a>
        
            <a href="/tag/vue/">vue(26)</a>
        
            <a href="/tag/jquery/">jquery(3)</a>
        
            <a href="/tag/video/">video(2)</a>
        
            <a href="/tag/websocket/">websocket(3)</a>
        
            <a href="/tag/nodejs/">nodejs(1)</a>
        
            <a href="/tag/%E5%8A%A0%E5%AF%86/">加密(1)</a>
        
            <a href="/tag/ios/">ios(2)</a>
        
            <a href="/tag/koa2/">koa2(8)</a>
        
            <a href="/tag/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/">测试环境(1)</a>
        
            <a href="/tag/%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/">视频处理(3)</a>
        
            <a href="/tag/%E7%BC%96%E8%BE%91%E5%99%A8/">编辑器(1)</a>
        
            <a href="/tag/markdown/">markdown(1)</a>
        
            <a href="/tag/sql/">sql(1)</a>
        
            <a href="/tag/nginx/">nginx(4)</a>
        
            <a href="/tag/vue3/">vue3(1)</a>
        
            <a href="/tag/express/">express(2)</a>
        
            <a href="/tag/mysql/">mysql(2)</a>
        
            <a href="/tag/ocr/">ocr(1)</a>
        
            <a href="/tag/%E7%88%AC%E8%99%AB/">爬虫(12)</a>
        
            <a href="/tag/nuxt/">nuxt(3)</a>
        
            <a href="/tag/npm/">npm(1)</a>
        
            <a href="/tag/php/">php(9)</a>
        
            <a href="/tag/pm2/">pm2(1)</a>
        
            <a href="/tag/python/">python(11)</a>
        
            <a href="/tag/%E7%BB%98%E5%9B%BE/">绘图(1)</a>
        
            <a href="/tag/react/">react(3)</a>
        
            <a href="/tag/svg/">svg(1)</a>
        
            <a href="/tag/threejs/">threejs(2)</a>
        
            <a href="/tag/tvbox/">tvbox(1)</a>
        
            <a href="/tag/typescript/">typescript(2)</a>
        
            <a href="/tag/demo/">Demo(1)</a>
        
            <a href="/tag/unity/">unity(1)</a>
        
            <a href="/tag/vscode/">vscode(1)</a>
        
            <a href="/tag/pinia/">pinia(1)</a>
        
            <a href="/tag/vue-router/">vue-router(1)</a>
        
            <a href="/tag/vuex/">vuex(1)</a>
        
            <a href="/tag/webpack/">webpack(2)</a>
        
            <a href="/tag/%E4%B8%AD%E5%8C%BB/">中医(13)</a>
        
            <a href="/tag/%E5%AE%B9%E5%99%A8/">容器(1)</a>
        
            <a href="/tag/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/">企业微信(1)</a>
        
            <a href="/tag/ollama/">ollama(1)</a>
        
            <a href="/tag/%E5%85%B6%E4%BB%96/">其他(6)</a>
        
            <a href="/tag/%E6%BF%80%E6%B4%BB%E7%A0%81/">激活码(1)</a>
        
            <a href="/tag/%E7%BE%8E%E9%A3%9F/">美食(3)</a>
        
            <a href="/tag/%E5%9B%BD%E5%AD%A6/">国学(6)</a>
        
            <a href="/tag/%E5%89%8D%E7%AB%AF/">前端(1)</a>
        
            <a href="/tag/%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/">加密解密(1)</a>
        
            <a href="/tag/%E5%B0%8F%E7%9A%AE/">小皮(1)</a>
        
            <a href="/tag/emoji/">emoji(2)</a>
        
            <a href="/tag/%E5%BE%AE%E4%BF%A1/">微信(3)</a>
        
            <a href="/tag/%E6%B1%89%E5%AD%97/">汉字(1)</a>
        
            <a href="/tag/date/">Date(1)</a>
        
            <a href="/tag/cookie/">cookie(1)</a>
        
            <a href="/tag/localstorage/">localStorage(1)</a>
        
            <a href="/tag/indexdb/">indexDB(1)</a>
        
            <a href="/tag/%E6%A8%A1%E6%9D%BF/">模板(1)</a>
        
            <a href="/tag/%E8%82%A1%E7%A5%A8/">股票(6)</a>
        
            <a href="/tag/json/">json(1)</a>
        
            <a href="/tag/ps/">PS(1)</a>
        
            <a href="/tag/%E8%AF%BB%E4%B9%A6%E4%BC%9A/">读书会(1)</a>
        
            <a href="/tag/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/">远程桌面(1)</a>
        
    </div>
</div>


    </div>
</div>
<script>
    // 文章全屏显示
    document.querySelector('#extend').addEventListener('click',function(){
        let ele = document.querySelector('.post-box').classList
        if(ele.value.includes('post-full')){
            ele.remove('post-full')
        }else{
            ele.add('post-full')
        }
    },false)
    function addCopyButtons() {
        // 获取所有代码块
        const codeBlocks = document.querySelectorAll('pre code');
        
        codeBlocks.forEach((codeBlock) => {
            // 创建复制按钮
            const copyButton = document.createElement('i');
            copyButton.className = 'copy-button fa fa-copy';
            
            // 查找最近的 .highlight 父元素
            const highlightBlock = codeBlock.closest('.highlight');
            if (highlightBlock) {
                highlightBlock.insertBefore(copyButton, highlightBlock.firstChild);
            }
            
            // 添加点击事件
            copyButton.addEventListener('click', () => {
                // 获取格式化的代码内容
                const code = codeBlock.innerText || codeBlock.textContent;
                
                // 使用 textarea 来保持文本格式
                const textarea = document.createElement('textarea');
                textarea.value = code;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    // 尝试使用新的 API
                    navigator.clipboard.writeText(code).then(() => {
                        copyButton.className = 'copy-button fa fa-check';
                        setTimeout(() => {
                            copyButton.className = 'copy-button fa fa-copy';
                        }, 2000);
                    });
                } catch (err) {
                    // 降级方案：使用 document.execCommand
                    document.execCommand('copy');
                    copyButton.className = 'copy-button fa fa-check';
                    setTimeout(() => {
                        copyButton.className = 'copy-button fa fa-copy';
                    }, 2000);
                }
                
                // 清理临时元素
                document.body.removeChild(textarea);
            });
        });
    }
    // 页面加载完成后添加复制按钮
document.addEventListener('DOMContentLoaded', addCopyButtons);

</script>
    </div>
    <footer>
    <div>
        copyright © 2024 Gary Wang 
    </div>
</footer>
    <div class="search-page animated">
    <div class="search-page-content">
        <i class="fa fa-times search-close"></i>
        <h1>内容搜索</h1>
        <form onsubmit="formSubmit(event)" class="search-page-form re">
            <input type="text" placeholder="查找" name="keyword" id="search-input" autocomplete="off">
            <button>
                <i class="fa fa-search"></i>
            </button>
        </form>
        <div class="search-page-result" id="search-result">
        </div>
    </div>
    <div class="search-page-bg"></div>
</div>
<script>
    //所有搜索数据
    let searchData = [];
    
    // 加载搜索数据
    fetch('/search.xml')
        .then(response => response.text())
        .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
        .then(data => {
            searchData = Array.from(data.getElementsByTagName('entry')).map(entry => ({
                title: entry.getElementsByTagName('title')[0].textContent,
                content: entry.getElementsByTagName('content')[0].textContent,
                url: entry.getElementsByTagName('url')[0].textContent
            }));
        });

    // 搜索功能实现
    function formSubmit(event) {
        event.preventDefault();
        // 搜索关键词
        const keyword = document.getElementById('search-input').value.toLowerCase();
        // 搜索结果
        const results = searchData.filter(item => 
            item.title.toLowerCase().includes(keyword) || item.content.toLowerCase().includes(keyword)
        );
        const resultDiv = document.getElementById('search-result');
        if(results.length === 0 || keyword === ''){
            resultDiv.innerHTML = '<div class="search-page-result-item t-c f13">没有找到相关内容</div>';
        }else{
            resultDiv.innerHTML = results.map(item => `
                <div class="search-page-result-item">
                    <a href="${item.url}">
                        <h5>${item.title}</h5>
                    </a>
                </div>
            `).join('');
        }
    }
    document.querySelector('.search-close').addEventListener('click',function(){
        hideSearchPage()
    })
</script>
    <!-- <div class="gotopage" id="gotopage">
        <i class="far fa-arrow-alt-circle-up"></i>
    </div> -->
    <script src="/assets/js/common.js"></script>
    <script src="/assets/js/func.js"></script>
    <script src="/assets/live2dw/lib/L2Dwidget.js"></script>
    <script>
        // 加载动画
        window.addEventListener('DOMContentLoaded',function(){
            setTimeout(function() {
                document.querySelector('.loading').style.display = 'none';
            },800)
        },false)
        
        /* 看板娘 */
        L2Dwidget.init({
            "pluginRootPath"  : "/assets/live2dw/",
            "pluginJsPath"	  : "/assets/live2dw/lib/",
            "pluginModelPath" : "/assets/live2dw/assets/",
            "tagMode"		  : false,
            "debug"			  : false,
            "model"			  : {
                "jsonPath" : "/assets/live2dw/assets/kesshouban.model.json"
            },
            "display" : {
                "position" : "right",
                "width"	   : 250,
                "height"   : 250,
                "hOffset"  : -70,
                "vOffset"  : 60
            },
            "dialog"	: {
                "enable" : true
            },
            "mobile"	: {
                "show" : true
            },
            "react"		: {
                "opacity" : 1
            },
            "log" : false
        });
        const addEvent = function(){
            const live2dWidget = document.getElementById('live2d-widget')
            setTimeout(function(){
                if(live2dWidget){
                    live2dWidget.addEventListener('click',function(e){
                        document.querySelector('.main').scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    })
                }else{
                    addEvent()
                }
            },1000)
        }
        addEvent()
    </script>
    <!-- Cloudflare Web Analytics -->
    <!-- <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "5bd3afcce7474fcdbf639fab1999e804"}'></script> -->
    <!-- End Cloudflare Web Analytics -->
    <!-- <script src='//unpkg.com/@waline/client/dist/waline.js'></script>
    <link href='//unpkg.com/@waline/client/dist/waline.css' rel='stylesheet'/> -->
</body>
</html>