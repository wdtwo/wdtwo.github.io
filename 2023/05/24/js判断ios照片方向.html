<!DOCTYPE html>
<html lang="zh-cn">
<head>
    	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
    <title>WDTWO Blog</title>
	<link href="/assets/css/style.css" rel="stylesheet" type="text/css">
	<link href="/assets/css/animate.css" rel="stylesheet" type="text/css">
	<link href="/assets/fontawesome-free-5.15.4-web/css/all.min.css" rel="stylesheet" type="text/css">
    
<meta name="generator" content="Hexo 7.3.0"></head>
<body class="light">

    <div class="loading flex">
        <div></div>
    </div>

    <!-- 调试信息 -->
    <!-- 
        <div style="background: #f0f0f0; padding: 10px; margin: 10px;">
            页面类型: post<br>
            页面路径: 2023/05/24/js判断ios照片方向.html<br>
            是否为文章页: true<br>
            是否为首页: false
        </div>
     -->
    <header class="flex flex-jus-between">
    <h1 class="header-title">
        <a href="/" class="header-title">
            WDTWO Blog
        </a>
    </h1>
    <div class="flex">
        <div class="menu-list animated">
            
                <a class="menu-item" href="/archives">目录</a>
            
                <a class="menu-item" href="/category">分类</a>
            
                <a class="menu-item" href="/tag">标签</a>
            
                <a class="menu-item" href="/static/mark/index.html">书签</a>
            
            <i class="fa fa-times mobile-close-menu"></i>
        </div>
        <i class="fa fa-search"></i>
        <i class="fa fa-bars mobile-menu"></i>
        <i class="fa fa-sun"></i>
        <i class="fa fa-moon"></i>
    </div>
</header>

<script>
    window.addEventListener('DOMContentLoaded',function(){
        // 搜索按钮点击事件
        document.querySelector('.fa-search').addEventListener('click',function(){
            showSearchPage()
        })
        document.querySelector('.search-page-bg').addEventListener('click',function(){
            hideSearchPage()
        })  
        // 显示菜单
        document.querySelector('.mobile-menu').addEventListener('click',function(){
            showMobileMenu()
        })
        document.querySelector('.mobile-close-menu').addEventListener('click',function(){
            hideMobileMenu()
        })
    })
</script>
    <div class="main">
        <!-- 添加 highlight.js 的样式 -->
<link rel="stylesheet" href="/assets/css/atom-one-dark-reasonable.css">
<link rel="stylesheet" href="/assets/css/markdown.css">
<div class="post-box flex flex-item-start">
    <article class="post">
        <i class="fa fa-bars extend" id="extend"></i>
        <h1 class="post-title t-c">js判断ios照片方向</h1>
        <div class="post-meta t-c flex">
            <!-- 作者 -->
            <div>
                <i class="fa fa-user c-purple"></i>
                Gary Wang
             </div>
            <div>
                <i class="fa fa-calendar c-orange"></i>
                2023-05-24
            </div>
            
                <div>
                    <i class="fa fa-folder c-yellow"></i>
                    <a class="archive-item-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
                </div>
            
            
                <div>
                    <i class="fa fa-tags c-green"></i>
                    <a class="archive-item-tag-none-link" href="/tag/ios/" rel="tag">ios</a>,<a class="archive-item-tag-none-link" href="/tag/js/" rel="tag">js</a>
                </div>
            
        </div>
        <hr class="line">
        <div class="post-content">
            <p>ios input file照片方向可能会导致旋转的问题</p>
<p>(项目地址)[<a target="_blank" rel="noopener" href="https://github.com/exif-js/exif-js]">https://github.com/exif-js/exif-js]</a></p>
<span id="more"></span>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- label绑定file被点击开始拍照 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;filebtn&quot;</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;position:absolute;left:0;top:0;background:rgba(255,0,0,.01);width:100%;height:100%;z-index:9999999;display:none;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br><span class="hljs-comment">&lt;!-- file调用摄像机拍照 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/jpeg&quot;</span> <span class="hljs-attr">capture</span>=<span class="hljs-string">&quot;camera&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none;&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/exif.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> [w,h] = [<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>,<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>]     <span class="hljs-comment">//获取浏览器的宽高</span><br><span class="hljs-keyword">let</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>() <span class="hljs-comment">//新建一个图片对象 存储导入的图片</span><br><span class="hljs-keyword">let</span> orientation = <span class="hljs-number">0</span>;<span class="hljs-comment">//存储照片的方向值 3 6 8</span><br><span class="hljs-comment">//inputfile改变事件 获取inputfile中的图片</span><br>$(<span class="hljs-string">&quot;#file&quot;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;change&#x27;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)&#123;<br>    <span class="hljs-comment">//读取图片</span><br>    <span class="hljs-keyword">var</span> file = event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];<br>    <span class="hljs-comment">//使用插件读取图片的详细信息</span><br>    <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-title function_">getData</span>(file, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> allTags = <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-title function_">getAllTags</span>(<span class="hljs-variable language_">this</span>);<br>        orientation = allTags.<span class="hljs-property">Orientation</span>;<br>        <span class="hljs-comment">//console.log(allTags,orientation)</span><br>        <span class="hljs-comment">//alert(orientation)  //照片方向</span><br>    &#125;)<br>    <span class="hljs-comment">//新建一个图片</span><br>    <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();<br>    reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-comment">//设置图片的src</span><br>        image.<span class="hljs-property">src</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span><br>        image.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-comment">//图片加载完成后走判断图片方向的方法</span><br>            <span class="hljs-title class_">SetImg</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>)<br>        &#125;<br>    &#125;;<br>    reader.<span class="hljs-title function_">readAsDataURL</span>(file); <br>&#125;)<br><span class="hljs-comment">//判断图片方形并上传图片</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">SetImg</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">var</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;canvas&quot;</span>);<br>    <span class="hljs-keyword">let</span> context = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>);<br>    <span class="hljs-comment">//设置高度是照片等比例缩小的值</span><br>    <span class="hljs-keyword">let</span> h = w / image.<span class="hljs-property">width</span> * image.<span class="hljs-property">height</span>; <br>    canvas.<span class="hljs-property">width</span> = w; <br>    canvas.<span class="hljs-property">height</span> = h<br>    <span class="hljs-comment">//alert(`$&#123;w&#125;----$&#123;h&#125;`)</span><br>    <span class="hljs-keyword">switch</span> (orientation) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">6</span> :<br>            <span class="hljs-comment">//ios可能是6 但是不需要旋转 所以此处用宽度大于高度的话就需要旋转 否则不需要旋转</span><br>            <span class="hljs-keyword">if</span>(w &gt;= h)&#123;<br>                <span class="hljs-comment">//需要顺时针（向左）90度旋转</span><br>                <span class="hljs-keyword">var</span> degree = <span class="hljs-number">90</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>;<br>                context.<span class="hljs-title function_">rotate</span>(degree);<br>                context.<span class="hljs-title function_">drawImage</span>(image, <span class="hljs-number">0</span>, -w, h, w);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                context.<span class="hljs-title function_">drawImage</span>(image, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w,h);<br>            &#125;<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:<br>            <span class="hljs-comment">//同上</span><br>            <span class="hljs-keyword">if</span>(w &gt;= h)&#123;<br>                <span class="hljs-comment">//需要逆时针（向右）90度旋转</span><br>                <span class="hljs-keyword">var</span> degree = <span class="hljs-number">270</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>;<br>                context.<span class="hljs-title function_">rotate</span>(degree);<br>                context.<span class="hljs-title function_">drawImage</span>(image, -h, <span class="hljs-number">0</span>, h, w);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                context.<span class="hljs-title function_">drawImage</span>(image, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w,h);<br>            &#125;<br>            <br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>            <span class="hljs-comment">//需要180度旋转</span><br>            <span class="hljs-comment">//旋转180度不需要修改宽高</span><br>            <span class="hljs-keyword">var</span> degree = <span class="hljs-number">180</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>;<br>            context.<span class="hljs-title function_">rotate</span>(degree);<br>            context.<span class="hljs-title function_">drawImage</span>(image, -w, -h, w, h);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-attr">default</span>:<br>            <span class="hljs-comment">//如果都不符合则直接绘图</span><br>            context.<span class="hljs-title function_">drawImage</span>(image, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w,h);<br>    &#125;<br>    <span class="hljs-comment">//水平镜像</span><br>    context.<span class="hljs-title function_">scale</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">//导出成jpeg格式base64</span><br>    <span class="hljs-keyword">var</span> imgSrc = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">&quot;image/jpeg&quot;</span>);<br><br>    <span class="hljs-comment">//此处可以返回图片的base64作为返回值</span><br>    <span class="hljs-comment">//return imgSrc</span><br><br>    $.<span class="hljs-title function_">ajax</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;/&quot;</span>,<br>        <span class="hljs-attr">method</span>:<span class="hljs-string">&quot;post&quot;</span>,<br>        <span class="hljs-attr">data</span>:&#123;<span class="hljs-attr">imgData</span>:imgSrc&#125;,<br>        <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data)[<span class="hljs-string">&#x27;errCode&#x27;</span>] == <span class="hljs-number">0</span>)&#123;<br>                <span class="hljs-comment">//请求成功跳转页面</span><br>                <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">&quot;/&quot;</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;服务器出错:&quot;</span>+err)<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">error</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)&#123;<br>            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;请求出错:&quot;</span>+err)<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>


<p>exif内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br></pre></td><td class="code"><pre><code class="hljs js">(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br><br>    <span class="hljs-keyword">var</span> debug = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">var</span> root = <span class="hljs-variable language_">this</span>;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">EXIF</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) &#123;<br>        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-variable constant_">EXIF</span>) <span class="hljs-keyword">return</span> obj;<br>        <span class="hljs-keyword">if</span> (!(<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-variable constant_">EXIF</span>)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">EXIF</span>(obj);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">EXIFwrapped</span> = obj;<br>    &#125;;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">exports</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">module</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>) &#123;<br>            <span class="hljs-built_in">exports</span> = <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-variable constant_">EXIF</span>;<br>        &#125;<br>        <span class="hljs-built_in">exports</span>.<span class="hljs-property">EXIF</span> = <span class="hljs-variable constant_">EXIF</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        root.<span class="hljs-property">EXIF</span> = <span class="hljs-variable constant_">EXIF</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">ExifTags</span> = <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">Tags</span> = &#123;<br><br>        <span class="hljs-comment">// version tags</span><br>        <span class="hljs-number">0x9000</span> : <span class="hljs-string">&quot;ExifVersion&quot;</span>,             <span class="hljs-comment">// EXIF version</span><br>        <span class="hljs-number">0xA000</span> : <span class="hljs-string">&quot;FlashpixVersion&quot;</span>,         <span class="hljs-comment">// Flashpix format version</span><br><br>        <span class="hljs-comment">// colorspace tags</span><br>        <span class="hljs-number">0xA001</span> : <span class="hljs-string">&quot;ColorSpace&quot;</span>,              <span class="hljs-comment">// Color space information tag</span><br><br>        <span class="hljs-comment">// image configuration</span><br>        <span class="hljs-number">0xA002</span> : <span class="hljs-string">&quot;PixelXDimension&quot;</span>,         <span class="hljs-comment">// Valid width of meaningful image</span><br>        <span class="hljs-number">0xA003</span> : <span class="hljs-string">&quot;PixelYDimension&quot;</span>,         <span class="hljs-comment">// Valid height of meaningful image</span><br>        <span class="hljs-number">0x9101</span> : <span class="hljs-string">&quot;ComponentsConfiguration&quot;</span>, <span class="hljs-comment">// Information about channels</span><br>        <span class="hljs-number">0x9102</span> : <span class="hljs-string">&quot;CompressedBitsPerPixel&quot;</span>,  <span class="hljs-comment">// Compressed bits per pixel</span><br><br>        <span class="hljs-comment">// user information</span><br>        <span class="hljs-number">0x927C</span> : <span class="hljs-string">&quot;MakerNote&quot;</span>,               <span class="hljs-comment">// Any desired information written by the manufacturer</span><br>        <span class="hljs-number">0x9286</span> : <span class="hljs-string">&quot;UserComment&quot;</span>,             <span class="hljs-comment">// Comments by user</span><br><br>        <span class="hljs-comment">// related file</span><br>        <span class="hljs-number">0xA004</span> : <span class="hljs-string">&quot;RelatedSoundFile&quot;</span>,        <span class="hljs-comment">// Name of related sound file</span><br><br>        <span class="hljs-comment">// date and time</span><br>        <span class="hljs-number">0x9003</span> : <span class="hljs-string">&quot;DateTimeOriginal&quot;</span>,        <span class="hljs-comment">// Date and time when the original image was generated</span><br>        <span class="hljs-number">0x9004</span> : <span class="hljs-string">&quot;DateTimeDigitized&quot;</span>,       <span class="hljs-comment">// Date and time when the image was stored digitally</span><br>        <span class="hljs-number">0x9290</span> : <span class="hljs-string">&quot;SubsecTime&quot;</span>,              <span class="hljs-comment">// Fractions of seconds for DateTime</span><br>        <span class="hljs-number">0x9291</span> : <span class="hljs-string">&quot;SubsecTimeOriginal&quot;</span>,      <span class="hljs-comment">// Fractions of seconds for DateTimeOriginal</span><br>        <span class="hljs-number">0x9292</span> : <span class="hljs-string">&quot;SubsecTimeDigitized&quot;</span>,     <span class="hljs-comment">// Fractions of seconds for DateTimeDigitized</span><br><br>        <span class="hljs-comment">// picture-taking conditions</span><br>        <span class="hljs-number">0x829A</span> : <span class="hljs-string">&quot;ExposureTime&quot;</span>,            <span class="hljs-comment">// Exposure time (in seconds)</span><br>        <span class="hljs-number">0x829D</span> : <span class="hljs-string">&quot;FNumber&quot;</span>,                 <span class="hljs-comment">// F number</span><br>        <span class="hljs-number">0x8822</span> : <span class="hljs-string">&quot;ExposureProgram&quot;</span>,         <span class="hljs-comment">// Exposure program</span><br>        <span class="hljs-number">0x8824</span> : <span class="hljs-string">&quot;SpectralSensitivity&quot;</span>,     <span class="hljs-comment">// Spectral sensitivity</span><br>        <span class="hljs-number">0x8827</span> : <span class="hljs-string">&quot;ISOSpeedRatings&quot;</span>,         <span class="hljs-comment">// ISO speed rating</span><br>        <span class="hljs-number">0x8828</span> : <span class="hljs-string">&quot;OECF&quot;</span>,                    <span class="hljs-comment">// Optoelectric conversion factor</span><br>        <span class="hljs-number">0x9201</span> : <span class="hljs-string">&quot;ShutterSpeedValue&quot;</span>,       <span class="hljs-comment">// Shutter speed</span><br>        <span class="hljs-number">0x9202</span> : <span class="hljs-string">&quot;ApertureValue&quot;</span>,           <span class="hljs-comment">// Lens aperture</span><br>        <span class="hljs-number">0x9203</span> : <span class="hljs-string">&quot;BrightnessValue&quot;</span>,         <span class="hljs-comment">// Value of brightness</span><br>        <span class="hljs-number">0x9204</span> : <span class="hljs-string">&quot;ExposureBias&quot;</span>,            <span class="hljs-comment">// Exposure bias</span><br>        <span class="hljs-number">0x9205</span> : <span class="hljs-string">&quot;MaxApertureValue&quot;</span>,        <span class="hljs-comment">// Smallest F number of lens</span><br>        <span class="hljs-number">0x9206</span> : <span class="hljs-string">&quot;SubjectDistance&quot;</span>,         <span class="hljs-comment">// Distance to subject in meters</span><br>        <span class="hljs-number">0x9207</span> : <span class="hljs-string">&quot;MeteringMode&quot;</span>,            <span class="hljs-comment">// Metering mode</span><br>        <span class="hljs-number">0x9208</span> : <span class="hljs-string">&quot;LightSource&quot;</span>,             <span class="hljs-comment">// Kind of light source</span><br>        <span class="hljs-number">0x9209</span> : <span class="hljs-string">&quot;Flash&quot;</span>,                   <span class="hljs-comment">// Flash status</span><br>        <span class="hljs-number">0x9214</span> : <span class="hljs-string">&quot;SubjectArea&quot;</span>,             <span class="hljs-comment">// Location and area of main subject</span><br>        <span class="hljs-number">0x920A</span> : <span class="hljs-string">&quot;FocalLength&quot;</span>,             <span class="hljs-comment">// Focal length of the lens in mm</span><br>        <span class="hljs-number">0xA20B</span> : <span class="hljs-string">&quot;FlashEnergy&quot;</span>,             <span class="hljs-comment">// Strobe energy in BCPS</span><br>        <span class="hljs-number">0xA20C</span> : <span class="hljs-string">&quot;SpatialFrequencyResponse&quot;</span>,    <span class="hljs-comment">//</span><br>        <span class="hljs-number">0xA20E</span> : <span class="hljs-string">&quot;FocalPlaneXResolution&quot;</span>,   <span class="hljs-comment">// Number of pixels in width direction per FocalPlaneResolutionUnit</span><br>        <span class="hljs-number">0xA20F</span> : <span class="hljs-string">&quot;FocalPlaneYResolution&quot;</span>,   <span class="hljs-comment">// Number of pixels in height direction per FocalPlaneResolutionUnit</span><br>        <span class="hljs-number">0xA210</span> : <span class="hljs-string">&quot;FocalPlaneResolutionUnit&quot;</span>,    <span class="hljs-comment">// Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution</span><br>        <span class="hljs-number">0xA214</span> : <span class="hljs-string">&quot;SubjectLocation&quot;</span>,         <span class="hljs-comment">// Location of subject in image</span><br>        <span class="hljs-number">0xA215</span> : <span class="hljs-string">&quot;ExposureIndex&quot;</span>,           <span class="hljs-comment">// Exposure index selected on camera</span><br>        <span class="hljs-number">0xA217</span> : <span class="hljs-string">&quot;SensingMethod&quot;</span>,           <span class="hljs-comment">// Image sensor type</span><br>        <span class="hljs-number">0xA300</span> : <span class="hljs-string">&quot;FileSource&quot;</span>,              <span class="hljs-comment">// Image source (3 == DSC)</span><br>        <span class="hljs-number">0xA301</span> : <span class="hljs-string">&quot;SceneType&quot;</span>,               <span class="hljs-comment">// Scene type (1 == directly photographed)</span><br>        <span class="hljs-number">0xA302</span> : <span class="hljs-string">&quot;CFAPattern&quot;</span>,              <span class="hljs-comment">// Color filter array geometric pattern</span><br>        <span class="hljs-number">0xA401</span> : <span class="hljs-string">&quot;CustomRendered&quot;</span>,          <span class="hljs-comment">// Special processing</span><br>        <span class="hljs-number">0xA402</span> : <span class="hljs-string">&quot;ExposureMode&quot;</span>,            <span class="hljs-comment">// Exposure mode</span><br>        <span class="hljs-number">0xA403</span> : <span class="hljs-string">&quot;WhiteBalance&quot;</span>,            <span class="hljs-comment">// 1 = auto white balance, 2 = manual</span><br>        <span class="hljs-number">0xA404</span> : <span class="hljs-string">&quot;DigitalZoomRation&quot;</span>,       <span class="hljs-comment">// Digital zoom ratio</span><br>        <span class="hljs-number">0xA405</span> : <span class="hljs-string">&quot;FocalLengthIn35mmFilm&quot;</span>,   <span class="hljs-comment">// Equivalent foacl length assuming 35mm film camera (in mm)</span><br>        <span class="hljs-number">0xA406</span> : <span class="hljs-string">&quot;SceneCaptureType&quot;</span>,        <span class="hljs-comment">// Type of scene</span><br>        <span class="hljs-number">0xA407</span> : <span class="hljs-string">&quot;GainControl&quot;</span>,             <span class="hljs-comment">// Degree of overall image gain adjustment</span><br>        <span class="hljs-number">0xA408</span> : <span class="hljs-string">&quot;Contrast&quot;</span>,                <span class="hljs-comment">// Direction of contrast processing applied by camera</span><br>        <span class="hljs-number">0xA409</span> : <span class="hljs-string">&quot;Saturation&quot;</span>,              <span class="hljs-comment">// Direction of saturation processing applied by camera</span><br>        <span class="hljs-number">0xA40A</span> : <span class="hljs-string">&quot;Sharpness&quot;</span>,               <span class="hljs-comment">// Direction of sharpness processing applied by camera</span><br>        <span class="hljs-number">0xA40B</span> : <span class="hljs-string">&quot;DeviceSettingDescription&quot;</span>,    <span class="hljs-comment">//</span><br>        <span class="hljs-number">0xA40C</span> : <span class="hljs-string">&quot;SubjectDistanceRange&quot;</span>,    <span class="hljs-comment">// Distance to subject</span><br><br>        <span class="hljs-comment">// other tags</span><br>        <span class="hljs-number">0xA005</span> : <span class="hljs-string">&quot;InteroperabilityIFDPointer&quot;</span>,<br>        <span class="hljs-number">0xA420</span> : <span class="hljs-string">&quot;ImageUniqueID&quot;</span>            <span class="hljs-comment">// Identifier assigned uniquely to each image</span><br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">TiffTags</span> = <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">TiffTags</span> = &#123;<br>        <span class="hljs-number">0x0100</span> : <span class="hljs-string">&quot;ImageWidth&quot;</span>,<br>        <span class="hljs-number">0x0101</span> : <span class="hljs-string">&quot;ImageHeight&quot;</span>,<br>        <span class="hljs-number">0x8769</span> : <span class="hljs-string">&quot;ExifIFDPointer&quot;</span>,<br>        <span class="hljs-number">0x8825</span> : <span class="hljs-string">&quot;GPSInfoIFDPointer&quot;</span>,<br>        <span class="hljs-number">0xA005</span> : <span class="hljs-string">&quot;InteroperabilityIFDPointer&quot;</span>,<br>        <span class="hljs-number">0x0102</span> : <span class="hljs-string">&quot;BitsPerSample&quot;</span>,<br>        <span class="hljs-number">0x0103</span> : <span class="hljs-string">&quot;Compression&quot;</span>,<br>        <span class="hljs-number">0x0106</span> : <span class="hljs-string">&quot;PhotometricInterpretation&quot;</span>,<br>        <span class="hljs-number">0x0112</span> : <span class="hljs-string">&quot;Orientation&quot;</span>,<br>        <span class="hljs-number">0x0115</span> : <span class="hljs-string">&quot;SamplesPerPixel&quot;</span>,<br>        <span class="hljs-number">0x011C</span> : <span class="hljs-string">&quot;PlanarConfiguration&quot;</span>,<br>        <span class="hljs-number">0x0212</span> : <span class="hljs-string">&quot;YCbCrSubSampling&quot;</span>,<br>        <span class="hljs-number">0x0213</span> : <span class="hljs-string">&quot;YCbCrPositioning&quot;</span>,<br>        <span class="hljs-number">0x011A</span> : <span class="hljs-string">&quot;XResolution&quot;</span>,<br>        <span class="hljs-number">0x011B</span> : <span class="hljs-string">&quot;YResolution&quot;</span>,<br>        <span class="hljs-number">0x0128</span> : <span class="hljs-string">&quot;ResolutionUnit&quot;</span>,<br>        <span class="hljs-number">0x0111</span> : <span class="hljs-string">&quot;StripOffsets&quot;</span>,<br>        <span class="hljs-number">0x0116</span> : <span class="hljs-string">&quot;RowsPerStrip&quot;</span>,<br>        <span class="hljs-number">0x0117</span> : <span class="hljs-string">&quot;StripByteCounts&quot;</span>,<br>        <span class="hljs-number">0x0201</span> : <span class="hljs-string">&quot;JPEGInterchangeFormat&quot;</span>,<br>        <span class="hljs-number">0x0202</span> : <span class="hljs-string">&quot;JPEGInterchangeFormatLength&quot;</span>,<br>        <span class="hljs-number">0x012D</span> : <span class="hljs-string">&quot;TransferFunction&quot;</span>,<br>        <span class="hljs-number">0x013E</span> : <span class="hljs-string">&quot;WhitePoint&quot;</span>,<br>        <span class="hljs-number">0x013F</span> : <span class="hljs-string">&quot;PrimaryChromaticities&quot;</span>,<br>        <span class="hljs-number">0x0211</span> : <span class="hljs-string">&quot;YCbCrCoefficients&quot;</span>,<br>        <span class="hljs-number">0x0214</span> : <span class="hljs-string">&quot;ReferenceBlackWhite&quot;</span>,<br>        <span class="hljs-number">0x0132</span> : <span class="hljs-string">&quot;DateTime&quot;</span>,<br>        <span class="hljs-number">0x010E</span> : <span class="hljs-string">&quot;ImageDescription&quot;</span>,<br>        <span class="hljs-number">0x010F</span> : <span class="hljs-string">&quot;Make&quot;</span>,<br>        <span class="hljs-number">0x0110</span> : <span class="hljs-string">&quot;Model&quot;</span>,<br>        <span class="hljs-number">0x0131</span> : <span class="hljs-string">&quot;Software&quot;</span>,<br>        <span class="hljs-number">0x013B</span> : <span class="hljs-string">&quot;Artist&quot;</span>,<br>        <span class="hljs-number">0x8298</span> : <span class="hljs-string">&quot;Copyright&quot;</span><br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">GPSTags</span> = <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">GPSTags</span> = &#123;<br>        <span class="hljs-number">0x0000</span> : <span class="hljs-string">&quot;GPSVersionID&quot;</span>,<br>        <span class="hljs-number">0x0001</span> : <span class="hljs-string">&quot;GPSLatitudeRef&quot;</span>,<br>        <span class="hljs-number">0x0002</span> : <span class="hljs-string">&quot;GPSLatitude&quot;</span>,<br>        <span class="hljs-number">0x0003</span> : <span class="hljs-string">&quot;GPSLongitudeRef&quot;</span>,<br>        <span class="hljs-number">0x0004</span> : <span class="hljs-string">&quot;GPSLongitude&quot;</span>,<br>        <span class="hljs-number">0x0005</span> : <span class="hljs-string">&quot;GPSAltitudeRef&quot;</span>,<br>        <span class="hljs-number">0x0006</span> : <span class="hljs-string">&quot;GPSAltitude&quot;</span>,<br>        <span class="hljs-number">0x0007</span> : <span class="hljs-string">&quot;GPSTimeStamp&quot;</span>,<br>        <span class="hljs-number">0x0008</span> : <span class="hljs-string">&quot;GPSSatellites&quot;</span>,<br>        <span class="hljs-number">0x0009</span> : <span class="hljs-string">&quot;GPSStatus&quot;</span>,<br>        <span class="hljs-number">0x000A</span> : <span class="hljs-string">&quot;GPSMeasureMode&quot;</span>,<br>        <span class="hljs-number">0x000B</span> : <span class="hljs-string">&quot;GPSDOP&quot;</span>,<br>        <span class="hljs-number">0x000C</span> : <span class="hljs-string">&quot;GPSSpeedRef&quot;</span>,<br>        <span class="hljs-number">0x000D</span> : <span class="hljs-string">&quot;GPSSpeed&quot;</span>,<br>        <span class="hljs-number">0x000E</span> : <span class="hljs-string">&quot;GPSTrackRef&quot;</span>,<br>        <span class="hljs-number">0x000F</span> : <span class="hljs-string">&quot;GPSTrack&quot;</span>,<br>        <span class="hljs-number">0x0010</span> : <span class="hljs-string">&quot;GPSImgDirectionRef&quot;</span>,<br>        <span class="hljs-number">0x0011</span> : <span class="hljs-string">&quot;GPSImgDirection&quot;</span>,<br>        <span class="hljs-number">0x0012</span> : <span class="hljs-string">&quot;GPSMapDatum&quot;</span>,<br>        <span class="hljs-number">0x0013</span> : <span class="hljs-string">&quot;GPSDestLatitudeRef&quot;</span>,<br>        <span class="hljs-number">0x0014</span> : <span class="hljs-string">&quot;GPSDestLatitude&quot;</span>,<br>        <span class="hljs-number">0x0015</span> : <span class="hljs-string">&quot;GPSDestLongitudeRef&quot;</span>,<br>        <span class="hljs-number">0x0016</span> : <span class="hljs-string">&quot;GPSDestLongitude&quot;</span>,<br>        <span class="hljs-number">0x0017</span> : <span class="hljs-string">&quot;GPSDestBearingRef&quot;</span>,<br>        <span class="hljs-number">0x0018</span> : <span class="hljs-string">&quot;GPSDestBearing&quot;</span>,<br>        <span class="hljs-number">0x0019</span> : <span class="hljs-string">&quot;GPSDestDistanceRef&quot;</span>,<br>        <span class="hljs-number">0x001A</span> : <span class="hljs-string">&quot;GPSDestDistance&quot;</span>,<br>        <span class="hljs-number">0x001B</span> : <span class="hljs-string">&quot;GPSProcessingMethod&quot;</span>,<br>        <span class="hljs-number">0x001C</span> : <span class="hljs-string">&quot;GPSAreaInformation&quot;</span>,<br>        <span class="hljs-number">0x001D</span> : <span class="hljs-string">&quot;GPSDateStamp&quot;</span>,<br>        <span class="hljs-number">0x001E</span> : <span class="hljs-string">&quot;GPSDifferential&quot;</span><br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">StringValues</span> = <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">StringValues</span> = &#123;<br>        <span class="hljs-title class_">ExposureProgram</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Not defined&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Manual&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Normal program&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Aperture priority&quot;</span>,<br>            <span class="hljs-number">4</span> : <span class="hljs-string">&quot;Shutter priority&quot;</span>,<br>            <span class="hljs-number">5</span> : <span class="hljs-string">&quot;Creative program&quot;</span>,<br>            <span class="hljs-number">6</span> : <span class="hljs-string">&quot;Action program&quot;</span>,<br>            <span class="hljs-number">7</span> : <span class="hljs-string">&quot;Portrait mode&quot;</span>,<br>            <span class="hljs-number">8</span> : <span class="hljs-string">&quot;Landscape mode&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">MeteringMode</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Unknown&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Average&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;CenterWeightedAverage&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Spot&quot;</span>,<br>            <span class="hljs-number">4</span> : <span class="hljs-string">&quot;MultiSpot&quot;</span>,<br>            <span class="hljs-number">5</span> : <span class="hljs-string">&quot;Pattern&quot;</span>,<br>            <span class="hljs-number">6</span> : <span class="hljs-string">&quot;Partial&quot;</span>,<br>            <span class="hljs-number">255</span> : <span class="hljs-string">&quot;Other&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">LightSource</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Unknown&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Daylight&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Fluorescent&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Tungsten (incandescent light)&quot;</span>,<br>            <span class="hljs-number">4</span> : <span class="hljs-string">&quot;Flash&quot;</span>,<br>            <span class="hljs-number">9</span> : <span class="hljs-string">&quot;Fine weather&quot;</span>,<br>            <span class="hljs-number">10</span> : <span class="hljs-string">&quot;Cloudy weather&quot;</span>,<br>            <span class="hljs-number">11</span> : <span class="hljs-string">&quot;Shade&quot;</span>,<br>            <span class="hljs-number">12</span> : <span class="hljs-string">&quot;Daylight fluorescent (D 5700 - 7100K)&quot;</span>,<br>            <span class="hljs-number">13</span> : <span class="hljs-string">&quot;Day white fluorescent (N 4600 - 5400K)&quot;</span>,<br>            <span class="hljs-number">14</span> : <span class="hljs-string">&quot;Cool white fluorescent (W 3900 - 4500K)&quot;</span>,<br>            <span class="hljs-number">15</span> : <span class="hljs-string">&quot;White fluorescent (WW 3200 - 3700K)&quot;</span>,<br>            <span class="hljs-number">17</span> : <span class="hljs-string">&quot;Standard light A&quot;</span>,<br>            <span class="hljs-number">18</span> : <span class="hljs-string">&quot;Standard light B&quot;</span>,<br>            <span class="hljs-number">19</span> : <span class="hljs-string">&quot;Standard light C&quot;</span>,<br>            <span class="hljs-number">20</span> : <span class="hljs-string">&quot;D55&quot;</span>,<br>            <span class="hljs-number">21</span> : <span class="hljs-string">&quot;D65&quot;</span>,<br>            <span class="hljs-number">22</span> : <span class="hljs-string">&quot;D75&quot;</span>,<br>            <span class="hljs-number">23</span> : <span class="hljs-string">&quot;D50&quot;</span>,<br>            <span class="hljs-number">24</span> : <span class="hljs-string">&quot;ISO studio tungsten&quot;</span>,<br>            <span class="hljs-number">255</span> : <span class="hljs-string">&quot;Other&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">Flash</span> : &#123;<br>            <span class="hljs-number">0x0000</span> : <span class="hljs-string">&quot;Flash did not fire&quot;</span>,<br>            <span class="hljs-number">0x0001</span> : <span class="hljs-string">&quot;Flash fired&quot;</span>,<br>            <span class="hljs-number">0x0005</span> : <span class="hljs-string">&quot;Strobe return light not detected&quot;</span>,<br>            <span class="hljs-number">0x0007</span> : <span class="hljs-string">&quot;Strobe return light detected&quot;</span>,<br>            <span class="hljs-number">0x0009</span> : <span class="hljs-string">&quot;Flash fired, compulsory flash mode&quot;</span>,<br>            <span class="hljs-number">0x000D</span> : <span class="hljs-string">&quot;Flash fired, compulsory flash mode, return light not detected&quot;</span>,<br>            <span class="hljs-number">0x000F</span> : <span class="hljs-string">&quot;Flash fired, compulsory flash mode, return light detected&quot;</span>,<br>            <span class="hljs-number">0x0010</span> : <span class="hljs-string">&quot;Flash did not fire, compulsory flash mode&quot;</span>,<br>            <span class="hljs-number">0x0018</span> : <span class="hljs-string">&quot;Flash did not fire, auto mode&quot;</span>,<br>            <span class="hljs-number">0x0019</span> : <span class="hljs-string">&quot;Flash fired, auto mode&quot;</span>,<br>            <span class="hljs-number">0x001D</span> : <span class="hljs-string">&quot;Flash fired, auto mode, return light not detected&quot;</span>,<br>            <span class="hljs-number">0x001F</span> : <span class="hljs-string">&quot;Flash fired, auto mode, return light detected&quot;</span>,<br>            <span class="hljs-number">0x0020</span> : <span class="hljs-string">&quot;No flash function&quot;</span>,<br>            <span class="hljs-number">0x0041</span> : <span class="hljs-string">&quot;Flash fired, red-eye reduction mode&quot;</span>,<br>            <span class="hljs-number">0x0045</span> : <span class="hljs-string">&quot;Flash fired, red-eye reduction mode, return light not detected&quot;</span>,<br>            <span class="hljs-number">0x0047</span> : <span class="hljs-string">&quot;Flash fired, red-eye reduction mode, return light detected&quot;</span>,<br>            <span class="hljs-number">0x0049</span> : <span class="hljs-string">&quot;Flash fired, compulsory flash mode, red-eye reduction mode&quot;</span>,<br>            <span class="hljs-number">0x004D</span> : <span class="hljs-string">&quot;Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected&quot;</span>,<br>            <span class="hljs-number">0x004F</span> : <span class="hljs-string">&quot;Flash fired, compulsory flash mode, red-eye reduction mode, return light detected&quot;</span>,<br>            <span class="hljs-number">0x0059</span> : <span class="hljs-string">&quot;Flash fired, auto mode, red-eye reduction mode&quot;</span>,<br>            <span class="hljs-number">0x005D</span> : <span class="hljs-string">&quot;Flash fired, auto mode, return light not detected, red-eye reduction mode&quot;</span>,<br>            <span class="hljs-number">0x005F</span> : <span class="hljs-string">&quot;Flash fired, auto mode, return light detected, red-eye reduction mode&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">SensingMethod</span> : &#123;<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Not defined&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;One-chip color area sensor&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Two-chip color area sensor&quot;</span>,<br>            <span class="hljs-number">4</span> : <span class="hljs-string">&quot;Three-chip color area sensor&quot;</span>,<br>            <span class="hljs-number">5</span> : <span class="hljs-string">&quot;Color sequential area sensor&quot;</span>,<br>            <span class="hljs-number">7</span> : <span class="hljs-string">&quot;Trilinear sensor&quot;</span>,<br>            <span class="hljs-number">8</span> : <span class="hljs-string">&quot;Color sequential linear sensor&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">SceneCaptureType</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Standard&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Landscape&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Portrait&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Night scene&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">SceneType</span> : &#123;<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Directly photographed&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">CustomRendered</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Normal process&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Custom process&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">WhiteBalance</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Auto white balance&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Manual white balance&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">GainControl</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;None&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Low gain up&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;High gain up&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Low gain down&quot;</span>,<br>            <span class="hljs-number">4</span> : <span class="hljs-string">&quot;High gain down&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">Contrast</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Normal&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Soft&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Hard&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">Saturation</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Normal&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Low saturation&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;High saturation&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">Sharpness</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Normal&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Soft&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Hard&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">SubjectDistanceRange</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;Unknown&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Macro&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Close view&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Distant view&quot;</span><br>        &#125;,<br>        <span class="hljs-title class_">FileSource</span> : &#123;<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;DSC&quot;</span><br>        &#125;,<br><br>        <span class="hljs-title class_">Components</span> : &#123;<br>            <span class="hljs-number">0</span> : <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-number">1</span> : <span class="hljs-string">&quot;Y&quot;</span>,<br>            <span class="hljs-number">2</span> : <span class="hljs-string">&quot;Cb&quot;</span>,<br>            <span class="hljs-number">3</span> : <span class="hljs-string">&quot;Cr&quot;</span>,<br>            <span class="hljs-number">4</span> : <span class="hljs-string">&quot;R&quot;</span>,<br>            <span class="hljs-number">5</span> : <span class="hljs-string">&quot;G&quot;</span>,<br>            <span class="hljs-number">6</span> : <span class="hljs-string">&quot;B&quot;</span><br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">addEvent</span>(<span class="hljs-params">element, event, handler</span>) &#123;<br>        <span class="hljs-keyword">if</span> (element.<span class="hljs-property">addEventListener</span>) &#123;<br>            element.<span class="hljs-title function_">addEventListener</span>(event, handler, <span class="hljs-literal">false</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element.<span class="hljs-property">attachEvent</span>) &#123;<br>            element.<span class="hljs-title function_">attachEvent</span>(<span class="hljs-string">&quot;on&quot;</span> + event, handler);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">imageHasData</span>(<span class="hljs-params">img</span>) &#123;<br>        <span class="hljs-keyword">return</span> !!(img.<span class="hljs-property">exifdata</span>);<br>    &#125;<br><br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToArrayBuffer</span>(<span class="hljs-params">base64, contentType</span>) &#123;<br>        contentType = contentType || base64.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^data\:([^\;]+)\;base64,/mi</span>)[<span class="hljs-number">1</span>] || <span class="hljs-string">&#x27;&#x27;</span>; <span class="hljs-comment">// e.g. &#x27;data:image/jpeg;base64,...&#x27; =&gt; &#x27;image/jpeg&#x27;</span><br>        base64 = base64.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^data\:([^\;]+)\;base64,/gmi</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>        <span class="hljs-keyword">var</span> binary = <span class="hljs-title function_">atob</span>(base64);<br>        <span class="hljs-keyword">var</span> len = binary.<span class="hljs-property">length</span>;<br>        <span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(len);<br>        <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>            view[i] = binary.<span class="hljs-title function_">charCodeAt</span>(i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> buffer;<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">objectURLToBlob</span>(<span class="hljs-params">url, callback</span>) &#123;<br>        <span class="hljs-keyword">var</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();<br>        http.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>, url, <span class="hljs-literal">true</span>);<br>        http.<span class="hljs-property">responseType</span> = <span class="hljs-string">&quot;blob&quot;</span>;<br>        http.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> == <span class="hljs-number">200</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-title function_">callback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">response</span>);<br>            &#125;<br>        &#125;;<br>        http.<span class="hljs-title function_">send</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getImageData</span>(<span class="hljs-params">img, callback</span>) &#123;<br>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleBinaryFile</span>(<span class="hljs-params">binFile</span>) &#123;<br>            <span class="hljs-keyword">var</span> data = <span class="hljs-title function_">findEXIFinJPEG</span>(binFile);<br>            <span class="hljs-keyword">var</span> iptcdata = <span class="hljs-title function_">findIPTCinJPEG</span>(binFile);<br>            img.<span class="hljs-property">exifdata</span> = data || &#123;&#125;;<br>            img.<span class="hljs-property">iptcdata</span> = iptcdata || &#123;&#125;;<br>            <span class="hljs-keyword">if</span> (callback) &#123;<br>                callback.<span class="hljs-title function_">call</span>(img);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (img.<span class="hljs-property">src</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^data\:/i</span>.<span class="hljs-title function_">test</span>(img.<span class="hljs-property">src</span>)) &#123; <span class="hljs-comment">// Data URI</span><br>                <span class="hljs-keyword">var</span> arrayBuffer = <span class="hljs-title function_">base64ToArrayBuffer</span>(img.<span class="hljs-property">src</span>);<br>                <span class="hljs-title function_">handleBinaryFile</span>(arrayBuffer);<br><br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^blob\:/i</span>.<span class="hljs-title function_">test</span>(img.<span class="hljs-property">src</span>)) &#123; <span class="hljs-comment">// Object URL</span><br>                <span class="hljs-keyword">var</span> fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();<br>                fileReader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>                    <span class="hljs-title function_">handleBinaryFile</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>);<br>                &#125;;<br>                <span class="hljs-title function_">objectURLToBlob</span>(img.<span class="hljs-property">src</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">blob</span>) &#123;<br>                    fileReader.<span class="hljs-title function_">readAsArrayBuffer</span>(blob);<br>                &#125;);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">var</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();<br>                http.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>                    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> == <span class="hljs-number">200</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-number">0</span>) &#123;<br>                        <span class="hljs-title function_">handleBinaryFile</span>(http.<span class="hljs-property">response</span>);<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        <span class="hljs-keyword">throw</span> <span class="hljs-string">&quot;Could not load image&quot;</span>;<br>                    &#125;<br>                    http = <span class="hljs-literal">null</span>;<br>                &#125;;<br>                http.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>, img.<span class="hljs-property">src</span>, <span class="hljs-literal">true</span>);<br>                http.<span class="hljs-property">responseType</span> = <span class="hljs-string">&quot;arraybuffer&quot;</span>;<br>                http.<span class="hljs-title function_">send</span>(<span class="hljs-literal">null</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">FileReader</span> &amp;&amp; (img <span class="hljs-keyword">instanceof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">Blob</span> || img <span class="hljs-keyword">instanceof</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">File</span>)) &#123;<br>            <span class="hljs-keyword">var</span> fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();<br>            fileReader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>                <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Got file of length &quot;</span> + e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-property">byteLength</span>);<br>                <span class="hljs-title function_">handleBinaryFile</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>);<br>            &#125;;<br><br>            fileReader.<span class="hljs-title function_">readAsArrayBuffer</span>(img);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">findEXIFinJPEG</span>(<span class="hljs-params">file</span>) &#123;<br>        <span class="hljs-keyword">var</span> dataView = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(file);<br><br>        <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Got file of length &quot;</span> + file.<span class="hljs-property">byteLength</span>);<br>        <span class="hljs-keyword">if</span> ((dataView.<span class="hljs-title function_">getUint8</span>(<span class="hljs-number">0</span>) != <span class="hljs-number">0xFF</span>) || (dataView.<span class="hljs-title function_">getUint8</span>(<span class="hljs-number">1</span>) != <span class="hljs-number">0xD8</span>)) &#123;<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not a valid JPEG&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// not a valid jpeg</span><br>        &#125;<br><br>        <span class="hljs-keyword">var</span> offset = <span class="hljs-number">2</span>,<br>            length = file.<span class="hljs-property">byteLength</span>,<br>            marker;<br><br>        <span class="hljs-keyword">while</span> (offset &lt; length) &#123;<br>            <span class="hljs-keyword">if</span> (dataView.<span class="hljs-title function_">getUint8</span>(offset) != <span class="hljs-number">0xFF</span>) &#123;<br>                <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not a valid marker at offset &quot;</span> + offset + <span class="hljs-string">&quot;, found: &quot;</span> + dataView.<span class="hljs-title function_">getUint8</span>(offset));<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// not a valid marker, something is wrong</span><br>            &#125;<br><br>            marker = dataView.<span class="hljs-title function_">getUint8</span>(offset + <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(marker);<br><br>            <span class="hljs-comment">// we could implement handling for other markers here,</span><br>            <span class="hljs-comment">// but we&#x27;re only looking for 0xFFE1 for EXIF data</span><br><br>            <span class="hljs-keyword">if</span> (marker == <span class="hljs-number">225</span>) &#123;<br>                <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Found 0xFFE1 marker&quot;</span>);<br><br>                <span class="hljs-keyword">return</span> <span class="hljs-title function_">readEXIFData</span>(dataView, offset + <span class="hljs-number">4</span>, dataView.<span class="hljs-title function_">getUint16</span>(offset + <span class="hljs-number">2</span>) - <span class="hljs-number">2</span>);<br><br>                <span class="hljs-comment">// offset += 2 + file.getShortAt(offset+2, true);</span><br><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                offset += <span class="hljs-number">2</span> + dataView.<span class="hljs-title function_">getUint16</span>(offset+<span class="hljs-number">2</span>);<br>            &#125;<br><br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">findIPTCinJPEG</span>(<span class="hljs-params">file</span>) &#123;<br>        <span class="hljs-keyword">var</span> dataView = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(file);<br><br>        <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Got file of length &quot;</span> + file.<span class="hljs-property">byteLength</span>);<br>        <span class="hljs-keyword">if</span> ((dataView.<span class="hljs-title function_">getUint8</span>(<span class="hljs-number">0</span>) != <span class="hljs-number">0xFF</span>) || (dataView.<span class="hljs-title function_">getUint8</span>(<span class="hljs-number">1</span>) != <span class="hljs-number">0xD8</span>)) &#123;<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not a valid JPEG&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// not a valid jpeg</span><br>        &#125;<br><br>        <span class="hljs-keyword">var</span> offset = <span class="hljs-number">2</span>,<br>            length = file.<span class="hljs-property">byteLength</span>;<br><br><br>        <span class="hljs-keyword">var</span> isFieldSegmentStart = <span class="hljs-keyword">function</span>(<span class="hljs-params">dataView, offset</span>)&#123;<br>            <span class="hljs-keyword">return</span> (<br>                dataView.<span class="hljs-title function_">getUint8</span>(offset) === <span class="hljs-number">0x38</span> &amp;&amp;<br>                dataView.<span class="hljs-title function_">getUint8</span>(offset+<span class="hljs-number">1</span>) === <span class="hljs-number">0x42</span> &amp;&amp;<br>                dataView.<span class="hljs-title function_">getUint8</span>(offset+<span class="hljs-number">2</span>) === <span class="hljs-number">0x49</span> &amp;&amp;<br>                dataView.<span class="hljs-title function_">getUint8</span>(offset+<span class="hljs-number">3</span>) === <span class="hljs-number">0x4D</span> &amp;&amp;<br>                dataView.<span class="hljs-title function_">getUint8</span>(offset+<span class="hljs-number">4</span>) === <span class="hljs-number">0x04</span> &amp;&amp;<br>                dataView.<span class="hljs-title function_">getUint8</span>(offset+<span class="hljs-number">5</span>) === <span class="hljs-number">0x04</span><br>            );<br>        &#125;;<br><br>        <span class="hljs-keyword">while</span> (offset &lt; length) &#123;<br><br>            <span class="hljs-keyword">if</span> ( <span class="hljs-title function_">isFieldSegmentStart</span>(dataView, offset ))&#123;<br><br>                <span class="hljs-comment">// Get the length of the name header (which is padded to an even number of bytes)</span><br>                <span class="hljs-keyword">var</span> nameHeaderLength = dataView.<span class="hljs-title function_">getUint8</span>(offset+<span class="hljs-number">7</span>);<br>                <span class="hljs-keyword">if</span>(nameHeaderLength % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) nameHeaderLength += <span class="hljs-number">1</span>;<br>                <span class="hljs-comment">// Check for pre photoshop 6 format</span><br>                <span class="hljs-keyword">if</span>(nameHeaderLength === <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-comment">// Always 4</span><br>                    nameHeaderLength = <span class="hljs-number">4</span>;<br>                &#125;<br><br>                <span class="hljs-keyword">var</span> startOffset = offset + <span class="hljs-number">8</span> + nameHeaderLength;<br>                <span class="hljs-keyword">var</span> sectionLength = dataView.<span class="hljs-title function_">getUint16</span>(offset + <span class="hljs-number">6</span> + nameHeaderLength);<br><br>                <span class="hljs-keyword">return</span> <span class="hljs-title function_">readIPTCData</span>(file, startOffset, sectionLength);<br><br>                <span class="hljs-keyword">break</span>;<br><br>            &#125;<br><br><br>            <span class="hljs-comment">// Not the marker, continue searching</span><br>            offset++;<br><br>        &#125;<br><br>    &#125;<br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">IptcFieldMap</span> = &#123;<br>        <span class="hljs-number">0x78</span> : <span class="hljs-string">&#x27;caption&#x27;</span>,<br>        <span class="hljs-number">0x6E</span> : <span class="hljs-string">&#x27;credit&#x27;</span>,<br>        <span class="hljs-number">0x19</span> : <span class="hljs-string">&#x27;keywords&#x27;</span>,<br>        <span class="hljs-number">0x37</span> : <span class="hljs-string">&#x27;dateCreated&#x27;</span>,<br>        <span class="hljs-number">0x50</span> : <span class="hljs-string">&#x27;byline&#x27;</span>,<br>        <span class="hljs-number">0x55</span> : <span class="hljs-string">&#x27;bylineTitle&#x27;</span>,<br>        <span class="hljs-number">0x7A</span> : <span class="hljs-string">&#x27;captionWriter&#x27;</span>,<br>        <span class="hljs-number">0x69</span> : <span class="hljs-string">&#x27;headline&#x27;</span>,<br>        <span class="hljs-number">0x74</span> : <span class="hljs-string">&#x27;copyright&#x27;</span>,<br>        <span class="hljs-number">0x0F</span> : <span class="hljs-string">&#x27;category&#x27;</span><br>    &#125;;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">readIPTCData</span>(<span class="hljs-params">file, startOffset, sectionLength</span>)&#123;<br>        <span class="hljs-keyword">var</span> dataView = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(file);<br>        <span class="hljs-keyword">var</span> data = &#123;&#125;;<br>        <span class="hljs-keyword">var</span> fieldValue, fieldName, dataSize, segmentType, segmentSize;<br>        <span class="hljs-keyword">var</span> segmentStartPos = startOffset;<br>        <span class="hljs-keyword">while</span>(segmentStartPos &lt; startOffset+sectionLength) &#123;<br>            <span class="hljs-keyword">if</span>(dataView.<span class="hljs-title function_">getUint8</span>(segmentStartPos) === <span class="hljs-number">0x1C</span> &amp;&amp; dataView.<span class="hljs-title function_">getUint8</span>(segmentStartPos+<span class="hljs-number">1</span>) === <span class="hljs-number">0x02</span>)&#123;<br>                segmentType = dataView.<span class="hljs-title function_">getUint8</span>(segmentStartPos+<span class="hljs-number">2</span>);<br>                <span class="hljs-keyword">if</span>(segmentType <span class="hljs-keyword">in</span> <span class="hljs-title class_">IptcFieldMap</span>) &#123;<br>                    dataSize = dataView.<span class="hljs-title function_">getInt16</span>(segmentStartPos+<span class="hljs-number">3</span>);<br>                    segmentSize = dataSize + <span class="hljs-number">5</span>;<br>                    fieldName = <span class="hljs-title class_">IptcFieldMap</span>[segmentType];<br>                    fieldValue = <span class="hljs-title function_">getStringFromDB</span>(dataView, segmentStartPos+<span class="hljs-number">5</span>, dataSize);<br>                    <span class="hljs-comment">// Check if we already stored a value with this name</span><br>                    <span class="hljs-keyword">if</span>(data.<span class="hljs-title function_">hasOwnProperty</span>(fieldName)) &#123;<br>                        <span class="hljs-comment">// Value already stored with this name, create multivalue field</span><br>                        <span class="hljs-keyword">if</span>(data[fieldName] <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) &#123;<br>                            data[fieldName].<span class="hljs-title function_">push</span>(fieldValue);<br>                        &#125;<br>                        <span class="hljs-keyword">else</span> &#123;<br>                            data[fieldName] = [data[fieldName], fieldValue];<br>                        &#125;<br>                    &#125;<br>                    <span class="hljs-keyword">else</span> &#123;<br>                        data[fieldName] = fieldValue;<br>                    &#125;<br>                &#125;<br><br>            &#125;<br>            segmentStartPos++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> data;<br>    &#125;<br><br><br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">readTags</span>(<span class="hljs-params">file, tiffStart, dirStart, strings, bigEnd</span>) &#123;<br>        <span class="hljs-keyword">var</span> entries = file.<span class="hljs-title function_">getUint16</span>(dirStart, !bigEnd),<br>            tags = &#123;&#125;,<br>            entryOffset, tag,<br>            i;<br><br>        <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;entries;i++) &#123;<br>            entryOffset = dirStart + i*<span class="hljs-number">12</span> + <span class="hljs-number">2</span>;<br>            tag = strings[file.<span class="hljs-title function_">getUint16</span>(entryOffset, !bigEnd)];<br>            <span class="hljs-keyword">if</span> (!tag &amp;&amp; debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Unknown tag: &quot;</span> + file.<span class="hljs-title function_">getUint16</span>(entryOffset, !bigEnd));<br>            tags[tag] = <span class="hljs-title function_">readTagValue</span>(file, entryOffset, tiffStart, dirStart, bigEnd);<br>        &#125;<br>        <span class="hljs-keyword">return</span> tags;<br>    &#125;<br><br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">readTagValue</span>(<span class="hljs-params">file, entryOffset, tiffStart, dirStart, bigEnd</span>) &#123;<br>        <span class="hljs-keyword">var</span> type = file.<span class="hljs-title function_">getUint16</span>(entryOffset+<span class="hljs-number">2</span>, !bigEnd),<br>            numValues = file.<span class="hljs-title function_">getUint32</span>(entryOffset+<span class="hljs-number">4</span>, !bigEnd),<br>            valueOffset = file.<span class="hljs-title function_">getUint32</span>(entryOffset+<span class="hljs-number">8</span>, !bigEnd) + tiffStart,<br>            offset,<br>            vals, val, n,<br>            numerator, denominator;<br><br>        <span class="hljs-keyword">switch</span> (type) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-comment">// byte, 8-bit unsigned int</span><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>: <span class="hljs-comment">// undefined, 8-bit byte, value depending on field</span><br>                <span class="hljs-keyword">if</span> (numValues == <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span> file.<span class="hljs-title function_">getUint8</span>(entryOffset + <span class="hljs-number">8</span>, !bigEnd);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    offset = numValues &gt; <span class="hljs-number">4</span> ? valueOffset : (entryOffset + <span class="hljs-number">8</span>);<br>                    vals = [];<br>                    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;n&lt;numValues;n++) &#123;<br>                        vals[n] = file.<span class="hljs-title function_">getUint8</span>(offset + n);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> vals;<br>                &#125;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-comment">// ascii, 8-bit byte</span><br>                offset = numValues &gt; <span class="hljs-number">4</span> ? valueOffset : (entryOffset + <span class="hljs-number">8</span>);<br>                <span class="hljs-keyword">return</span> <span class="hljs-title function_">getStringFromDB</span>(file, offset, numValues-<span class="hljs-number">1</span>);<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-comment">// short, 16 bit int</span><br>                <span class="hljs-keyword">if</span> (numValues == <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span> file.<span class="hljs-title function_">getUint16</span>(entryOffset + <span class="hljs-number">8</span>, !bigEnd);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    offset = numValues &gt; <span class="hljs-number">2</span> ? valueOffset : (entryOffset + <span class="hljs-number">8</span>);<br>                    vals = [];<br>                    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;n&lt;numValues;n++) &#123;<br>                        vals[n] = file.<span class="hljs-title function_">getUint16</span>(offset + <span class="hljs-number">2</span>*n, !bigEnd);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> vals;<br>                &#125;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-comment">// long, 32 bit int</span><br>                <span class="hljs-keyword">if</span> (numValues == <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span> file.<span class="hljs-title function_">getUint32</span>(entryOffset + <span class="hljs-number">8</span>, !bigEnd);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    vals = [];<br>                    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;n&lt;numValues;n++) &#123;<br>                        vals[n] = file.<span class="hljs-title function_">getUint32</span>(valueOffset + <span class="hljs-number">4</span>*n, !bigEnd);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> vals;<br>                &#125;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:    <span class="hljs-comment">// rational = two long values, first is numerator, second is denominator</span><br>                <span class="hljs-keyword">if</span> (numValues == <span class="hljs-number">1</span>) &#123;<br>                    numerator = file.<span class="hljs-title function_">getUint32</span>(valueOffset, !bigEnd);<br>                    denominator = file.<span class="hljs-title function_">getUint32</span>(valueOffset+<span class="hljs-number">4</span>, !bigEnd);<br>                    val = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(numerator / denominator);<br>                    val.<span class="hljs-property">numerator</span> = numerator;<br>                    val.<span class="hljs-property">denominator</span> = denominator;<br>                    <span class="hljs-keyword">return</span> val;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    vals = [];<br>                    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;n&lt;numValues;n++) &#123;<br>                        numerator = file.<span class="hljs-title function_">getUint32</span>(valueOffset + <span class="hljs-number">8</span>*n, !bigEnd);<br>                        denominator = file.<span class="hljs-title function_">getUint32</span>(valueOffset+<span class="hljs-number">4</span> + <span class="hljs-number">8</span>*n, !bigEnd);<br>                        vals[n] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(numerator / denominator);<br>                        vals[n].<span class="hljs-property">numerator</span> = numerator;<br>                        vals[n].<span class="hljs-property">denominator</span> = denominator;<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> vals;<br>                &#125;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">9</span>: <span class="hljs-comment">// slong, 32 bit signed int</span><br>                <span class="hljs-keyword">if</span> (numValues == <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span> file.<span class="hljs-title function_">getInt32</span>(entryOffset + <span class="hljs-number">8</span>, !bigEnd);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    vals = [];<br>                    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;n&lt;numValues;n++) &#123;<br>                        vals[n] = file.<span class="hljs-title function_">getInt32</span>(valueOffset + <span class="hljs-number">4</span>*n, !bigEnd);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> vals;<br>                &#125;<br><br>            <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>: <span class="hljs-comment">// signed rational, two slongs, first is numerator, second is denominator</span><br>                <span class="hljs-keyword">if</span> (numValues == <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span> file.<span class="hljs-title function_">getInt32</span>(valueOffset, !bigEnd) / file.<span class="hljs-title function_">getInt32</span>(valueOffset+<span class="hljs-number">4</span>, !bigEnd);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    vals = [];<br>                    <span class="hljs-keyword">for</span> (n=<span class="hljs-number">0</span>;n&lt;numValues;n++) &#123;<br>                        vals[n] = file.<span class="hljs-title function_">getInt32</span>(valueOffset + <span class="hljs-number">8</span>*n, !bigEnd) / file.<span class="hljs-title function_">getInt32</span>(valueOffset+<span class="hljs-number">4</span> + <span class="hljs-number">8</span>*n, !bigEnd);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> vals;<br>                &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getStringFromDB</span>(<span class="hljs-params">buffer, start, length</span>) &#123;<br>        <span class="hljs-keyword">var</span> outstr = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span> (n = start; n &lt; start+length; n++) &#123;<br>            outstr += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(buffer.<span class="hljs-title function_">getUint8</span>(n));<br>        &#125;<br>        <span class="hljs-keyword">return</span> outstr;<br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">readEXIFData</span>(<span class="hljs-params">file, start</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">getStringFromDB</span>(file, start, <span class="hljs-number">4</span>) != <span class="hljs-string">&quot;Exif&quot;</span>) &#123;<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not valid EXIF data! &quot;</span> + <span class="hljs-title function_">getStringFromDB</span>(file, start, <span class="hljs-number">4</span>));<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">var</span> bigEnd,<br>            tags, tag,<br>            exifData, gpsData,<br>            tiffOffset = start + <span class="hljs-number">6</span>;<br><br>        <span class="hljs-comment">// test for TIFF validity and endianness</span><br>        <span class="hljs-keyword">if</span> (file.<span class="hljs-title function_">getUint16</span>(tiffOffset) == <span class="hljs-number">0x4949</span>) &#123;<br>            bigEnd = <span class="hljs-literal">false</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (file.<span class="hljs-title function_">getUint16</span>(tiffOffset) == <span class="hljs-number">0x4D4D</span>) &#123;<br>            bigEnd = <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not valid TIFF data! (no 0x4949 or 0x4D4D)&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (file.<span class="hljs-title function_">getUint16</span>(tiffOffset+<span class="hljs-number">2</span>, !bigEnd) != <span class="hljs-number">0x002A</span>) &#123;<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not valid TIFF data! (no 0x002A)&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">var</span> firstIFDOffset = file.<span class="hljs-title function_">getUint32</span>(tiffOffset+<span class="hljs-number">4</span>, !bigEnd);<br><br>        <span class="hljs-keyword">if</span> (firstIFDOffset &lt; <span class="hljs-number">0x00000008</span>) &#123;<br>            <span class="hljs-keyword">if</span> (debug) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Not valid TIFF data! (First offset less than 8)&quot;</span>, file.<span class="hljs-title function_">getUint32</span>(tiffOffset+<span class="hljs-number">4</span>, !bigEnd));<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>        tags = <span class="hljs-title function_">readTags</span>(file, tiffOffset, tiffOffset + firstIFDOffset, <span class="hljs-title class_">TiffTags</span>, bigEnd);<br><br>        <span class="hljs-keyword">if</span> (tags.<span class="hljs-property">ExifIFDPointer</span>) &#123;<br>            exifData = <span class="hljs-title function_">readTags</span>(file, tiffOffset, tiffOffset + tags.<span class="hljs-property">ExifIFDPointer</span>, <span class="hljs-title class_">ExifTags</span>, bigEnd);<br>            <span class="hljs-keyword">for</span> (tag <span class="hljs-keyword">in</span> exifData) &#123;<br>                <span class="hljs-keyword">switch</span> (tag) &#123;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;LightSource&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Flash&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;MeteringMode&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ExposureProgram&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;SensingMethod&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;SceneCaptureType&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;SceneType&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;CustomRendered&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;WhiteBalance&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;GainControl&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Contrast&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Saturation&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Sharpness&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;SubjectDistanceRange&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;FileSource&quot;</span> :<br>                        exifData[tag] = <span class="hljs-title class_">StringValues</span>[tag][exifData[tag]];<br>                        <span class="hljs-keyword">break</span>;<br><br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ExifVersion&quot;</span> :<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;FlashpixVersion&quot;</span> :<br>                        exifData[tag] = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(exifData[tag][<span class="hljs-number">0</span>], exifData[tag][<span class="hljs-number">1</span>], exifData[tag][<span class="hljs-number">2</span>], exifData[tag][<span class="hljs-number">3</span>]);<br>                        <span class="hljs-keyword">break</span>;<br><br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ComponentsConfiguration&quot;</span> :<br>                        exifData[tag] =<br>                            <span class="hljs-title class_">StringValues</span>.<span class="hljs-property">Components</span>[exifData[tag][<span class="hljs-number">0</span>]] +<br>                            <span class="hljs-title class_">StringValues</span>.<span class="hljs-property">Components</span>[exifData[tag][<span class="hljs-number">1</span>]] +<br>                            <span class="hljs-title class_">StringValues</span>.<span class="hljs-property">Components</span>[exifData[tag][<span class="hljs-number">2</span>]] +<br>                            <span class="hljs-title class_">StringValues</span>.<span class="hljs-property">Components</span>[exifData[tag][<span class="hljs-number">3</span>]];<br>                        <span class="hljs-keyword">break</span>;<br>                &#125;<br>                tags[tag] = exifData[tag];<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (tags.<span class="hljs-property">GPSInfoIFDPointer</span>) &#123;<br>            gpsData = <span class="hljs-title function_">readTags</span>(file, tiffOffset, tiffOffset + tags.<span class="hljs-property">GPSInfoIFDPointer</span>, <span class="hljs-title class_">GPSTags</span>, bigEnd);<br>            <span class="hljs-keyword">for</span> (tag <span class="hljs-keyword">in</span> gpsData) &#123;<br>                <span class="hljs-keyword">switch</span> (tag) &#123;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;GPSVersionID&quot;</span> :<br>                        gpsData[tag] = gpsData[tag][<span class="hljs-number">0</span>] +<br>                            <span class="hljs-string">&quot;.&quot;</span> + gpsData[tag][<span class="hljs-number">1</span>] +<br>                            <span class="hljs-string">&quot;.&quot;</span> + gpsData[tag][<span class="hljs-number">2</span>] +<br>                            <span class="hljs-string">&quot;.&quot;</span> + gpsData[tag][<span class="hljs-number">3</span>];<br>                        <span class="hljs-keyword">break</span>;<br>                &#125;<br>                tags[tag] = gpsData[tag];<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> tags;<br>    &#125;<br><br>    <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">getData</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">img, callback</span>) &#123;<br>        <span class="hljs-keyword">if</span> ((img <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Image</span> || img <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HTMLImageElement</span>) &amp;&amp; !img.<span class="hljs-property">complete</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">imageHasData</span>(img)) &#123;<br>            <span class="hljs-title function_">getImageData</span>(img, callback);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (callback) &#123;<br>                callback.<span class="hljs-title function_">call</span>(img);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">getTag</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">img, tag</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">imageHasData</span>(img)) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">return</span> img.<span class="hljs-property">exifdata</span>[tag];<br>    &#125;<br><br>    <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">getAllTags</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">img</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">imageHasData</span>(img)) <span class="hljs-keyword">return</span> &#123;&#125;;<br>        <span class="hljs-keyword">var</span> a,<br>            data = img.<span class="hljs-property">exifdata</span>,<br>            tags = &#123;&#125;;<br>        <span class="hljs-keyword">for</span> (a <span class="hljs-keyword">in</span> data) &#123;<br>            <span class="hljs-keyword">if</span> (data.<span class="hljs-title function_">hasOwnProperty</span>(a)) &#123;<br>                tags[a] = data[a];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> tags;<br>    &#125;<br><br>    <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">pretty</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">img</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">imageHasData</span>(img)) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">var</span> a,<br>            data = img.<span class="hljs-property">exifdata</span>,<br>            strPretty = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span> (a <span class="hljs-keyword">in</span> data) &#123;<br>            <span class="hljs-keyword">if</span> (data.<span class="hljs-title function_">hasOwnProperty</span>(a)) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data[a] == <span class="hljs-string">&quot;object&quot;</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (data[a] <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Number</span>) &#123;<br>                        strPretty += a + <span class="hljs-string">&quot; : &quot;</span> + data[a] + <span class="hljs-string">&quot; [&quot;</span> + data[a].<span class="hljs-property">numerator</span> + <span class="hljs-string">&quot;/&quot;</span> + data[a].<span class="hljs-property">denominator</span> + <span class="hljs-string">&quot;]\r\n&quot;</span>;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        strPretty += a + <span class="hljs-string">&quot; : [&quot;</span> + data[a].<span class="hljs-property">length</span> + <span class="hljs-string">&quot; values]\r\n&quot;</span>;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    strPretty += a + <span class="hljs-string">&quot; : &quot;</span> + data[a] + <span class="hljs-string">&quot;\r\n&quot;</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> strPretty;<br>    &#125;<br><br>    <span class="hljs-variable constant_">EXIF</span>.<span class="hljs-property">readFromBinaryFile</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">findEXIFinJPEG</span>(file);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">&#x27;function&#x27;</span> &amp;&amp; define.<span class="hljs-property">amd</span>) &#123;<br>        <span class="hljs-title function_">define</span>(<span class="hljs-string">&#x27;exif-js&#x27;</span>, [], <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">EXIF</span>;<br>        &#125;);<br>    &#125;<br>&#125;.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>));<br><br><br></code></pre></td></tr></table></figure>


        </div>
    </article>
    <div class="w300 m-l-15 fixed-item-right">
        <div class="hot-list">
    <div class="f14 hot-list-title">推荐阅读</div>
    <ul>
        
            <li>
                <a href="/2023/02/14/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6.html">文件加载进度</a>
                <p>2023-02-14</p>
            </li>
        
            <li>
                <a href="/2023/06/30/python-PaddleDetection%E5%AE%98%E6%96%B9%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.html">PaddleDetection官方安装教程</a>
                <p>2023-06-30</p>
            </li>
        
            <li>
                <a href="/2023/03/24/node%E6%89%A7%E8%A1%8Ccmd%E5%91%BD%E4%BB%A4%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98.html">node执行cmd命令乱码问题</a>
                <p>2023-03-24</p>
            </li>
        
            <li>
                <a href="/2020/06/01/%E8%B6%85%E7%BA%A7%E6%95%A3%E6%88%B7291-300.html">超级散户291-300</a>
                <p>2020-06-01</p>
            </li>
        
            <li>
                <a href="/2023/06/15/js%E6%A8%A1%E6%8B%9Frequire%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97.html">js模拟require加载模块</a>
                <p>2023-06-15</p>
            </li>
        
    </ul>
    <!-- <ul>
        
            <li>
                <a href="/2023/02/14/%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6.html">文件加载进度</a>
                <p>2023-02-14</p>
            </li>
        
            <li>
                <a href="/2023/06/30/python-PaddleDetection%E5%AE%98%E6%96%B9%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.html">PaddleDetection官方安装教程</a>
                <p>2023-06-30</p>
            </li>
        
            <li>
                <a href="/2023/03/24/node%E6%89%A7%E8%A1%8Ccmd%E5%91%BD%E4%BB%A4%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98.html">node执行cmd命令乱码问题</a>
                <p>2023-03-24</p>
            </li>
        
            <li>
                <a href="/2020/06/01/%E8%B6%85%E7%BA%A7%E6%95%A3%E6%88%B7291-300.html">超级散户291-300</a>
                <p>2020-06-01</p>
            </li>
        
            <li>
                <a href="/2023/06/15/js%E6%A8%A1%E6%8B%9Frequire%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97.html">js模拟require加载模块</a>
                <p>2023-06-15</p>
            </li>
        
    </ul> -->
</div>
        <div class="m-t-15"></div>
        <div class="tag-list">
    <div class="f14 tag-list-title">标签列表</div>
    <div class="flex flex-wrap flex-jus-start flex-item-start tag-list-content">
        
            <a href="/tag/%E7%BD%91%E8%B5%9A/">网赚(46)</a>
        
            <a href="/tag/%E7%8E%84%E5%AD%A6/">玄学(2)</a>
        
            <a href="/tag/ai/">AI(7)</a>
        
            <a href="/tag/chatgpt/">chatgpt(2)</a>
        
            <a href="/tag/js/">js(124)</a>
        
            <a href="/tag/hexo/">Hexo(4)</a>
        
            <a href="/tag/ffmpeg/">ffmpeg(6)</a>
        
            <a href="/tag/canvas/">canvas(5)</a>
        
            <a href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库(7)</a>
        
            <a href="/tag/paddledetection/">PaddleDetection(4)</a>
        
            <a href="/tag/stablediffusion/">StableDiffusion(5)</a>
        
            <a href="/tag/stablediffusion/">stablediffusion(3)</a>
        
            <a href="/tag/linux/">linux(17)</a>
        
            <a href="/tag/ajax/">ajax(1)</a>
        
            <a href="/tag/astro/">astro(3)</a>
        
            <a href="/tag/axios/">axios(2)</a>
        
            <a href="/tag/bat/">bat(6)</a>
        
            <a href="/tag/node/">node(37)</a>
        
            <a href="/tag/dns/">dns(8)</a>
        
            <a href="/tag/css/">css(14)</a>
        
            <a href="/tag/cursor/">cursor(1)</a>
        
            <a href="/tag/go/">go(57)</a>
        
            <a href="/tag/docker/">docker(1)</a>
        
            <a href="/tag/echarts/">echarts(2)</a>
        
            <a href="/tag/charts/">charts(1)</a>
        
            <a href="/tag/electron/">electron(1)</a>
        
            <a href="/tag/git/">git(1)</a>
        
            <a href="/tag/vps/">vps(8)</a>
        
            <a href="/tag/html/">html(6)</a>
        
            <a href="/tag/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端(6)</a>
        
            <a href="/tag/vue/">vue(26)</a>
        
            <a href="/tag/jquery/">jquery(3)</a>
        
            <a href="/tag/video/">video(2)</a>
        
            <a href="/tag/websocket/">websocket(3)</a>
        
            <a href="/tag/ios/">ios(2)</a>
        
            <a href="/tag/koa2/">koa2(8)</a>
        
            <a href="/tag/%E5%85%B6%E4%BB%96/">其他(7)</a>
        
            <a href="/tag/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83/">测试环境(1)</a>
        
            <a href="/tag/%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/">视频处理(3)</a>
        
            <a href="/tag/%E7%BC%96%E8%BE%91%E5%99%A8/">编辑器(1)</a>
        
            <a href="/tag/markdown/">markdown(1)</a>
        
            <a href="/tag/sql/">sql(1)</a>
        
            <a href="/tag/nginx/">nginx(4)</a>
        
            <a href="/tag/vue3/">vue3(1)</a>
        
            <a href="/tag/express/">express(2)</a>
        
            <a href="/tag/mysql/">mysql(2)</a>
        
            <a href="/tag/ocr/">ocr(1)</a>
        
            <a href="/tag/%E7%88%AC%E8%99%AB/">爬虫(12)</a>
        
            <a href="/tag/nuxt/">nuxt(3)</a>
        
            <a href="/tag/npm/">npm(1)</a>
        
            <a href="/tag/php/">php(9)</a>
        
            <a href="/tag/pm2/">pm2(1)</a>
        
            <a href="/tag/python/">python(11)</a>
        
            <a href="/tag/%E7%BB%98%E5%9B%BE/">绘图(1)</a>
        
            <a href="/tag/react/">react(3)</a>
        
            <a href="/tag/svg/">svg(1)</a>
        
            <a href="/tag/threejs/">threejs(2)</a>
        
            <a href="/tag/tvbox/">tvbox(1)</a>
        
            <a href="/tag/typescript/">typescript(2)</a>
        
            <a href="/tag/unity/">unity(1)</a>
        
            <a href="/tag/demo/">Demo(1)</a>
        
            <a href="/tag/vscode/">vscode(1)</a>
        
            <a href="/tag/pinia/">pinia(1)</a>
        
            <a href="/tag/vue-router/">vue-router(1)</a>
        
            <a href="/tag/vuex/">vuex(1)</a>
        
            <a href="/tag/webpack/">webpack(2)</a>
        
            <a href="/tag/%E4%B8%AD%E5%8C%BB/">中医(13)</a>
        
            <a href="/tag/%E5%AE%B9%E5%99%A8/">容器(1)</a>
        
            <a href="/tag/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1/">企业微信(1)</a>
        
            <a href="/tag/%E6%BF%80%E6%B4%BB%E7%A0%81/">激活码(1)</a>
        
            <a href="/tag/%E5%9B%BD%E5%AD%A6/">国学(6)</a>
        
            <a href="/tag/%E7%BE%8E%E9%A3%9F/">美食(3)</a>
        
            <a href="/tag/%E5%89%8D%E7%AB%AF/">前端(1)</a>
        
            <a href="/tag/%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/">加密解密(1)</a>
        
            <a href="/tag/%E5%B0%8F%E7%9A%AE/">小皮(1)</a>
        
            <a href="/tag/emoji/">emoji(2)</a>
        
            <a href="/tag/%E6%B1%89%E5%AD%97/">汉字(1)</a>
        
            <a href="/tag/%E5%BE%AE%E4%BF%A1/">微信(3)</a>
        
            <a href="/tag/date/">Date(1)</a>
        
            <a href="/tag/cookie/">cookie(1)</a>
        
            <a href="/tag/localstorage/">localStorage(1)</a>
        
            <a href="/tag/indexdb/">indexDB(1)</a>
        
            <a href="/tag/json/">json(1)</a>
        
            <a href="/tag/%E6%A8%A1%E6%9D%BF/">模板(1)</a>
        
            <a href="/tag/%E8%82%A1%E7%A5%A8/">股票(6)</a>
        
            <a href="/tag/ps/">PS(1)</a>
        
            <a href="/tag/%E8%AF%BB%E4%B9%A6%E4%BC%9A/">读书会(1)</a>
        
    </div>
</div>


    </div>
</div>
<script>
    // 文章全屏显示
    document.querySelector('#extend').addEventListener('click',function(){
        let ele = document.querySelector('.post-box').classList
        if(ele.value.includes('post-full')){
            ele.remove('post-full')
        }else{
            ele.add('post-full')
        }
    },false)
    function addCopyButtons() {
        // 获取所有代码块
        const codeBlocks = document.querySelectorAll('pre code');
        
        codeBlocks.forEach((codeBlock) => {
            // 创建复制按钮
            const copyButton = document.createElement('i');
            copyButton.className = 'copy-button fa fa-copy';
            
            // 查找最近的 .highlight 父元素
            const highlightBlock = codeBlock.closest('.highlight');
            if (highlightBlock) {
                highlightBlock.insertBefore(copyButton, highlightBlock.firstChild);
            }
            
            // 添加点击事件
            copyButton.addEventListener('click', () => {
                // 获取格式化的代码内容
                const code = codeBlock.innerText || codeBlock.textContent;
                
                // 使用 textarea 来保持文本格式
                const textarea = document.createElement('textarea');
                textarea.value = code;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    // 尝试使用新的 API
                    navigator.clipboard.writeText(code).then(() => {
                        copyButton.className = 'copy-button fa fa-check';
                        setTimeout(() => {
                            copyButton.className = 'copy-button fa fa-copy';
                        }, 2000);
                    });
                } catch (err) {
                    // 降级方案：使用 document.execCommand
                    document.execCommand('copy');
                    copyButton.className = 'copy-button fa fa-check';
                    setTimeout(() => {
                        copyButton.className = 'copy-button fa fa-copy';
                    }, 2000);
                }
                
                // 清理临时元素
                document.body.removeChild(textarea);
            });
        });
    }
    // 页面加载完成后添加复制按钮
document.addEventListener('DOMContentLoaded', addCopyButtons);

</script>
    </div>
    <footer>
    <div>
        copyright © 2024 Gary Wang 
    </div>
</footer>
    <div class="search-page animated">
    <div class="search-page-content">
        <i class="fa fa-times search-close"></i>
        <h1>内容搜索</h1>
        <form onsubmit="formSubmit(event)" class="search-page-form re">
            <input type="text" placeholder="查找" name="keyword" id="search-input" autocomplete="off">
            <button>
                <i class="fa fa-search"></i>
            </button>
        </form>
        <div class="search-page-result" id="search-result">
        </div>
    </div>
    <div class="search-page-bg"></div>
</div>
<script>
    //所有搜索数据
    let searchData = [];
    
    // 加载搜索数据
    fetch('/search.xml')
        .then(response => response.text())
        .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
        .then(data => {
            searchData = Array.from(data.getElementsByTagName('entry')).map(entry => ({
                title: entry.getElementsByTagName('title')[0].textContent,
                content: entry.getElementsByTagName('content')[0].textContent,
                url: entry.getElementsByTagName('url')[0].textContent
            }));
        });

    // 搜索功能实现
    function formSubmit(event) {
        event.preventDefault();
        // 搜索关键词
        const keyword = document.getElementById('search-input').value.toLowerCase();
        // 搜索结果
        const results = searchData.filter(item => 
            item.title.toLowerCase().includes(keyword) || item.content.toLowerCase().includes(keyword)
        );
        const resultDiv = document.getElementById('search-result');
        if(results.length === 0 || keyword === ''){
            resultDiv.innerHTML = '<div class="search-page-result-item t-c f13">没有找到相关内容</div>';
        }else{
            resultDiv.innerHTML = results.map(item => `
                <div class="search-page-result-item">
                    <a href="${item.url}">
                        <h5>${item.title}</h5>
                    </a>
                </div>
            `).join('');
        }
    }
    document.querySelector('.search-close').addEventListener('click',function(){
        hideSearchPage()
    })
</script>
    <!-- <div class="gotopage" id="gotopage">
        <i class="far fa-arrow-alt-circle-up"></i>
    </div> -->
    <script src="/assets/js/common.js"></script>
    <script src="/assets/js/func.js"></script>
    <script src="/assets/live2dw/lib/L2Dwidget.js"></script>
    <script>
        // 加载动画
        window.addEventListener('DOMContentLoaded',function(){
            setTimeout(function() {
                document.querySelector('.loading').style.display = 'none';
            },800)
        },false)
        
        /* 看板娘 */
        L2Dwidget.init({
            "pluginRootPath"  : "/assets/live2dw/",
            "pluginJsPath"	  : "/assets/live2dw/lib/",
            "pluginModelPath" : "/assets/live2dw/assets/",
            "tagMode"		  : false,
            "debug"			  : false,
            "model"			  : {
                "jsonPath" : "/assets/live2dw/assets/kesshouban.model.json"
            },
            "display" : {
                "position" : "right",
                "width"	   : 250,
                "height"   : 250,
                "hOffset"  : -70,
                "vOffset"  : 60
            },
            "dialog"	: {
                "enable" : true
            },
            "mobile"	: {
                "show" : true
            },
            "react"		: {
                "opacity" : 1
            },
            "log" : false
        });
        const addEvent = function(){
            const live2dWidget = document.getElementById('live2d-widget')
            setTimeout(function(){
                if(live2dWidget){
                    live2dWidget.addEventListener('click',function(e){
                        document.querySelector('.main').scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    })
                }else{
                    addEvent()
                }
            },1000)
        }
        addEvent()
    </script>
    <!-- Cloudflare Web Analytics -->
    <!-- <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "5bd3afcce7474fcdbf639fab1999e804"}'></script> -->
    <!-- End Cloudflare Web Analytics -->
    <!-- <script src='//unpkg.com/@waline/client/dist/waline.js'></script>
    <link href='//unpkg.com/@waline/client/dist/waline.css' rel='stylesheet'/> -->
</body>
</html>